window.VERSION = "0.0.2";var pmb_im={controllers:angular.module("pmb_im.controllers",[]),services:angular.module("pmb_im.services",[])};pmb_im.app=angular.module("pmb_im",["ionic","ionic.wizard","ion-autocomplete","leaflet-directive","pmb_im.controllers","pmb_im.services","ngCordova"]).constant("ApiImEndpoint",{url:"http://www.montevideo.gub.uy"}).constant("ApiDataEndpoint",{url:"https://backend.e-openbar.com"}).run(["$ionicPlatform","$rootScope","$cordovaKeyboard",function(e,t,n){t.VERSION=window.VERSION,e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),cordova.plugins.Keyboard.disableScroll(!1)),ionic.Platform.isFullScreen=!0,window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider","$urlRouterProvider","$compileProvider","$ionicConfigProvider",function(e,t,n,o){n.debugInfoEnabled(!1),e.state("app",{cache:!1,url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AbsController"}).state("app.map",{cache:!1,url:"/map",views:{menuContent:{templateUrl:"templates/map.html",controller:"MapController"}}}).state("app.intro",{cache:!1,url:"/intro",views:{menuContent:{templateUrl:"templates/intro.html",controller:"IntroCtrl"}}}),t.otherwise("/app/intro")}]),pmb_im.controllers.controller("AbsController",["$scope",function(e){}]),pmb_im.controllers.controller("IntroCtrl",["$scope","$state","$cordovaGeolocation","$stateParams","$ionicPlatform","$ionicPopup","LocationsService","DBService",function(e,t,n,o,a,i,r,s){var l=s.initDB();l.info().then(console.log.bind(console)),e.geolocate=function(){var e={timeout:3500,enableHighAccuracy:!0};n.getCurrentPosition(e).then(function(e){r.save_initial_position(e),t.go("app.map")},function(e){t.go("app.map")})},e.$on("$ionicView.enter",function(){null!=r.council_modal&&(r.council_modal.hide(),r.council_modal.remove()),e.geolocate()})}]),pmb_im.controllers.controller("MapController",["$scope","_","$cordovaCamera","$cordovaGeolocation","$compile","$ionicModal","$ionicPopup","leafletData","ConfigService","LocationsService","PinService","MessageService","DrinkService","AuthService","UserService","DBService","$timeout","$interval","$location","ErrorService","$ionicSlideBoxDelegate","$ionicScrollDelegate","PopUpService","ConnectivityService","$cordovaInAppBrowser","MapService","ModalService","SemaphoreService","ValidationService","NotificationService",function(e,t,n,o,a,i,r,s,l,c,u,d,p,m,_,g,f,h,v,y,b,w,k,I,A,E,D,R,S,M){e.online_user_geo={},e.online_user_geo_array=new Array,e.baseURL=l.baseURL,e.AppName=l.AppName,e.user_cached_image="./img/icon-user-anonymous.png",e.one_value_popup=null,e.myIntervals=new Array,e.$on("$ionicView.beforeEnter",function(){D.checkNoModalIsOpen(),g.initDB(),I.isOnline()?e.check_user_logged():e.set_offline_user(),document.getElementById("foot_bar").style.display="block",I.isOnline()&&(e.create_online_map(),e.myIntervals.userLocation=h(function(){e.sendUserLocation()},3e4))}),e.$on("$ionicView.afterEnter",function(){s.getMap();""!=c.initial_lat?E.centerMapOnCoords(c.initial_lat,c.initial_lng,16):E.centerMapOnCoords(-34.901113,-56.164531,14),e.checkNotifications()}),e.checkNotifications=function(){e.myIntervals.notifications&&h.cancel(e.myIntervals.notifications),e.myIntervals.notifications=h(function(){e.notifications=new Array,_.uid&&M.getUnrecivedNotifications(_.name,_.password).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.notifications=e.getObjectDataFromResponse(n).Notifications)})},3e3)},e.openNotification=function(t){e.dontShowNotificationAgain(t.nid),"nuevo_mensaje"==t.tipo?e.send_message_to(t.uid):"invitacion_a_trago"==t.tipo?e.openInvitationsModal(t.uid):"respuesta_a_invitacion"==t.tipo&&e.openInvitationsModal(t.uid)},e.dontShowNotificationAgain=function(e){_.uid&&M.dontShowNotificationAgain(_.name,_.password,e).then(function(e){})},e.closeNotification=function(t){e.dontShowNotificationAgain(t.nid)},e.openWebsite=function(e){var t={location:"no",clearcache:"yes",toolbar:"no"};A.open(e,"_blank",t).then(function(e){})["catch"](function(e){})},e.create_online_map=function(){e.map={defaults:{tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",minZoom:1,maxZoom:18,zoomControlPosition:"topleft"},markers:{},events:{map:{enable:["context"],logic:"emit"}},center:{}},e.loadPinsLayer(),e.map.center={lat:-34.901113,lng:-56.164531,zoom:16},s.getMap().then(function(t){t.on("moveend",e.hideOffScreenPins)})},e.next=function(){b.next()},e.previous=function(){b.previous()},e.back_to_map=function(e){e?(D.checkNoModalIsOpen(),document.getElementById("foot_bar").style.display="block",document.getElementById("spinner-inside-modal").style.display="none"):document.getElementById("spinner-inside-modal").style.display="none"},e.image=null,e.addImage=function(t,o,a,i){e.isUserPhoto=o,e.isCommentPhoto=a,e.isNewUserPhoto=i;var r=Camera.PictureSourceType.CAMERA,s=!0,l=!0;1==t&&(r=Camera.PictureSourceType.PHOTOLIBRARY,s=!1,l=!1);var c={quality:90,destinationType:Camera.DestinationType.FILE_URI,sourceType:r,allowEdit:!1,correctOrientation:s,encodingType:Camera.EncodingType.JPEG,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:l,targetWidth:500,targetHeight:500};n.getPicture(c).then(function(t){function n(t){window.FilePath.resolveNativePath(t,function(n){t="file://"+n,n.startsWith("file://")&&(t=n),1==e.isUserPhoto?e.profile.picture_url=t:1==e.isCommentPhoto?e.comment.file=t:1==e.isNewUserPhoto&&(e.newuser.picture_url=t),e.imgURI=t},function(e){alert("Error resolveNativePath"+e)})}n(t)},function(e){})},e.urlForImage=function(){var t="http://placehold.it/200x200";if(e.image){var n=e.image.substr(e.image.lastIndexOf("/")+1);t=cordova.file.dataDirectory+n}return t},e.scrollMe=function(e){v.hash(e);var t=w.$getByHandle("content");t.anchorScroll()},e.set_active_option=function(e){document.getElementById(e).className="option-active"},e.hide_special_divs=function(){document.getElementById("user-options-menu").style.display="none"},e.close_report_detail_modal=function(){D.checkNoModalIsOpen(),e.report_detail_id=null},e.locate=function(){o.getCurrentPosition().then(function(t){e.map.center.lat=t.coords.latitude,e.map.center.lng=t.coords.longitude,e.map.center.zoom=15,e.map.markers.now={lat:t.coords.latitude,lng:t.coords.longitude,message:"You Are Here",focus:!0,draggable:!1}},function(e){})},e.addMapControls=function(){document.getElementById("map_crosshair").style.display="block",document.getElementById("map_crosshair_button").style.display="block"},e.changeUserLocationPin=function(t,n,o){if(e.online_user_geo_array[o]){layer=e.online_user_geo_array[o];var a=new L.LatLng(t,n);layer.setLatLng(a)}},e.hideOffScreenPins=function(){s.getMap().then(function(t){var n=t.getBounds();e.usersVisible=[],e.online_user_geo_array.forEach(function(o,a){var i=n.contains(o.getLatLng());i?i&&(t.addLayer(o),e.usersVisible.push(o.feature)):t.removeLayer(o)})})},e.removeAllPins=function(){s.getMap().then(function(t){e.usersVisible=[],e.online_user_geo_array&&e.online_user_geo_array.forEach(function(e,n){t.removeLayer(e)})})},e.loadPinsLayer=function(){document.getElementById("spinner").style.display="block",s.getMap().then(function(t){u.getAll().then(function(n){if(null==u.lastPinsResponse||u.lastPinsResponse&&u.lastPinsResponse!=n){e.online_user_geo_array&&(e.usersVisible=[],e.online_user_geo_array.forEach(function(e,n){t.removeLayer(e)})),u.lastPinsResponse=n,e.reportsByState={};var o=n.data.features;e.online_users_geo=n.data.features,o.forEach(function(t){if(t.properties){var n=t.geometry.coordinates[0],o=t.geometry.coordinates[1];if(n&&o){var i=t.properties.Online_status,r=t.properties.Icon;"anon"==r&&(r="./img/icon-user-anonymous.png");var s="./img/generic_pin_red.png";"Online"==i&&(s="./img/generic_pin_green.png");var l=L.icon({shadowUrl:s,shadowSize:[100,138],shadowAnchor:[44,138],iconUrl:r,iconSize:[46,46],iconAnchor:[24,120],popupAnchor:[0,-138]}),c=L.marker([o,n],{icon:l});if(c.feature=t,e.online_user_geo_array[c.feature.properties.Uid]=c,t.properties){var u=t.properties.Uid,d=t.properties.Name,p=t.properties.InterestedIn,m=t.properties.Status,g=t.properties.Gender;_.uid&&_.uid==u&&(d="Tú: "+d);var f=e.timeConverter(t.properties.LocationTimeStamp);html='<a class="name_inside_marker_popup"><p>'+d+"</p>",html=html+'<p class="gender_inside_marker_popup">'+g+"</p>",html=html+'<p><img class="img_inside_marker_popup" src="'+r+'"/></p>',html=html+'<p class="status_inside_marker_popup">"'+m+'"</p>',html=html+'<p class="interested_inside_marker_popup">Interesad@ en '+p+"</p>",html=html+'<p class="lastupdate_inside_marker_popup">'+i+"</p>",html=html+'<p class="lastupdate_inside_marker_popup">'+f+"</p>",_.uid&&_.uid==u||(html=html+'<p class="message_icon_inside_marker_popup"><img ng-click="send_message_to('+u+');" src="./img/message_icon.png" />',html=html+'<img ng-click="openInvitationsModal('+u+');" src="./img/drink_icon.png" /></p>'),html+="</a>";var h=a(html)(e);c.bindPopup(h[0])}}}}),document.getElementById("spinner").style.display="none",e.hideOffScreenPins()}e.checkTalkStatus()})})},e.checkTalkStatus=function(){R.takeIfAvailable("can_talk")&&d.checkWhoCanTalk(_.name,_.password).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(n.forEach(function(e){d.canTalkToUsers["uid-"+e]=1}),R.makeAvailableAgain("can_talk"))})},e.key_press=function(e,t){var n=e.keyCode;if("private_chat"==t&&13==n)try{null===cordova||cordova&&cordova.plugins.Keyboard&&cordova.plugins.Keyboard.close()}catch(o){}},e.send_message_to=function(t){if(R.takeIfAvailable("open-modal"))if(document.getElementById("spinner").style.display="block",_.uid)d.checkWhoCanTalk(_.name,_.password).then(function(n){var o=e.getObjectDataFromResponse(n);if(!o.Status||"error"!=o.Status)if(o.forEach(function(e){d.canTalkToUsers["uid-"+e]=1}),e.canTalkToUser(t))e.chat=new Array,e.chat.other_user=new Array,e.chat.other_user.uid=t,e.chat.messages=new Array,e.chat.new_text_message="",d.getUserInfo(t).then(function(n){e.getObjectDataFromResponse(n).Photo?e.chat.other_user.picture_url=e.getObjectDataFromResponse(n).Photo:e.chat.other_user.picture_url="./img/icon-user-anonymous.png",e.chat.other_user.username=e.getObjectDataFromResponse(n).Name;var o=_.uid;d.getAllMessagesToUser(_.name,_.password,t,o).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.chat.messages=e.getObjectDataFromResponse(t)),e.myIntervals.privateMessage&&h.cancel(e.myIntervals.privateMessage),e.myIntervals.privateMessage=h(function(){d.getAllMessagesToUser(_.name,_.password,e.chat.other_user.uid,_.uid).then(function(t){var n=e.getObjectDataFromResponse(t);if(!n.Status||"error"!=n.Status){e.chat.messages=e.getObjectDataFromResponse(n);var o=e.chat.messages[e.chat.messages.length-1].nid;e.scrollMe("message-"+o)}})},3e3),i.fromTemplateUrl("templates/private_chat.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){document.getElementById("spinner").style.display="none",document.getElementById("user-options-menu").style.display="none",D.checkNoModalIsOpen(),D.activeModal=t,document.getElementById("foot_bar").style.display="none",D.activeModal.show(),R.makeAvailableAgain("open-modal");var n=e.chat.messages[e.chat.messages.length-1].nid;e.scrollMe("message-"+n)})})});else{R.makeAvailableAgain("open-modal"),document.getElementById("spinner").style.display="none";var a=r.alert({title:"Invita algo de tomar",template:"Debe tener al menos una invitación a un trago aceptada entre usted y esta persona para poder hablar."});a.then(function(e){})}});else{document.getElementById("spinner").style.display="none",R.makeAvailableAgain("open-modal");var n=r.alert({title:"Inicie sesión o cree una nueva cuenta",template:"Debe estar logueado para poder enviar y recibir mensajes."});n.then(function(e){})}},e.checkIfCanReplyInvitation=function(e){return!(!_.uid||_.uid==e.uid||"Enviada"!=e.status&&"Recibida"!=e.status)},e.checkIfWaitingReplyFromInvitation=function(e){return!(!_.uid||_.uid!=e.uid||"Enviada"!=e.status&&"Recibida"!=e.status)},e.getDrinkCostByNid=function(t){var n=0;return e.invitation.available_drinks&&e.invitation.available_drinks.forEach(function(e){e.Nid==t&&(n=e.Credits)}),n},e.acceptInvitation=function(t){e.send_invitation_response("Aceptada",t),e.invitation.other_user.talk=!0},e.refuseInvitation=function(t){e.send_invitation_response("Rechazada",t)},e.canTalkToUser=function(e){if(_.uid)return null!=d.canTalkToUsers["uid-"+e]&&1==d.canTalkToUsers["uid-"+e]},e.send_invitation_response=function(t,n){var o=document.getElementById("error_container");if(o.style.display="none",null==n)o.style.display="block",o.innerHTML="Hubo un error. No se encuentra el ID de invitación";else{e.getDrinkCostByNid(e.invitation.selected_drink),e.invitation.user_credits;R.takeIfAvailable("submit-form")&&(document.getElementById("spinner-inside-modal").style.display="block",p.sendDrinkInvitationResponse(t,_.name,_.password,n,_.uid).then(function(t){R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none";var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status&&(o.style.display="block",o.innerHTML=n.Message)}))}},e.send_invitation=function(){var t=document.getElementById("error_container");if(null==e.invitation.selected_drink)t.style.display="block",t.innerHTML="Debe seleccionar una bebida a invitar";else{var n=e.getDrinkCostByNid(e.invitation.selected_drink),o=e.invitation.user_credits;parseFloat(n)>parseFloat(o)?(t.style.display="block",t.innerHTML="Créditos insuficientes. Para poder invitar esta bebida debe comprar más créditos"):R.takeIfAvailable("submit-form")&&(document.getElementById("spinner-inside-modal").style.display="block",p.sendDrinkInvitationToUser(e.invitation.selected_drink,e.invitation.other_user.uid,_.uid,_.name,_.password).then(function(n){R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none";var o=e.getObjectDataFromResponse(n);o.Status&&"error"==o.Status?(t.style.display="block",t.innerHTML=o.Message):(e.invitation.user_credits=o.NewCredits,e.invitation.selected_drink=null,d.canTalkToUsers["uid-"+e.invitation.other_user.uid]=null)}))}},e.openInvitationsModal=function(t){if(R.takeIfAvailable("open-modal"))if(document.getElementById("spinner").style.display="block",_.uid)e.invitation=new Array,e.invitation.response=null,e.invitation.other_user=new Array,e.invitation.other_user.uid=t,e.invitation.invitations=new Array,e.invitation.available_drinks=new Array,e.invitation.selected_drink=null,d.getUserInfo(t).then(function(t){e.getObjectDataFromResponse(t).Photo?e.invitation.other_user.picture_url=e.getObjectDataFromResponse(t).Photo:e.invitation.other_user.picture_url="./img/icon-user-anonymous.png",e.invitation.other_user.username=e.getObjectDataFromResponse(t).Name,p.getAllDrinksAvailable(_.name,_.password).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.invitation.available_drinks=n.Drinks,e.invitation.user_credits=n.UserCredits),p.getAllInvitationsWithUser(_.name,_.password,e.invitation.other_user.uid,_.uid).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.invitation.invitations=n),d.checkWhoCanTalk(_.name,_.password).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||n.forEach(function(e){d.canTalkToUsers["uid-"+e]=1})}),e.myIntervals.drinkInvitation&&h.cancel(e.myIntervals.drinkInvitation),e.myIntervals.drinkInvitation=h(function(){p.getAllInvitationsWithUser(_.name,_.password,e.invitation.other_user.uid,_.uid).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.invitation.invitations=e.getObjectDataFromResponse(n)),d.checkWhoCanTalk(_.name,_.password).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||n.forEach(function(e){d.canTalkToUsers["uid-"+e]=1})})})},3e3),i.fromTemplateUrl("templates/drink_invitation.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){document.getElementById("spinner").style.display="none",document.getElementById("user-options-menu").style.display="none",D.checkNoModalIsOpen(),D.activeModal=e,document.getElementById("foot_bar").style.display="none",D.activeModal.show(),R.makeAvailableAgain("open-modal")})})})});else{document.getElementById("spinner").style.display="none",R.makeAvailableAgain("open-modal");var n=r.alert({title:"Inicie sesión o cree una nueva cuenta",template:"Debe estar logueado para poder enviar y recibir invitaciones."});n.then(function(e){})}},e.close_message_modal=function(){e.myIntervals.privateMessage&&h.cancel(e.myIntervals.privateMessage),e.myIntervals.drinkInvitation&&h.cancel(e.myIntervals.drinkInvitation),document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.close_invitation_modal=function(){e.myIntervals.privateMessage&&h.cancel(e.myIntervals.privateMessage),e.myIntervals.drinkInvitation&&h.cancel(e.myIntervals.drinkInvitation),document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.send_message_ok=function(){R.takeIfAvailable("submit-form")&&(e.chat.new_text_message?d.sendTextMessageToUser(e.chat.new_text_message,e.chat.other_user.uid,_.uid,_.name,_.password).then(function(t){R.makeAvailableAgain("submit-form"),document.getElementById("message_text_area").innerHTML="",e.chat.new_text_message="",d.getAllMessagesToUser(_.name,_.password,e.chat.other_user.uid,_.uid).then(function(t){e.chat.messages=e.getObjectDataFromResponse(t)})}):R.makeAvailableAgain("submit-form"))},e.getNameFromUid=function(t){return _.uid==t?_.name:e.chat.other_user.uid==t?e.chat.other_user.username:void 0},e.getNameFromUidInvitation=function(t){return _.uid==t?_.name:e.invitation.other_user.uid==t?e.invitation.other_user.username:void 0},e.timeConverter=function(e){var t=new Date(1e3*e),n=t.getFullYear(),o=t.getMonth();o<10&&(o="0"+o);var a=t.getDate();a<10&&(a="0"+a);var i=t.getHours();i<10&&(i="0"+i);var r=t.getMinutes();r<10&&(r="0"+r);var s=(t.getSeconds(),a+"/"+o+"/"+n+" "+i+":"+r);return s},e.model=[],e.externalModel=[],e.selectedItems=[],e.preselectedSearchItems=[],e.clickedValueModel="",e.removedValueModel="",e.itemsRemoved=function(t){e.removedValueModel=t},e.user_options=function(){var t=document.getElementById("user-options-menu");if("block"==t.style.display)t.style.display="none";else{var n=_.name;null==n?e.show_anonymous_menu():e.show_user_menu()}},e.show_anonymous_menu=function(){var t=document.getElementById("user-options-menu"),n="<div id='auth_options'><div class='nonauth-link' ng-click='show_login_modal()'>Iniciar sesión</div>";n+="<div class='nonauth-link' ng-click='show_sign_up_modal()'>Registrarse</div></div>",t.innerHTML=n,a(t)(e),t.style.height="120px",t.style.width="150px",t.style.display="block"},e.show_user_menu=function(){var t=document.getElementById("user-options-menu"),n=_.name+"<div id='auth_options'><div class='user-logged-link' ng-click='show_edit_profile_modal()'>Mi perfil</div>";n+="<div class='user-logged-link' ng-click='sign_out()'>Cerrar sesión</div></div>",t.innerHTML=n,a(t)(e),t.style.height="220px",t.style.width="200px",t.style.display="block"},e.create_field_array=function(e,t,n){var o=new Array;return o.name=e,o.type=t,o.value=n,o},e.create_field_array_with_twoFields=function(e,t,n,o){var a=new Array;return a.name=e,a.type=t,a.value=n,a.secondValue=o,a},e.fix_fb_image_link=function(e){if(e.indexOf("http://graph.facebook.com")>=0){var t=e.split("http://graph.facebook.com"),n="http://graph.facebook.com"+t[1];return n}return e},e.log_in=function(t,n){if(R.takeIfAvailable("submit-form"))if(I.isOnline()){document.getElementById("spinner-inside-modal").style.display="block";var o=new Array;o.push(e.create_field_array("Usuario","notNull",t)),o.push(e.create_field_array("Contraseña","notNull",n)),y.check_fields(o,"error_container")?m.log_in(t,n).then(function(t){y.http_response_is_successful(t,"error_container")?(photo=e.fix_fb_image_link(e.getObjectDataFromResponse(t).Photo),"anon"==photo&&(photo="url(./img/icon-user-anonymous.png)"),_.save_user_data(e.getObjectDataFromResponse(t).Name,e.nonauth.password,photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),g.saveUser(e.getObjectDataFromResponse(t).Name,e.nonauth.password,photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),e.set_user_picture(1),document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form"),e.close_login_modal(),e.sendUserLocation()):(R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none")},function(e){document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form"),y.show_error_message("error_container",e.statusText)}):(document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form"))}else R.makeAvailableAgain("submit-form"),k.show_alert("Sin conexión a internet","Para iniciar sesión debe estar conectado a internet")},e.log_in_background=function(t,n){m.log_in(t,n).then(function(t){return y.http_response_is_successful_ajax(t)?(photo=e.fix_fb_image_link(e.getObjectDataFromResponse(t).Photo),"anon"==photo&&(photo="url(./img/icon-user-anonymous.png)"),_.save_user_data(e.getObjectDataFromResponse(t).Name,n,photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),g.saveUser(e.getObjectDataFromResponse(t).Name,n,photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),e.set_user_picture(1),e.sendUserLocation(),1):0},function(e){return 0})},e.sendUserLocation=function(){if(R.takeIfAvailable("submit-location"))if(1==_.show_location){var t={timeout:1e4,enableHighAccuracy:!0};o.getCurrentPosition(t).then(function(t){u.sendUserLocation(t.coords.latitude,t.coords.longitude,_.name,_.password,_.uid).then(function(n){return y.http_response_is_successful_ajax(n)?(c.save_last_user_position(t.coords.latitude,t.coords.longitude),e.loadPinsLayer(),R.makeAvailableAgain("submit-location"),1):(R.makeAvailableAgain("submit-location"),0)})},function(t){return R.makeAvailableAgain("submit-location"),e.loadPinsLayer(),0})}else R.makeAvailableAgain("submit-location"),e.loadPinsLayer()},e.sign_out=function(){_.erase_user_data(),g.eraseUser(),document.getElementById("spinner").style.display="none",e.set_user_picture(0),document.getElementById("user-options-menu").style.display="none"},e.show_edit_profile_modal=function(){R.takeIfAvailable("open-modal")&&(document.getElementById("spinner").style.display="block",e.newuser=new Array,e.newuser.email=_.email,e.newuser.gender=_.gender,e.newuser.username=_.name,e.newuser.interested=_.interested,e.newuser.status=_.status,e.newuser.show_location=_.show_location,e.actual_photo=_.picture_url,null!=e.actual_photo||(e.actual_photo="./img/icon-user-anonymous.png"),"url(./img/icon-user-anonymous.png)"==e.actual_photo&&(e.actual_photo="./img/icon-user-anonymous.png"),D.checkNoModalIsOpen(),S.isMobileDevice()?i.fromTemplateUrl("templates/edit_profile_with_photo.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){document.getElementById("spinner").style.display="none",document.getElementById("user-options-menu").style.display="none",D.activeModal=e,document.getElementById("foot_bar").style.display="none",D.activeModal.show(),R.makeAvailableAgain("open-modal")}):i.fromTemplateUrl("templates/edit_profile_with_photo_desktop.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){document.getElementById("spinner").style.display="none",document.getElementById("user-options-menu").style.display="none",D.activeModal=e,document.getElementById("foot_bar").style.display="none",D.activeModal.show(),R.makeAvailableAgain("open-modal")}))},e.readURL=function(t,n){if(t.files&&t.files[0]){1==n?e.newuser.picture_url=t.files[0]:2==n?e.comment.photo=t.files[0]:e.report.file=t.files[0];var o=new FileReader;o.onload=function(e){document.getElementById("myImage").src=e.target.result},o.readAsDataURL(t.files[0])}},e.close_edit_profile_modal=function(){document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.edit_profile_ok=function(){e.edit_profile()},e.getObjectDataFromResponse=function(e){return e.data?e.data:e},e.edit_profile=function(){if(R.takeIfAvailable("submit-form"))if(I.isOnline()){document.getElementById("spinner-inside-modal").style.display="block",e.newuser.password=_.password;var t=m.edit_user(e.newuser);null!=e.newuser.picture_url&&""!=e.newuser.picture_url&&S.isMobileDevice()?t.then(function(t){var n=JSON.parse(t.response);y.http_data_response_is_successful(n,"error_container")?(n=e.getObjectDataFromResponse(n),_.save_user_data(n.Name,e.newuser.password,n.Photo,n.ShowLocation,n.Uid,n.Estado,n.Gender,n.InterestedIn),g.saveUser(n.Name,e.newuser.password,n.Photo,n.ShowLocation,n.Uid,n.Estado,n.Gender,n.InterestedIn),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none",e.close_edit_profile_modal(),e.check_user_logged()):(R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none")},function(e){var t="Código: "+e.code;t=t+" Origen: "+e.source,t=t+" Destino: "+e.target,t=t+" http_status: "+e.http_status,t=t+" Body: "+e.body,t=t+" Exception: "+e.exception,y.show_error_message("error_container","Hubo un error en el envío: "+t),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none"},function(t){f(function(){e.uploadProgress=t.loaded/t.total*100,document.getElementById("sent_label").innerHTML="Enviado: "+Math.round(e.uploadProgress)+"%"})}):t.success(function(t){document.getElementById("sent_label").innerHTML="Enviado: 100%",y.http_response_is_successful(t,"error_container")?(_.save_user_data(e.getObjectDataFromResponse(t).Name,e.newuser.password,e.getObjectDataFromResponse(t).Photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),g.saveUser(e.getObjectDataFromResponse(t).Name,e.newuser.password,e.getObjectDataFromResponse(t).Photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form"),e.close_edit_profile_modal(),e.check_user_logged()):(R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none")}).error(function(e,t,n,o){y.show_error_message("error_container",t),document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form")})}else R.makeAvailableAgain("submit-form"),k.show_alert("Sin conexión a internet","Para editar su perfil debe estar conectado a internet")},e.show_login_modal=function(){R.takeIfAvailable("open-modal")&&(e.nonauth=new Array,e.nonauth.user="",e.nonauth.password="",D.checkNoModalIsOpen(),i.fromTemplateUrl("templates/log_in.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){e.hide_special_divs(),D.activeModal=t,R.makeAvailableAgain("open-modal"),document.getElementById("foot_bar").style.display="none",D.activeModal.show()}))},e.login_ok=function(){e.log_in(e.nonauth.user,e.nonauth.password)},e.close_login_modal=function(){document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.show_sign_up_modal=function(){R.takeIfAvailable("open-modal")&&(e.newuser=new Array,e.newuser.email="",e.newuser.password="",e.newuser.fullname="",e.newuser.id_doc="",e.newuser.telephone="",e.newuser.photo="",D.checkNoModalIsOpen(),S.isMobileDevice()?i.fromTemplateUrl("templates/sign_up.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){e.hide_special_divs(),D.activeModal=t,R.makeAvailableAgain("open-modal"),document.getElementById("foot_bar").style.display="none",D.activeModal.show()}):i.fromTemplateUrl("templates/sign_up_desktop.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){e.hide_special_divs(),D.activeModal=t,R.makeAvailableAgain("open-modal"),document.getElementById("foot_bar").style.display="none",D.activeModal.show()}))},e.close_sign_up_modal=function(){document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.sign_up=function(){if(R.takeIfAvailable("submit-form"))if(I.isOnline()){document.getElementById("spinner-inside-modal").style.display="block";new Array;null!=e.newuser.picture_url&&""!=e.newuser.picture_url&&S.isMobileDevice()?m.create_user(e.newuser).then(function(t){document.getElementById("sent_label").innerHTML="Enviado: 100%",y.http_data_response_is_successful(t,"error_container")?(t=e.getObjectDataFromResponse(t),_.save_user_data(t.name,t.email,e.newuser.password,t.identity_document,t.phone,t.picture_url),_.save_user_data(t.Name,e.newuser.password,t.Photo,t.ShowLocation,t.Uid,t.Estado,t.Gender,t.InterestedIn),g.saveUser(t.Name,password,t.Photo,t.ShowLocation,t.Uid,t.Estado,t.Gender,t.InterestedIn),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none",e.close_edit_profile_modal(),e.check_user_logged()):(R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none")},function(e){R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none"}):m.create_user(e.newuser).then(function(t){if(y.http_response_is_successful(t,"error_container")){_.save_user_data(e.getObjectDataFromResponse(t).Name,e.newuser.password,e.getObjectDataFromResponse(t).Photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),g.saveUser(e.getObjectDataFromResponse(t).Name,e.newuser.password,e.getObjectDataFromResponse(t).Photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none",e.close_sign_up_modal();var n=r.alert({title:"Usuario creado con éxito",template:e.getObjectDataFromResponse(t).message});n.then(function(e){}),e.check_user_logged()}else R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none"},function(e){R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none",y.show_error_message("error_container",e.statusText)})}else R.makeAvailableAgain("submit-form"),k.show_alert("Sin conexión a internet","Para iniciar registrarse debe estar conectado a internet")},e.sign_up_ok=function(){e.sign_up()},e.check_user_logged=function(){var t=_.name;if(null==t){var n=g.getUser();n.then(function(t){null!=t.name&&""!=t.name&&"undefined"!=t.name?e.log_in_background(t.name,t.password):e.set_user_picture(0)})["catch"](function(t){e.set_user_picture(0)})}else null==_.picture_url||""==_.picture_url?e.set_user_picture(0):e.set_user_picture(1);
},e.set_offline_user=function(){var t=_.name;if(null==t){var n=g.getUser();n.then(function(t){null!=t.name&&""!=t.name&&"undefined"!=t.name?_.save_user_data(t.name,t.password,t.picture_url,t.show_location):e.set_user_picture(0)})["catch"](function(t){e.set_user_picture(0)})}else null==_.picture_url||""==_.picture_url?e.set_user_picture(0):e.set_user_picture(1)},e.set_user_picture=function(t){document.getElementById("user_picture");0==t?e.user_cached_image="./img/icon-user-anonymous.png":null!=_.picture_url&&""!=_.picture_url?e.user_cached_image=_.picture_url:e.user_cached_image="./img/icon-user-anonymous.png"},e.find_me=function(){e.set_active_option("button-find-me"),e.hide_special_divs();var t={timeout:1e4,enableHighAccuracy:!0};o.getCurrentPosition(t).then(function(t){e.map.center.lat=t.coords.latitude,e.map.center.lng=t.coords.longitude,c.save_new_report_position(t.coords.latitude,t.coords.longitude),I.isOnline()?e.map.center.zoom=18:e.map.center.zoom=16,e.map.markers.now={lat:t.coords.latitude,lng:t.coords.longitude,message:"<p align='center'>Te encuentras aquí <br/> <a ng-click='new_report(1);'>Iniciar reporte en tu posición actual</a></p>",focus:!0,draggable:!1,getMessageScope:function(){return e}}},function(t){e.openCouncilSelector()})}}]),pmb_im.services.factory("AuthService",["$http","$cordovaFileTransfer","ConfigService","ValidationService",function(e,t,n,o){var a=n.baseURL+"/api/";return{log_in:function(t,n){var o="user="+t+"&password="+n;return e.post(a+"login",o,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sign_out:function(t,n){return e.get(a+"sign_out",{withCredentials:!0,params:{password_sign_in:t,email:n}})},create_user:function(n){if(n.picture_url&&o.isMobileDevice()){var i={fileKey:"photo",withCredentials:!0,params:{user:n.username,password:n.password,email:n.email,gender:n.gender,interested:n.interested,status:n.status,show_location:n.show_location}},r=!0;return t.upload(a+"create_user",n.picture_url,i,r)}if(n.picture_url){var s=new FormData;return s.append("photo",n.picture_url),s.append("user",n.username),s.append("password",n.password),s.append("email",n.email),s.append("gender",n.gender),s.append("interested",n.interested),s.append("status",n.status),s.append("show_location",n.show_location),e.post(a+"create_user",s,{headers:{"Content-Type":void 0},transformRequest:angular.identity})}var l="user="+n.username+"&password="+n.password+"&email="+n.email+"&gender="+n.gender;return l=l+"&interested="+n.interested+"&status="+n.status+"&show_location="+n.show_location,e.post(a+"create_user",l,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},password_recovery:function(t){return e.get(a+"forgot_password",{params:{login_email:t}})},password_change:function(t,n,o,i){var r="email="+t+"&password_sign_in="+n+"&new_password="+o+"&confirm="+i;return e.post(a+"change_password",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},edit_user:function(n){if(n.picture_url&&o.isMobileDevice()){var i={fileKey:"photo",withCredentials:!0,params:{user:n.username,password:n.password,email:n.email,gender:n.gender,interested:n.interested,status:n.status,show_location:n.show_location}},r=!0;return t.upload(a+"edit_profile",n.picture_url,i,r)}var s="user="+n.username+"&password="+n.password+"&email="+n.email+"&gender="+n.gender;if(s=s+"&interested="+n.interested+"&status="+n.status+"&show_location="+n.show_location,n.picture_url){var l=new FormData;return l.append("photo",n.picture_url),l.append("user",n.username),l.append("password",n.password),l.append("email",n.email),l.append("gender",n.gender),l.append("interested",n.interested),l.append("status",n.status),l.append("show_location",n.show_location),e.post(a+"edit_profile",l,{headers:{"Content-Type":void 0},transformRequest:angular.identity})}return e.post(a+"edit_profile",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),pmb_im.services.factory("ConfigService",["$http",function(e){var t={};return t.baseURL="https://backend.e-openbar.com",ionic.Platform.isWebView()?t.baseURL="https://backend.e-openbar.com":t.baseURL="/backend",t.AppName="e-openbar",t.baseCobrand="/cobrands/pormibarrio",t}]),pmb_im.services.factory("ConnectivityService",["$cordovaNetwork",function(e){return{isOnline:function(){return!0},isOffline:function(){return!1}}}]),pmb_im.services.factory("DBService",["$q",function(e){function t(e,t,o,a,i,r,s,l){var c={_id:"user-logged",name:e,password:t,picture_url:o,show_location:a,uid:i,status:r,gender:s,interested:l};n().then(function(e){return c._rev=e._rev,m.put(c)})["catch"](function(e){return m.put(c)})}function n(){return m.get("user-logged")}function o(){m.get("user-logged").then(function(e){return m.remove(e)})}function a(){return m=new PouchDB("tomamosuna_local_db")}function i(e){var t=new Date,n="report_"+t.getFullYear()+(t.getMonth()+1)+t.getDate()+t.getMilliseconds();return e._id=n,m.put(e)}function r(e){return m.put(e)}function s(){return m.get("categories-list")}function l(e){s().then(function(t){return e._rev=t._rev,m.put(e)})["catch"](function(t){return e._id="categories-list",m.put(e)})}function c(e){return m.get(e)}function u(){return m.allDocs({include_docs:!0,attachments:!1,startkey:"report_",endkey:"report_￿"})}function d(e){m.get(e).then(function(e){return m.remove(e)})}function p(e){return m.remove(e)}var m;return{initDB:a,saveUser:t,getUser:n,eraseUser:o,saveReport:i,getReport:c,getAllReports:u,updateReport:r,deleteReport:d,deleteGivenReport:p,getCategories:s,saveCategories:l}}]),pmb_im.services.factory("DrinkService",["$http","ConfigService",function(e,t){var n=t.baseURL+"/api/";return{getAllDrinksAvailable:function(t,o){var a="user="+t+"&password="+o+"&hash_id="+Math.random();return e.post(n+"get_possible_drinks",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getAllInvitationsWithUser:function(t,o,a,i){var r="user="+t+"&password="+o+"&hash_id="+Math.random();return r=r+"&uid="+a+"&author_uid="+i,e.post(n+"get_invitations_between_users",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sendDrinkInvitationToUser:function(t,o,a,i,r){var s="user="+i+"&password="+r+"&drink_nid="+t+"&destination_uid="+o+"&author_uid="+a+"&hash_id="+Math.random();return e.post(n+"send_drink_invitation",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sendDrinkInvitationResponse:function(t,o,a,i,r){var s="response="+t+"&user="+o+"&password="+a+"&invitation_nid="+i+"&destination_uid="+r+"&hash_id="+Math.random();return e.post(n+"invitation_response",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),pmb_im.services.factory("ErrorService",["$http","$ionicPopup","ValidationService",function(e,t,n){return{http_response_is_successful:function(e,t){var n=document.getElementById(t);return e.data&&"success"==e.data.Status||"success"==e.Status?(n.style.display="none",!0):(e.data?n.innerHTML="<h3>"+e.data.Message+"</h3>":n.innerHTML="<h3>"+e.Message+"</h3>",n.style.display="block",!1)},http_response_is_successful_ajax:function(e){return 0!=e.data.result},http_response_is_successful_popup:function(e){if(0==e.data.result){var n=t.alert({title:"Error",template:e.data.message});return n.then(function(e){return!1}),!1}return!0},http_data_response_is_successful:function(e,t){var n=document.getElementById(t);return"success"!=e.Status?(n.innerHTML="<h3>"+e.Message+"</h3>",n.style.display="block",!1):(n.style.display="none",!0)},http_data_response_is_successful_ajax:function(e){return 0!=e.result},show_error_message:function(e,t){var n=document.getElementById(e);return n.innerHTML="<h3>"+t+"</h3>",n.style.display="block",!1},show_error_message_popup:function(e){var n=t.alert({title:"Error",template:e});return n.then(function(e){return!1}),!1},check_fields:function(e,t){var o="";if(e.forEach(function(e){"notNull"==e.type&&(n.validate_not_empty(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no puede estar vacío.</h3>')),"email"==e.type&&(n.validate_email(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no es una dirección de correo válida.</h3>')),"iddoc_uy"==e.type&&(n.validate_iddoc_uy(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no es una cédula uruguaya válida.</h3>')),"two_words"==e.type&&(n.validate_two_words(e.value)||(o=o+'<h3>- El campo "'+e.name+'" debe contener al menos dos palabras.</h3>')),"equalsTo"==e.type&&(n.validate_equalsTo(e.value,e.secondValue)||(o=o+'<h3>- Los campos "'+e.name+'" no coinciden.</h3>'))}),""==o)return!0;var a=document.getElementById(t);return a.innerHTML=o,a.style.display="block",!1}}}]),pmb_im.services.factory("Loader",["$ionicLoading","$timeout","$ionicPopup",function(e,t,n){var o={showLoading:function(t){t=t||"Loading...",e.show({template:t})},hideLoading:function(){e.hide()},toggleLoadingWithMessage:function(e,n){var o=this;o.showLoading(e),t(function(){o.hideLoading()},n||3e3)},confirmPopup:function(e,t){var o=n.confirm({title:e,template:t});return o},showAlert:function(e,t){var o=n.alert({title:e,template:t});return o}};return o}]),pmb_im.services.factory("LocationsService",[function(){var e={};return e.initial_lat="",e.initial_lng="",e.last_user_lat="",e.last_user_lng="",e.council_modal=null,e.selected_council=null,e.selectCouncil=function(t){e.selected_council=t},e.save_initial_position=function(t){e.initial_lat=t.coords.latitude,e.initial_lng=t.coords.longitude},e.save_last_user_position=function(t,n){e.last_user_lat=t,e.last_user_lng=n},e.savedLocations=[],e}]),pmb_im.services.factory("MapService",["leafletData","$compile",function(e,t){proj4.defs("EPSG:32721","+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs");var n={};return n.goToPlace=function(n,o,a,i){var r={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::32721"}},features:[{type:"Feature",geometry:{type:"Point",coordinates:[o,a]},properties:{nombre:n}}]};e.getMap().then(function(e){var n,o=L.Proj.geoJson(r,{pointToLayer:function(e,o){n=o;var a="<p align='center'>"+e.properties.nombre+" <br/> <a ng-click='new_report_from_latlon("+n.lat+","+n.lng+");'>Iniciar reporte aquí</a></p>",r=t(a)(i);return L.marker(o).bindPopup(r[0])}});o.addTo(e),e.setView(n,18),o.openPopup()})},n.centerMapOnCoords=function(t,n,o){e.getMap().then(function(e){e.setView(new L.LatLng(t,n),o)})},n}]),pmb_im.services.factory("MessageService",["$http","leafletData","ConfigService",function(e,t,n){function o(e){angular.extend(this,e)}var a=(n.baseURL+"/sites/tomamos_una/files/json/online_users_geo.json",n.baseURL+"/api/");return o.getAllMessagesToUser=function(t,n,o,i){var r="user="+t+"&password="+n+"&author_uid="+i+"&uid="+o+"&hash_id="+Math.random();return e.post(a+"get_all_messages_to_user",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.getUserInfo=function(t){return e.get(a+"get_user_info",{cache:!1,params:{uid:t,hash_id:Math.random()}})},o.sendTextMessageToUser=function(t,n,o,i,r){var s="user="+i+"&password="+r+"&text="+t+"&destination_uid="+n+"&author_uid="+o;return e.post(a+"send_text_message",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.checkWhoCanTalk=function(t,n){var o="user="+t+"&password="+n;return e.post(a+"check_user_talk",o,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.canTalkToUsers=new Array,o.current={},o.build=function(e){return new o(e)},o}]),pmb_im.services.factory("ModalService",[function(){var e={};return e.activeModal=null,e.checkNoModalIsOpen=function(){e.activeModal&&(e.activeModal.hide(),e.activeModal.remove())},e}]),pmb_im.services.factory("NotificationService",["$http","ConfigService",function(e,t){var n=t.baseURL+"/api/";return{getUnrecivedNotifications:function(t,o){var a="user="+t+"&password="+o+"&hash_id="+Math.random();return e.post(n+"get_unrecived_notifications",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},dontShowNotificationAgain:function(t,o,a){var i="user="+t+"&password="+o+"&nid="+a+"&hash_id="+Math.random();return e.post(n+"dont_show_notification_again",i,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),pmb_im.services.factory("PinService",["$http","leafletData","ConfigService",function(e,t,n){function o(e){angular.extend(this,e)}var a=n.baseURL+"/sites/tomamos_una/files/json/users_geo.json",i=n.baseURL+"/api/";return o.getAll=function(){return e.get(a,{cache:!1,params:{hash_id:Math.random()}})},o.sendUserLocation=function(t,n,o,a,r){var s="user="+o+"&password="+a+"&lat="+t+"&lon="+n+"&uid="+r;return e.post(i+"send_user_position",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o._all=[],o.current={},o.lastPinsResponse=null,o.build=function(e){return new o(e)},o.prototype.setLatLng=function(e){this.lat=e.lat,this.lon=e.lng},o}]),pmb_im.services.factory("PopUpService",["$ionicPopup","ValidationService",function(e,t){return{show_alert:function(t,n){var o=e.alert({title:t,template:n});return o.then(function(e){return!0}),!0},confirmPopup:function(t,n){var o=e.confirm({title:t,template:n});return o},askForOneValuePopUp:function(n,o,a,i,r){$scope=n;var s=e.show({template:i+': <input type="text" id="one_value_popup"><div id="error_container_inside"></div>',title:o,subTitle:a,scope:$scope,buttons:[{text:"Cancelar"},{text:"<b>Enviar</b>",type:"button-positive",onTap:function(e){var n="",o=document.getElementById("one_value_popup").value;if("notNull"==r&&(t.validate_not_empty(o)||(n=n+'<h3>- El campo "'+i+'" no puede estar vacío.</h3>')),"email"==r&&(t.validate_email(o)||(n=n+'<h3>- El campo "'+i+'" no es una dirección de correo válida.</h3>')),"iddoc_uy"==r&&(t.validate_iddoc_uy(o)||(n=n+'<h3>- El campo "'+i+'" no es una cédula uruguaya válida.</h3>')),"two_words"==r&&(t.validate_two_words(o)||(n=n+'<h3>- El campo "'+i+'" debe contener al menos dos palabras.</h3>')),""==n)return o;var a=document.getElementById("error_container_inside");a.innerHTML=n,a.style.display="block",e.preventDefault()}}]});return s}}}]),pmb_im.services.factory("SemaphoreService",[function(){var e={};return e.semaphores=new Array,e.semaphores["open-modal"]="available",e.semaphores["submit-form"]="available",e.semaphores["submit-location"]="available",e.semaphores.can_talk="available",e.takeIfAvailable=function(t){return"available"==e.semaphores[t]&&(e.semaphores[t]="occupied",!0)},e.makeAvailableAgain=function(t){return"occupied"==e.semaphores[t]&&(e.semaphores[t]="available",!0)},e}]),pmb_im.services.factory("locationAPI",["$http","$q","ApiImEndpoint","ApiDataEndpoint","ConfigService","LocationsService",function(e,t,n,o,a,i){var r="ubicacionesRestProd",s={};return s.searchLocationByStr=function(t){var n=a.baseURL+"/ajax/geocode?term="+i.selected_council+","+t;return e.get(n,{method:"GET",params:{}})},s.searchEsquinaByStr=function(t){var n=a.baseURL+"/ajax/geocode?term="+i.selected_council+","+t.calle+","+t.esquina;return e.get(n,{method:"GET",params:{}})},s.getLocationGeom=function(t){for(var o=n.url+"/"+r+s.getParamPathByTipo(t.tipo),a=0;a<t.pathParams.length;a++)o+="/"+t.pathParams[a];return e.get(baseURL).then(function(e){return e.data})},s.getLocationGeomPMB=function(t,n,o){var r=a.baseURL+"/ajax/geocode?term="+i.selected_council+","+t+","+n+","+o;return e.get(r)},s.getParamPathByTipo=function(e){var t={ESQUINA:"/esquina",DIRECCION:"/direccion"};return t[e]},s}]),pmb_im.services.factory("_",[function(){return window._}]),pmb_im.services.factory("UserService",["$http",function(e){var t={};return t.uid=null,t.name=null,t.email=null,t.password=null,t.picture_url="url(./img/icon-user-anonymous.png)",t.show_location=null,t.save_user_data=function(e,n,o,a,i,r,s,l){t.uid=i,t.name=e,t.password=n,t.picture_url=o,t.show_location=a,t.status=r,t.gender=s,t.interested=l},t.erase_user_data=function(){t.name=null,t.email=null,t.password=null,t.identity_document=null,t.phone=null,t.picture_url=null},t.get_user_data=function(){},t.add_photo=function(e){t.picture_url=e},t.isLogged=function(){return null!=t.name&&""!=t.name},t}]),pmb_im.services.factory("ValidationService",["$http","$ionicPopup",function(e,t){return{isMobileDevice:function(){return!!window.cordova},validate_not_empty:function(e){return null!=e&&"undefined"!=e&&""!=e},validate_two_words:function(e){if(null!=e&&"undefined"!=e&&""!=e){var t=e.split(" ").filter(function(e){return""!==e});return t.length>1}return!1},validate_equalsTo:function(e,t){return e==t},validate_email:function(e){if(null!=e&&"undefined"!=e&&""!=e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}return!1},validate_iddoc_uy:function(e){if(null!=e&&"undefined"!=e&&""!=e){e=e.replace(/\D/g,"");var t=e[e.length-1],n=0,o=0;if(e.length<=6)for(o=e.length;o<7;o++)e="0"+e;for(o=0;o<7;o++)n+=parseInt("2987634"[o])*parseInt(e[o])%10;var a;return a=n%10===0?0:10-n%10,t==a}return!1}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL2Ficy5jdHJsLmpzIiwiY29udHJvbGxlcnMvaW50cm8uY3RybC5qcyIsImNvbnRyb2xsZXJzL21hcC5jdHJsLmpzIiwic2VydmljZXMvYXV0aC5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2NvbmZpZy5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2Nvbm5lY3Rpdml0eS5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2RiLnNlcnZpY2VzLmpzIiwic2VydmljZXMvZHJpbmsuc2VydmljZXMuanMiLCJzZXJ2aWNlcy9lcnJvci5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2xvYWRlci5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2xvY2F0aW9uc1NlcnZpY2UuanMiLCJzZXJ2aWNlcy9tYXAuc2VydmljZXMuanMiLCJzZXJ2aWNlcy9tZXNzYWdlLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy9tb2RhbFNlcnZpY2UuanMiLCJzZXJ2aWNlcy9ub3RpZmljYXRpb24uc2VydmljZXMuanMiLCJzZXJ2aWNlcy9waW4uc2VydmljZS5qcyIsInNlcnZpY2VzL3BvcHVwLnNlcnZpY2VzLmpzIiwic2VydmljZXMvc2VtYXBob3JlLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy91YmljYWNpb25lcy5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL3VuZGVyc2NvcmUuc2VydmljZS5qcyIsInNlcnZpY2VzL3VzZXIuc2VydmljZXMuanMiLCJzZXJ2aWNlcy92YWxpZGF0aW9uLnNlcnZpY2VzLmpzIl0sIm5hbWVzIjpbInBtYl9pbSIsImNvbnRyb2xsZXJzIiwiYW5ndWxhciIsIm1vZHVsZSIsInNlcnZpY2VzIiwiYXBwIiwiY29uc3RhbnQiLCJ1cmwiLCJydW4iLCIkaW9uaWNQbGF0Zm9ybSIsIiRyb290U2NvcGUiLCIkY29yZG92YUtleWJvYXJkIiwiVkVSU0lPTiIsIndpbmRvdyIsInJlYWR5IiwiY29yZG92YSIsInBsdWdpbnMiLCJLZXlib2FyZCIsImhpZGVLZXlib2FyZEFjY2Vzc29yeUJhciIsImRpc2FibGVTY3JvbGwiLCJpb25pYyIsIlBsYXRmb3JtIiwiaXNGdWxsU2NyZWVuIiwiU3RhdHVzQmFyIiwic3R5bGVEZWZhdWx0IiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkY29tcGlsZVByb3ZpZGVyIiwiJGlvbmljQ29uZmlnUHJvdmlkZXIiLCJkZWJ1Z0luZm9FbmFibGVkIiwic3RhdGUiLCJjYWNoZSIsImFic3RyYWN0IiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwidmlld3MiLCJtZW51Q29udGVudCIsIm90aGVyd2lzZSIsIiRzY29wZSIsIiRzdGF0ZSIsIiRjb3Jkb3ZhR2VvbG9jYXRpb24iLCIkc3RhdGVQYXJhbXMiLCIkaW9uaWNQb3B1cCIsIkxvY2F0aW9uc1NlcnZpY2UiLCJEQlNlcnZpY2UiLCJkYiIsImluaXREQiIsImluZm8iLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsImJpbmQiLCJnZW9sb2NhdGUiLCJwb3NPcHRpb25zIiwidGltZW91dCIsImVuYWJsZUhpZ2hBY2N1cmFjeSIsImdldEN1cnJlbnRQb3NpdGlvbiIsInBvc2l0aW9uIiwic2F2ZV9pbml0aWFsX3Bvc2l0aW9uIiwiZ28iLCJlcnIiLCIkb24iLCJjb3VuY2lsX21vZGFsIiwiaGlkZSIsInJlbW92ZSIsIl8iLCIkY29yZG92YUNhbWVyYSIsIiRjb21waWxlIiwiJGlvbmljTW9kYWwiLCJsZWFmbGV0RGF0YSIsIkNvbmZpZ1NlcnZpY2UiLCJQaW5TZXJ2aWNlIiwiTWVzc2FnZVNlcnZpY2UiLCJEcmlua1NlcnZpY2UiLCJBdXRoU2VydmljZSIsIlVzZXJTZXJ2aWNlIiwiJHRpbWVvdXQiLCIkaW50ZXJ2YWwiLCIkbG9jYXRpb24iLCJFcnJvclNlcnZpY2UiLCIkaW9uaWNTbGlkZUJveERlbGVnYXRlIiwiJGlvbmljU2Nyb2xsRGVsZWdhdGUiLCJQb3BVcFNlcnZpY2UiLCJDb25uZWN0aXZpdHlTZXJ2aWNlIiwiJGNvcmRvdmFJbkFwcEJyb3dzZXIiLCJNYXBTZXJ2aWNlIiwiTW9kYWxTZXJ2aWNlIiwiU2VtYXBob3JlU2VydmljZSIsIlZhbGlkYXRpb25TZXJ2aWNlIiwiTm90aWZpY2F0aW9uU2VydmljZSIsIm9ubGluZV91c2VyX2dlbyIsIm9ubGluZV91c2VyX2dlb19hcnJheSIsIkFycmF5IiwiYmFzZVVSTCIsIkFwcE5hbWUiLCJ1c2VyX2NhY2hlZF9pbWFnZSIsIm9uZV92YWx1ZV9wb3B1cCIsIm15SW50ZXJ2YWxzIiwiY2hlY2tOb01vZGFsSXNPcGVuIiwiaXNPbmxpbmUiLCJjaGVja191c2VyX2xvZ2dlZCIsInNldF9vZmZsaW5lX3VzZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJkaXNwbGF5IiwiY3JlYXRlX29ubGluZV9tYXAiLCJzZW5kVXNlckxvY2F0aW9uIiwiZ2V0TWFwIiwiaW5pdGlhbF9sYXQiLCJjZW50ZXJNYXBPbkNvb3JkcyIsImluaXRpYWxfbG5nIiwiY2hlY2tOb3RpZmljYXRpb25zIiwiY2FuY2VsIiwibm90aWZpY2F0aW9ucyIsInVpZCIsImdldFVucmVjaXZlZE5vdGlmaWNhdGlvbnMiLCJuYW1lIiwicGFzc3dvcmQiLCJyZXNwIiwiZGF0YSIsImdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UiLCJTdGF0dXMiLCJOb3RpZmljYXRpb25zIiwib3Blbk5vdGlmaWNhdGlvbiIsIm5vdGlmaWNhdGlvbiIsImRvbnRTaG93Tm90aWZpY2F0aW9uQWdhaW4iLCJuaWQiLCJ0aXBvIiwic2VuZF9tZXNzYWdlX3RvIiwib3Blbkludml0YXRpb25zTW9kYWwiLCJjbG9zZU5vdGlmaWNhdGlvbiIsIm9wZW5XZWJzaXRlIiwib3B0aW9ucyIsImxvY2F0aW9uIiwiY2xlYXJjYWNoZSIsInRvb2xiYXIiLCJvcGVuIiwiZXZlbnQiLCJtYXAiLCJkZWZhdWx0cyIsInRpbGVMYXllciIsIm1pblpvb20iLCJtYXhab29tIiwiem9vbUNvbnRyb2xQb3NpdGlvbiIsIm1hcmtlcnMiLCJldmVudHMiLCJlbmFibGUiLCJsb2dpYyIsImNlbnRlciIsImxvYWRQaW5zTGF5ZXIiLCJsYXQiLCJsbmciLCJ6b29tIiwib24iLCJoaWRlT2ZmU2NyZWVuUGlucyIsIm5leHQiLCJwcmV2aW91cyIsImJhY2tfdG9fbWFwIiwiaW1hZ2UiLCJhZGRJbWFnZSIsImlzRnJvbUFsYnVtIiwiaXNVc2VyUGhvdG8iLCJpc0NvbW1lbnRQaG90byIsImlzTmV3VXNlclBob3RvIiwic291cmNlIiwiQ2FtZXJhIiwiUGljdHVyZVNvdXJjZVR5cGUiLCJDQU1FUkEiLCJmaXhfb3JpZW50YXRpb24iLCJzYXZlX3RvX2dhbGxlcnkiLCJQSE9UT0xJQlJBUlkiLCJxdWFsaXR5IiwiZGVzdGluYXRpb25UeXBlIiwiRGVzdGluYXRpb25UeXBlIiwiRklMRV9VUkkiLCJzb3VyY2VUeXBlIiwiYWxsb3dFZGl0IiwiY29ycmVjdE9yaWVudGF0aW9uIiwiZW5jb2RpbmdUeXBlIiwiRW5jb2RpbmdUeXBlIiwiSlBFRyIsInBvcG92ZXJPcHRpb25zIiwiQ2FtZXJhUG9wb3Zlck9wdGlvbnMiLCJzYXZlVG9QaG90b0FsYnVtIiwidGFyZ2V0V2lkdGgiLCJ0YXJnZXRIZWlnaHQiLCJnZXRQaWN0dXJlIiwiaW1hZ2VEYXRhIiwib25JbWFnZVN1Y2Nlc3MiLCJmaWxlVVJJIiwiRmlsZVBhdGgiLCJyZXNvbHZlTmF0aXZlUGF0aCIsInJlc3VsdCIsInN0YXJ0c1dpdGgiLCJwcm9maWxlIiwicGljdHVyZV91cmwiLCJjb21tZW50IiwiZmlsZSIsIm5ld3VzZXIiLCJpbWdVUkkiLCJlcnJvciIsImFsZXJ0IiwidXJsRm9ySW1hZ2UiLCJpbWFnZVVSTCIsInN1YnN0ciIsImxhc3RJbmRleE9mIiwiZGF0YURpcmVjdG9yeSIsInNjcm9sbE1lIiwiYW5jaG9yX2lkIiwiaGFzaCIsImhhbmRsZSIsIiRnZXRCeUhhbmRsZSIsImFuY2hvclNjcm9sbCIsInNldF9hY3RpdmVfb3B0aW9uIiwiYnV0dG9uaWQiLCJjbGFzc05hbWUiLCJoaWRlX3NwZWNpYWxfZGl2cyIsImNsb3NlX3JlcG9ydF9kZXRhaWxfbW9kYWwiLCJyZXBvcnRfZGV0YWlsX2lkIiwibG9jYXRlIiwiY29vcmRzIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJub3ciLCJtZXNzYWdlIiwiZm9jdXMiLCJkcmFnZ2FibGUiLCJhZGRNYXBDb250cm9scyIsImNoYW5nZVVzZXJMb2NhdGlvblBpbiIsImxvbiIsImxheWVyIiwibmV3TGF0TG5nIiwiTCIsIkxhdExuZyIsInNldExhdExuZyIsIm1hcEJvdW5kcyIsImdldEJvdW5kcyIsInVzZXJzVmlzaWJsZSIsImZvckVhY2giLCJrZXkiLCJzaG91bGRCZVZpc2libGUiLCJjb250YWlucyIsImdldExhdExuZyIsImFkZExheWVyIiwicHVzaCIsImZlYXR1cmUiLCJyZW1vdmVMYXllciIsInJlbW92ZUFsbFBpbnMiLCJnZXRBbGwiLCJyZXNwb25zZSIsImxhc3RQaW5zUmVzcG9uc2UiLCJyZXBvcnRzQnlTdGF0ZSIsInBpbnNBcnJheSIsImZlYXR1cmVzIiwib25saW5lX3VzZXJzX2dlbyIsInByb3BlcnRpZXMiLCJnZW9tZXRyeSIsImNvb3JkaW5hdGVzIiwib25saW5lU3RhdHVzIiwiT25saW5lX3N0YXR1cyIsImljb24iLCJJY29uIiwiaWNvbl9zaGFkb3ciLCJtYXJrZXJJY29uIiwic2hhZG93VXJsIiwic2hhZG93U2l6ZSIsInNoYWRvd0FuY2hvciIsImljb25VcmwiLCJpY29uU2l6ZSIsImljb25BbmNob3IiLCJwb3B1cEFuY2hvciIsIm1hcmtlciIsIlVpZCIsIk5hbWUiLCJpbnRlcmVzdGVkIiwiSW50ZXJlc3RlZEluIiwic3RhdHVzIiwiZ2VuZGVyIiwiR2VuZGVyIiwibGFzdFVwZGF0ZSIsInRpbWVDb252ZXJ0ZXIiLCJMb2NhdGlvblRpbWVTdGFtcCIsImh0bWwiLCJjb21waWxlZCIsImJpbmRQb3B1cCIsImNoZWNrVGFsa1N0YXR1cyIsInRha2VJZkF2YWlsYWJsZSIsImNoZWNrV2hvQ2FuVGFsayIsImNhblRhbGtUb1VzZXJzIiwibWFrZUF2YWlsYWJsZUFnYWluIiwia2V5X3ByZXNzIiwic3RhZ2UiLCJrZXlDb2RlIiwiY2xvc2UiLCJjYW5UYWxrVG9Vc2VyIiwiY2hhdCIsIm90aGVyX3VzZXIiLCJtZXNzYWdlcyIsIm5ld190ZXh0X21lc3NhZ2UiLCJnZXRVc2VySW5mbyIsIlBob3RvIiwidXNlcm5hbWUiLCJhdXRob3JfdWlkIiwiZ2V0QWxsTWVzc2FnZXNUb1VzZXIiLCJyZXNwMiIsInJlc3AzIiwiZGF0YTIiLCJtbmlkIiwibGVuZ3RoIiwiZnJvbVRlbXBsYXRlVXJsIiwic2NvcGUiLCJoYXJkd2FyZUJhY2tCdXR0b25DbG9zZSIsImFuaW1hdGlvbiIsIm1vZGFsIiwiYWN0aXZlTW9kYWwiLCJzaG93IiwiYWxlcnRQb3B1cCIsInRpdGxlIiwidGVtcGxhdGUiLCJyZXMiLCJjaGVja0lmQ2FuUmVwbHlJbnZpdGF0aW9uIiwiaW52aXRhdGlvbiIsImNoZWNrSWZXYWl0aW5nUmVwbHlGcm9tSW52aXRhdGlvbiIsImdldERyaW5rQ29zdEJ5TmlkIiwiYXZhaWxhYmxlX2RyaW5rcyIsImRyaW5rIiwiTmlkIiwiQ3JlZGl0cyIsImFjY2VwdEludml0YXRpb24iLCJzZW5kX2ludml0YXRpb25fcmVzcG9uc2UiLCJ0YWxrIiwicmVmdXNlSW52aXRhdGlvbiIsImlubmVySFRNTCIsInNlbGVjdGVkX2RyaW5rIiwidXNlcl9jcmVkaXRzIiwic2VuZERyaW5rSW52aXRhdGlvblJlc3BvbnNlIiwiTWVzc2FnZSIsInNlbmRfaW52aXRhdGlvbiIsImNvc3QiLCJjcmVkaXRzIiwicGFyc2VGbG9hdCIsInNlbmREcmlua0ludml0YXRpb25Ub1VzZXIiLCJOZXdDcmVkaXRzIiwiaW52aXRhdGlvbnMiLCJkYXRhX3Jlc3AiLCJnZXRBbGxEcmlua3NBdmFpbGFibGUiLCJEcmlua3MiLCJVc2VyQ3JlZGl0cyIsImdldEFsbEludml0YXRpb25zV2l0aFVzZXIiLCJkYXRhMyIsImNsb3NlX21lc3NhZ2VfbW9kYWwiLCJjbG9zZV9pbnZpdGF0aW9uX21vZGFsIiwic2VuZF9tZXNzYWdlX29rIiwic2VuZFRleHRNZXNzYWdlVG9Vc2VyIiwiZ2V0TmFtZUZyb21VaWQiLCJnZXROYW1lRnJvbVVpZEludml0YXRpb24iLCJVTklYX3RpbWVzdGFtcCIsImEiLCJEYXRlIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJnZXRNb250aCIsImRheSIsImdldERhdGUiLCJob3VyIiwiZ2V0SG91cnMiLCJtaW4iLCJnZXRNaW51dGVzIiwidGltZSIsImdldFNlY29uZHMiLCJtb2RlbCIsImV4dGVybmFsTW9kZWwiLCJzZWxlY3RlZEl0ZW1zIiwicHJlc2VsZWN0ZWRTZWFyY2hJdGVtcyIsImNsaWNrZWRWYWx1ZU1vZGVsIiwicmVtb3ZlZFZhbHVlTW9kZWwiLCJpdGVtc1JlbW92ZWQiLCJjYWxsYmFjayIsInVzZXJfb3B0aW9ucyIsIm1lbnUiLCJzaG93X2Fub255bW91c19tZW51Iiwic2hvd191c2VyX21lbnUiLCJoZWlnaHQiLCJ3aWR0aCIsImNyZWF0ZV9maWVsZF9hcnJheSIsInR5cGUiLCJ2YWx1ZSIsImZpZWxkIiwiY3JlYXRlX2ZpZWxkX2FycmF5X3dpdGhfdHdvRmllbGRzIiwic2Vjb25kVmFsdWUiLCJmaXhfZmJfaW1hZ2VfbGluayIsImluZGV4T2YiLCJwYXJ0cyIsInNwbGl0IiwibmV3VXJsIiwibG9nX2luIiwidXNlciIsImZpZWxkcyIsImNoZWNrX2ZpZWxkcyIsImh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bCIsInBob3RvIiwic2F2ZV91c2VyX2RhdGEiLCJub25hdXRoIiwiU2hvd0xvY2F0aW9uIiwiRXN0YWRvIiwic2F2ZVVzZXIiLCJzZXRfdXNlcl9waWN0dXJlIiwiY2xvc2VfbG9naW5fbW9kYWwiLCJzaG93X2Vycm9yX21lc3NhZ2UiLCJzdGF0dXNUZXh0Iiwic2hvd19hbGVydCIsImxvZ19pbl9iYWNrZ3JvdW5kIiwiaHR0cF9yZXNwb25zZV9pc19zdWNjZXNzZnVsX2FqYXgiLCJzaG93X2xvY2F0aW9uIiwic2F2ZV9sYXN0X3VzZXJfcG9zaXRpb24iLCJzaWduX291dCIsImVyYXNlX3VzZXJfZGF0YSIsImVyYXNlVXNlciIsInNob3dfZWRpdF9wcm9maWxlX21vZGFsIiwiZW1haWwiLCJhY3R1YWxfcGhvdG8iLCJpc01vYmlsZURldmljZSIsInJlYWRVUkwiLCJpbnB1dCIsImZpbGVzIiwicmVwb3J0IiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsImUiLCJzcmMiLCJ0YXJnZXQiLCJyZWFkQXNEYXRhVVJMIiwiY2xvc2VfZWRpdF9wcm9maWxlX21vZGFsIiwiZWRpdF9wcm9maWxlX29rIiwiZWRpdF9wcm9maWxlIiwiZWRpdF9yZXF1ZXN0IiwiZWRpdF91c2VyIiwiSlNPTiIsInBhcnNlIiwiaHR0cF9kYXRhX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWwiLCJjb2RlIiwiaHR0cF9zdGF0dXMiLCJib2R5IiwiZXhjZXB0aW9uIiwicHJvZ3Jlc3MiLCJ1cGxvYWRQcm9ncmVzcyIsImxvYWRlZCIsInRvdGFsIiwiTWF0aCIsInJvdW5kIiwic3VjY2VzcyIsImhlYWRlcnMiLCJzaG93X2xvZ2luX21vZGFsIiwibG9naW5fb2siLCJzaG93X3NpZ25fdXBfbW9kYWwiLCJmdWxsbmFtZSIsImlkX2RvYyIsInRlbGVwaG9uZSIsImNsb3NlX3NpZ25fdXBfbW9kYWwiLCJzaWduX3VwIiwiY3JlYXRlX3VzZXIiLCJpZGVudGl0eV9kb2N1bWVudCIsInBob25lIiwic2lnbl91cF9vayIsImdldFVzZXIiLCJkb2MiLCJoYXNQaG90byIsImZpbmRfbWUiLCJzYXZlX25ld19yZXBvcnRfcG9zaXRpb24iLCJnZXRNZXNzYWdlU2NvcGUiLCJvcGVuQ291bmNpbFNlbGVjdG9yIiwiZmFjdG9yeSIsIiRodHRwIiwiJGNvcmRvdmFGaWxlVHJhbnNmZXIiLCJwb3N0Iiwid2l0aENyZWRlbnRpYWxzIiwiQ29udGVudC1UeXBlIiwiZ2V0IiwicGFyYW1zIiwicGFzc3dvcmRfc2lnbl9pbiIsInVzZXJPYmoiLCJmaWxlS2V5IiwidHJ1c3RBbGxIb3N0cyIsInVwbG9hZCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJ1bmRlZmluZWQiLCJ0cmFuc2Zvcm1SZXF1ZXN0IiwiaWRlbnRpdHkiLCJwYXNzd29yZF9yZWNvdmVyeSIsImxvZ2luX2VtYWlsIiwicGFzc3dvcmRfY2hhbmdlIiwib2xkUGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsImNvbmZpcm1QYXNzd29yZCIsIkNvbmZpZ09iaiIsImlzV2ViVmlldyIsImJhc2VDb2JyYW5kIiwiJGNvcmRvdmFOZXR3b3JrIiwiaXNPZmZsaW5lIiwiJHEiLCJ1c2VyX25hbWUiLCJ1c2VyX3Bhc3N3b3JkIiwidXNlcl9waWN0dXJlX3VybCIsIl9pZCIsIl9yZXYiLCJfZGIiLCJwdXQiLCJQb3VjaERCIiwic2F2ZVJlcG9ydCIsImRhdGUiLCJuZXdfcmVwb3J0X2lkIiwiZ2V0TWlsbGlzZWNvbmRzIiwidXBkYXRlUmVwb3J0IiwiZ2V0Q2F0ZWdvcmllcyIsInNhdmVDYXRlZ29yaWVzIiwiY2F0ZWdvcmllcyIsImdldFJlcG9ydCIsInJlcG9ydElkIiwiZ2V0QWxsUmVwb3J0cyIsImFsbERvY3MiLCJpbmNsdWRlX2RvY3MiLCJhdHRhY2htZW50cyIsInN0YXJ0a2V5IiwiZW5ka2V5IiwiZGVsZXRlUmVwb3J0IiwicmVwb3J0X2lkIiwiZGVsZXRlR2l2ZW5SZXBvcnQiLCJyYW5kb20iLCJkZXN0aW5hdGlvbl91aWQiLCJkcmlua19uaWQiLCJpbnZpdGF0aW9uX25pZCIsImpzb25SZXN1bHQiLCJlcnJvckNvbnRhaW5lcklkIiwiZXJyb3JEaXYiLCJodHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfcG9wdXAiLCJodHRwX2RhdGFfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bF9hamF4Iiwic2hvd19lcnJvcl9tZXNzYWdlX3BvcHVwIiwiZXJyb3JzIiwidmFsaWRhdGVfbm90X2VtcHR5IiwidmFsaWRhdGVfZW1haWwiLCJ2YWxpZGF0ZV9pZGRvY191eSIsInZhbGlkYXRlX3R3b193b3JkcyIsInZhbGlkYXRlX2VxdWFsc1RvIiwiJGlvbmljTG9hZGluZyIsIkxPQURFUkFQSSIsInNob3dMb2FkaW5nIiwidGV4dCIsImhpZGVMb2FkaW5nIiwidG9nZ2xlTG9hZGluZ1dpdGhNZXNzYWdlIiwic2VsZiIsInRoaXMiLCJjb25maXJtUG9wdXAiLCJjb25maXJtIiwic2hvd0FsZXJ0IiwiX3RpdGxlIiwiX3RlbXBsYXRlIiwibG9jYXRpb25zT2JqIiwibGFzdF91c2VyX2xhdCIsImxhc3RfdXNlcl9sbmciLCJzZWxlY3RlZF9jb3VuY2lsIiwic2VsZWN0Q291bmNpbCIsImNvdW5jaWxOYW1lIiwic2F2ZWRMb2NhdGlvbnMiLCJwcm9qNCIsImRlZnMiLCJtYXBTZXJ2aWNlIiwiZ29Ub1BsYWNlIiwiX2dlb0pzb24iLCJjcnMiLCJub21icmUiLCJfbGF0bG5nIiwiUHJvaiIsImdlb0pzb24iLCJwb2ludFRvTGF5ZXIiLCJsYXRsbmciLCJodG1sUG9wVXAiLCJhZGRUbyIsInNldFZpZXciLCJvcGVuUG9wdXAiLCJfZGF0YSIsImV4dGVuZCIsImFwaVVSTCIsImhhc2hfaWQiLCJjdXJyZW50IiwiYnVpbGQiLCJtb2RhbE9CSiIsIlBpbiIsInBpbnNVUkwiLCJfYWxsIiwicHJvdG90eXBlIiwiYWxlcnRfdGl0bGUiLCJhbGVydF9tZXNzYWdlIiwiYXNrRm9yT25lVmFsdWVQb3BVcCIsImZpZWxkX25hbWUiLCJ2YWxpZGF0aW9uVHlwZSIsIm15UG9wdXAiLCJzdWJUaXRsZSIsImJ1dHRvbnMiLCJvblRhcCIsInByZXZlbnREZWZhdWx0Iiwic2VtYXBob3JlT2JqIiwic2VtYXBob3JlcyIsInNlbWFwaG9yZUlkIiwiQXBpSW1FbmRwb2ludCIsIkFwaURhdGFFbmRwb2ludCIsInJlc3RQcmVmZml4IiwibG9jYXRpb25BUEkiLCJzZWFyY2hMb2NhdGlvbkJ5U3RyIiwiX2xvY2F0aW9uIiwibWV0aG9kIiwic2VhcmNoRXNxdWluYUJ5U3RyIiwiY2FsbGUiLCJlc3F1aW5hIiwiZ2V0TG9jYXRpb25HZW9tIiwiZ2V0UGFyYW1QYXRoQnlUaXBvIiwiaSIsInBhdGhQYXJhbXMiLCJnZXRMb2NhdGlvbkdlb21QTUIiLCJlc3F1aW5hX251bWVybyIsIl90aXBvIiwicmVzdEdlb0RhdGFTZXJ2aWNlUGF0aCIsIkVTUVVJTkEiLCJESVJFQ0NJT04iLCJVc2VyT2JqIiwiZ2V0X3VzZXJfZGF0YSIsImFkZF9waG90byIsImlzTG9nZ2VkIiwidmFsdWVzIiwiZmlsdGVyIiwidiIsInJlIiwidGVzdCIsInJlcGxhY2UiLCJkaWciLCJwYXJzZUludCJdLCJtYXBwaW5ncyI6IkFBT0EsR0FBSUEsU0FDRkMsWUFBYUMsUUFBUUMsT0FBTyx5QkFDNUJDLFNBQVVGLFFBQVFDLE9BQU8sc0JBRzNCSCxRQUFPSyxJQUFNSCxRQUFRQyxPQUFPLFVBQVcsUUFBUSxlQUFlLG1CQUFtQixvQkFBcUIscUJBQXNCLGtCQUFtQixjQUU5SUcsU0FBUyxpQkFDUkMsSUFBSyxpQ0FHTkQsU0FBUyxtQkFDUkMsSUFBSyxrQ0FJTkMsS0FBQSxpQkFBQSxhQUFBLG1CQUFJLFNBQVNDLEVBQWdCQyxFQUFZQyxHQUN4Q0QsRUFBV0UsUUFBVUMsT0FBT0QsUUFDNUJILEVBQWVLLE1BQU0sV0FHZkQsT0FBT0UsU0FBV0YsT0FBT0UsUUFBUUMsUUFBUUMsV0FDM0NGLFFBQVFDLFFBQVFDLFNBQVNDLDBCQUF5QixHQUNsREgsUUFBUUMsUUFBUUMsU0FBU0UsZUFBYyxJQUl6Q0MsTUFBTUMsU0FBU0MsY0FBZSxFQUMxQlQsT0FBT1UsV0FFVEEsVUFBVUMsb0JBS2ZDLFFBQUEsaUJBQUEscUJBQUEsbUJBQUEsdUJBQU8sU0FBU0MsRUFBZ0JDLEVBQW9CQyxFQUFrQkMsR0FDckVELEVBQWlCRSxrQkFBaUIsR0FPbENKLEVBRURLLE1BQU0sT0FDSEMsT0FBTyxFQUNQekIsSUFBSyxPQUNMMEIsWUFBVSxFQUNWQyxZQUFhLHNCQUNiQyxXQUFZLGtCQUdmSixNQUFNLFdBQ0hDLE9BQU8sRUFDUHpCLElBQUssT0FDTDZCLE9BQ0VDLGFBQ0VILFlBQWEscUJBQ2JDLFdBQWEsb0JBS3BCSixNQUFNLGFBQ0xDLE9B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LEtBQUs4TyxPQUFPLFNBQVNDLEdBQUcsTUFBVyxLQUFKQSxHQUN4RCxPQUFJRixHQUFPblUsT0FBUyxFQVFwQixPQUFPLEdBSWI4TyxrQkFBbUIsU0FBVS9KLEVBQU1HLEdBQ2pDLE1BQUdILElBQU9HLEdBT1p5SixlQUFnQixTQUFVNUosR0FDdEIsR0FBVSxNQUFQQSxHQUFzQixhQUFQQSxHQUE2QixJQUFQQSxFQUFVLENBQ2hELEdBQUl1UCxHQUFLLHdKQUNULE9BQU9BLEdBQUdDLEtBQUt4UCxHQUVmLE9BQU8sR0FJYjZKLGtCQUFtQixTQUFVN0osR0FDM0IsR0FBVSxNQUFQQSxHQUFzQixhQUFQQSxHQUE2QixJQUFQQSxFQUFVLENBQzlDQSxFQUFRQSxFQUFNeVAsUUFBUSxNQUFPLEdBQzdCLElBQUlDLEdBQU0xUCxFQUFNQSxFQUFNL0UsT0FBUyxHQUMzQmlELEVBQUksRUFBT3NRLEVBQUksQ0FDbkIsSUFBR3hPLEVBQU0vRSxRQUFVLEVBQ2pCLElBQUl1VCxFQUFJeE8sRUFBTS9FLE9BQVF1VCxFQUFJLEVBQUdBLElBQzNCeE8sRUFBUSxJQUFNQSxDQUdsQixLQUFJd08sRUFBSSxFQUFHQSxFQUFJLEVBQUdBLElBQ2hCdFEsR0FBTXlSLFNBQVMsVUFBVW5CLElBQU1tQixTQUFTM1AsRUFBTXdPLElBQU8sRUFFdkQsSUFBSTNhLEVBTUosT0FKRUEsR0FEQ3FLLEVBQUUsS0FBTyxFQUNELEVBRUEsR0FBS0EsRUFBSSxHQUVqQndSLEdBQU83YixFQU1aLE9BQU8iLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gSW9uaWMgU3RhcnRlciBBcHBcblxuLy8gYW5ndWxhci5tb2R1bGUgaXMgYSBnbG9iYWwgcGxhY2UgZm9yIGNyZWF0aW5nLCByZWdpc3RlcmluZyBhbmQgcmV0cmlldmluZyBBbmd1bGFyIG1vZHVsZXNcbi8vICdwbWJfaW0nIGlzIHRoZSBuYW1lIG9mIHRoaXMgYW5ndWxhciBtb2R1bGUgZXhhbXBsZSAoYWxzbyBzZXQgaW4gYSA8Ym9keT4gYXR0cmlidXRlIGluIGluZGV4Lmh0bWwpXG4vLyB0aGUgMm5kIHBhcmFtZXRlciBpcyBhbiBhcnJheSBvZiAncmVxdWlyZXMnXG4vLyAnc3RhcnRlci5zZXJ2aWNlcycgaXMgZm91bmQgaW4gc2VydmljZXMuanNcbi8vICdzdGFydGVyLmNvbnRyb2xsZXJzJyBpcyBmb3VuZCBpbiBjb250cm9sbGVycy5qc1xudmFyIHBtYl9pbSA9IHtcbiAgY29udHJvbGxlcnM6IGFuZ3VsYXIubW9kdWxlKCdwbWJfaW0uY29udHJvbGxlcnMnLCBbXSksXG4gIHNlcnZpY2VzOiBhbmd1bGFyLm1vZHVsZSgncG1iX2ltLnNlcnZpY2VzJywgW10pXG59O1xuXG5wbWJfaW0uYXBwID0gYW5ndWxhci5tb2R1bGUoJ3BtYl9pbScsIFsnaW9uaWMnLCdpb25pYy53aXphcmQnLCdpb24tYXV0b2NvbXBsZXRlJywnbGVhZmxldC1kaXJlY3RpdmUnLCAncG1iX2ltLmNvbnRyb2xsZXJzJywgJ3BtYl9pbS5zZXJ2aWNlcycsICduZ0NvcmRvdmEnXSlcblxuLmNvbnN0YW50KCdBcGlJbUVuZHBvaW50Jywge1xuICB1cmw6ICdodHRwOi8vd3d3Lm1vbnRldmlkZW8uZ3ViLnV5J1xufSlcblxuLmNvbnN0YW50KCdBcGlEYXRhRW5kcG9pbnQnLCB7XG4gIHVybDogJ2h0dHBzOi8vYmFja2VuZC5lLW9wZW5iYXIuY29tJ1xufSlcblxuXG4ucnVuKGZ1bmN0aW9uKCRpb25pY1BsYXRmb3JtLCAkcm9vdFNjb3BlLCAkY29yZG92YUtleWJvYXJkKSB7XG4gICRyb290U2NvcGUuVkVSU0lPTiA9IHdpbmRvdy5WRVJTSU9OO1xuICAkaW9uaWNQbGF0Zm9ybS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAvLyBIaWRlIHRoZSBhY2Nlc3NvcnkgYmFyIGJ5IGRlZmF1bHQgKHJlbW92ZSB0aGlzIHRvIHNob3cgdGhlIGFjY2Vzc29yeSBiYXIgYWJvdmUgdGhlIGtleWJvYXJkXG4gICAgLy8gZm9yIGZvcm0gaW5wdXRzKVxuICAgIGlmICh3aW5kb3cuY29yZG92YSAmJiB3aW5kb3cuY29yZG92YS5wbHVnaW5zLktleWJvYXJkKSB7XG4gICAgICBjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuaGlkZUtleWJvYXJkQWNjZXNzb3J5QmFyKGZhbHNlKTtcbiAgICAgIGNvcmRvdmEucGx1Z2lucy5LZXlib2FyZC5kaXNhYmxlU2Nyb2xsKGZhbHNlKTtcbiAgICB9XG4gICAgLy8kY29yZG92YUtleWJvYXJkLmhpZGVBY2Nlc3NvcnlCYXIoZmFsc2UpXG4gICAgLy8kY29yZG92YUtleWJvYXJkLmRpc2FibGVTY3JvbGwoZmFsc2UpXG4gICAgaW9uaWMuUGxhdGZvcm0uaXNGdWxsU2NyZWVuID0gdHJ1ZTtcbiAgICBpZiAod2luZG93LlN0YXR1c0Jhcikge1xuICAgICAgLy8gb3JnLmFwYWNoZS5jb3Jkb3ZhLnN0YXR1c2JhciByZXF1aXJlZFxuICAgICAgU3RhdHVzQmFyLnN0eWxlRGVmYXVsdCgpO1xuICAgIH1cbiAgfSk7XG59KVxuXG4uY29uZmlnKGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRjb21waWxlUHJvdmlkZXIsICRpb25pY0NvbmZpZ1Byb3ZpZGVyKSB7XG4gICRjb21waWxlUHJvdmlkZXIuZGVidWdJbmZvRW5hYmxlZChmYWxzZSk7XG4gIC8vJGlvbmljQ29uZmlnUHJvdmlkZXIuc2Nyb2xsaW5nLmpzU2Nyb2xsaW5nKHRydWUpO1xuXG4gIC8vIElvbmljIHVzZXMgQW5ndWxhclVJIFJvdXRlciB3aGljaCB1c2VzIHRoZSBjb25jZXB0IG9mIHN0YXRlc1xuICAvLyBMZWFybiBtb3JlIGhlcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyLXVpL3VpLXJvdXRlclxuICAvLyBTZXQgdXAgdGhlIHZhcmlvdXMgc3RhdGVzIHdoaWNoIHRoZSBhcHAgY2FuIGJlIGluLlxuICAvLyBFYWNoIHN0YXRlJ3MgY29udHJvbGxlciBjYW4gYmUgZm91bmQgaW4gY29udHJvbGxlcnMuanNcbiAgJHN0YXRlUHJvdmlkZXJcblxuLnN0YXRlKCdhcHAnLCB7XG4gICAgY2FjaGU6IGZhbHNlLFxuICAgIHVybDogXCIvYXBwXCIsXG4gICAgYWJzdHJhY3Q6IHRydWUsXG4gICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzL21lbnUuaHRtbFwiLFxuICAgIGNvbnRyb2xsZXI6ICdBYnNDb250cm9sbGVyJ1xuICB9KVxuXG4uc3RhdGUoJ2FwcC5tYXAnLCB7XG4gICAgY2FjaGU6IGZhbHNlLFxuICAgIHVybDogXCIvbWFwXCIsXG4gICAgdmlld3M6IHtcbiAgICAgICdtZW51Q29udGVudCcgOntcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzL21hcC5odG1sXCIsXG4gICAgICAgIGNvbnRyb2xsZXIgOiBcIk1hcENvbnRyb2xsZXJcIlxuICAgICAgfVxuICAgIH1cbiAgfSlcblxuLnN0YXRlKCdhcHAuaW50cm8nLCB7XG4gIGNhY2hlOiBmYWxzZSxcbiAgdXJsOiBcIi9pbnRyb1wiLFxuICB2aWV3czoge1xuICAgICdtZW51Q29udGVudCcgOntcbiAgICAgIHRlbXBsYXRlVXJsOiBcInRlbXBsYXRlcy9pbnRyby5odG1sXCIsXG4gICAgICBjb250cm9sbGVyIDogXCJJbnRyb0N0cmxcIlxuICAgIH1cbiAgfVxufSlcblxuLy8gaWYgbm9uZSBvZiB0aGUgYWJvdmUgc3RhdGVzIGFyZSBtYXRjaGVkLCB1c2UgdGhpcyBhcyB0aGUgZmFsbGJhY2tcbiR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9hcHAvaW50cm8nKTtcblxufSk7XG4iLCJwbWJfaW0uY29udHJvbGxlcnMuY29udHJvbGxlcignQWJzQ29udHJvbGxlcicsXG5bJyRzY29wZScsXG5mdW5jdGlvbigkc2NvcGUpIHtcblxufV0pO1xuIiwicG1iX2ltLmNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoJ0ludHJvQ3RybCcsIFsnJHNjb3BlJywgJyRzdGF0ZScsXG4gICckY29yZG92YUdlb2xvY2F0aW9uJyxcbiAgJyRzdGF0ZVBhcmFtcycsXG4gICckaW9uaWNQbGF0Zm9ybScsXG4gICckaW9uaWNQb3B1cCcsXG4gICdMb2NhdGlvbnNTZXJ2aWNlJyxcbiAgJ0RCU2VydmljZScsXG4gIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlLCAkY29yZG92YUdlb2xvY2F0aW9uLCAkc3RhdGVQYXJhbXMsICRpb25pY1BsYXRmb3JtLCAkaW9uaWNQb3B1cCwgTG9jYXRpb25zU2VydmljZSwgREJTZXJ2aWNlKSB7XG5cbiAgdmFyIGRiID0gREJTZXJ2aWNlLmluaXREQigpO1xuICBkYi5pbmZvKCkudGhlbihjb25zb2xlLmxvZy5iaW5kKGNvbnNvbGUpKTtcblxuICAkc2NvcGUuZ2VvbG9jYXRlID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgIHZhciBwb3NPcHRpb25zID0ge3RpbWVvdXQ6IDM1MDAsIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZX07XG4gICAgICAkY29yZG92YUdlb2xvY2F0aW9uXG4gICAgICAgIC5nZXRDdXJyZW50UG9zaXRpb24ocG9zT3B0aW9ucylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocG9zaXRpb24pIHtcbiAgICAgICAgICBMb2NhdGlvbnNTZXJ2aWNlLnNhdmVfaW5pdGlhbF9wb3NpdGlvbihwb3NpdGlvbik7XG4gICAgICAgICAgJHN0YXRlLmdvKFwiYXBwLm1hcFwiKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgJHN0YXRlLmdvKFwiYXBwLm1hcFwiKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgJHNjb3BlLiRvbignJGlvbmljVmlldy5lbnRlcicsIGZ1bmN0aW9uKCl7IC8vVGhpcyBpcyBmaXJlZCB0d2ljZSBpbiBhIHJvd1xuICAgICAgaWYoTG9jYXRpb25zU2VydmljZS5jb3VuY2lsX21vZGFsIT1udWxsKXtcbiAgICAgICAgTG9jYXRpb25zU2VydmljZS5jb3VuY2lsX21vZGFsLmhpZGUoKTtcbiAgICAgICAgTG9jYXRpb25zU2VydmljZS5jb3VuY2lsX21vZGFsLnJlbW92ZSgpO1xuICAgICAgfVxuICAgICAgICRzY29wZS5nZW9sb2NhdGUoKTtcbiAgIH0pO1xuXG4gIH1cbl0pO1xuIiwicG1iX2ltLmNvbnRyb2xsZXJzLmNvbnRyb2xsZXIoJ01hcENvbnRyb2xsZXInLCBbJyRzY29wZScsICdfJyxcbiAgJyRjb3Jkb3ZhQ2FtZXJhJyxcbiAgJyRjb3Jkb3ZhR2VvbG9jYXRpb24nLFxuICAnJGNvbXBpbGUnLFxuICAnJGlvbmljTW9kYWwnLFxuICAnJGlvbmljUG9wdXAnLFxuICAnbGVhZmxldERhdGEnLFxuICAnQ29uZmlnU2VydmljZScsXG4gICdMb2NhdGlvbnNTZXJ2aWNlJyxcbiAgJ1BpblNlcnZpY2UnLFxuICAnTWVzc2FnZVNlcnZpY2UnLFxuICAnRHJpbmtTZXJ2aWNlJyxcbiAgJ0F1dGhTZXJ2aWNlJyxcbiAgJ1VzZXJTZXJ2aWNlJyxcbiAgJ0RCU2VydmljZScsXG4gICckdGltZW91dCcsXG4gICckaW50ZXJ2YWwnLFxuICAnJGxvY2F0aW9uJyxcbiAgJ0Vycm9yU2VydmljZScsXG4gICckaW9uaWNTbGlkZUJveERlbGVnYXRlJyxcbiAgJyRpb25pY1Njcm9sbERlbGVnYXRlJyxcbiAgJ1BvcFVwU2VydmljZScsXG4gICdDb25uZWN0aXZpdHlTZXJ2aWNlJyxcbiAgJyRjb3Jkb3ZhSW5BcHBCcm93c2VyJyxcbiAgJ01hcFNlcnZpY2UnLFxuICAnTW9kYWxTZXJ2aWNlJyxcbiAgJ1NlbWFwaG9yZVNlcnZpY2UnLFxuICAnVmFsaWRhdGlvblNlcnZpY2UnLFxuICAnTm90aWZpY2F0aW9uU2VydmljZScsXG4gIGZ1bmN0aW9uKFxuICAgICRzY29wZSxcbiAgICBfLFxuICAgICRjb3Jkb3ZhQ2FtZXJhLFxuICAgICRjb3Jkb3ZhR2VvbG9jYXRpb24sXG4gICAgJGNvbXBpbGUsXG4gICAgJGlvbmljTW9kYWwsXG4gICAgJGlvbmljUG9wdXAsXG4gICAgbGVhZmxldERhdGEsXG4gICAgQ29uZmlnU2VydmljZSxcbiAgICBMb2NhdGlvbnNTZXJ2aWNlLFxuICAgIFBpblNlcnZpY2UsXG4gICAgTWVzc2FnZVNlcnZpY2UsXG4gICAgRHJpbmtTZXJ2aWNlLFxuICAgIEF1dGhTZXJ2aWNlLFxuICAgIFVzZXJTZXJ2aWNlLFxuICAgIERCU2VydmljZSxcbiAgICAkdGltZW91dCxcbiAgICAkaW50ZXJ2YWwsXG4gICAgJGxvY2F0aW9uLFxuICAgIEVycm9yU2VydmljZSxcbiAgICAkaW9uaWNTbGlkZUJveERlbGVnYXRlLFxuICAgICRpb25pY1Njcm9sbERlbGVnYXRlLFxuICAgIFBvcFVwU2VydmljZSxcbiAgICBDb25uZWN0aXZpdHlTZXJ2aWNlLFxuICAgICRjb3Jkb3ZhSW5BcHBCcm93c2VyLFxuICAgIE1hcFNlcnZpY2UsXG4gICAgTW9kYWxTZXJ2aWNlLFxuICAgIFNlbWFwaG9yZVNlcnZpY2UsXG4gICAgVmFsaWRhdGlvblNlcnZpY2UsXG4gICAgTm90aWZpY2F0aW9uU2VydmljZVxuICApIHtcblxuICAgIC8qKlxuICAgICAqIE9uY2Ugc3RhdGUgbG9hZGVkLCBnZXQgcHV0IG1hcCBvbiBzY29wZS5cbiAgICAgKi9cbiAgICAkc2NvcGUub25saW5lX3VzZXJfZ2VvID0ge307XG4gICAgJHNjb3BlLm9ubGluZV91c2VyX2dlb19hcnJheSA9IG5ldyBBcnJheSgpO1xuICAgICRzY29wZS5iYXNlVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMO1xuICAgICRzY29wZS5BcHBOYW1lID0gQ29uZmlnU2VydmljZS5BcHBOYW1lO1xuICAgICRzY29wZS51c2VyX2NhY2hlZF9pbWFnZSA9IFwiLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmdcIjtcbiAgICAkc2NvcGUub25lX3ZhbHVlX3BvcHVwID0gbnVsbDtcbiAgICAkc2NvcGUubXlJbnRlcnZhbHMgPSBuZXcgQXJyYXkoKTtcblxuICAgICRzY29wZS4kb24oXCIkaW9uaWNWaWV3LmJlZm9yZUVudGVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgICAgREJTZXJ2aWNlLmluaXREQigpO1xuICAgICAgaWYoQ29ubmVjdGl2aXR5U2VydmljZS5pc09ubGluZSgpKXtcbiAgICAgICAgJHNjb3BlLmNoZWNrX3VzZXJfbG9nZ2VkKCk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgJHNjb3BlLnNldF9vZmZsaW5lX3VzZXIoKTtcbiAgICAgIH1cbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGlmKENvbm5lY3Rpdml0eVNlcnZpY2UuaXNPbmxpbmUoKSl7XG4gICAgICAgICRzY29wZS5jcmVhdGVfb25saW5lX21hcCgpO1xuICAgICAgICAkc2NvcGUubXlJbnRlcnZhbHNbJ3VzZXJMb2NhdGlvbiddPSAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICRzY29wZS5zZW5kVXNlckxvY2F0aW9uKClcbiAgICAgICAgICB9LCAzMDAwMCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkc2NvcGUuJG9uKFwiJGlvbmljVmlldy5hZnRlckVudGVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG1hcCA9IGxlYWZsZXREYXRhLmdldE1hcCgpO1xuICAgICAgaWYoTG9jYXRpb25zU2VydmljZS5pbml0aWFsX2xhdCE9XCJcIil7XG4gICAgICAgIE1hcFNlcnZpY2UuY2VudGVyTWFwT25Db29yZHMoTG9jYXRpb25zU2VydmljZS5pbml0aWFsX2xhdCwgTG9jYXRpb25zU2VydmljZS5pbml0aWFsX2xuZywgMTYpO1xuICAgICAgfWVsc2V7XG4gICAgICAgIE1hcFNlcnZpY2UuY2VudGVyTWFwT25Db29yZHMoLTM0LjkwMTExMywgLTU2LjE2NDUzMSwgMTQpO1xuICAgICAgfVxuICAgICAgJHNjb3BlLmNoZWNrTm90aWZpY2F0aW9ucygpO1xuICAgIH0pO1xuXG4gICAgJHNjb3BlLmNoZWNrTm90aWZpY2F0aW9ucyA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZigkc2NvcGUubXlJbnRlcnZhbHNbJ25vdGlmaWNhdGlvbnMnXSl7XG4gICAgICAgICRpbnRlcnZhbC5jYW5jZWwoJHNjb3BlLm15SW50ZXJ2YWxzWydub3RpZmljYXRpb25zJ10pO1xuICAgICAgfVxuICAgICAgJHNjb3BlLm15SW50ZXJ2YWxzWydub3RpZmljYXRpb25zJ109ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLm5vdGlmaWNhdGlvbnMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgaWYoVXNlclNlcnZpY2UudWlkKXtcbiAgICAgICAgICBOb3RpZmljYXRpb25TZXJ2aWNlLmdldFVucmVjaXZlZE5vdGlmaWNhdGlvbnMoVXNlclNlcnZpY2UubmFtZSwgVXNlclNlcnZpY2UucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICB2YXIgZGF0YSA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApO1xuICAgICAgICAgICAgaWYoIShkYXRhLlN0YXR1cyAmJiBkYXRhLlN0YXR1cz09XCJlcnJvclwiKSl7XG4gICAgICAgICAgICAgICRzY29wZS5ub3RpZmljYXRpb25zID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UoZGF0YSkuTm90aWZpY2F0aW9ucztcbiAgICAgICAgICAgICAgLyp2YXIgbmV3Tm90aWZpY2F0aW9uQXJyYXkgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgICAgJHNjb3BlLm5vdGlmaWNhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihub3RpZmljYXRpb25faXRlbSxrZXkpe1xuICAgICAgICAgICAgICAgIGlmKCEobm90aWZpY2F0aW9uX2l0ZW0udGlwbyBpbiBuZXdOb3RpZmljYXRpb25BcnJheSkpe1xuICAgICAgICAgICAgICAgICAgbmV3Tm90aWZpY2F0aW9uQXJyYXlbbm90aWZpY2F0aW9uX2l0ZW0udGlwb10gPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoIShub3RpZmljYXRpb25faXRlbS51aWQgaW4gbmV3Tm90aWZpY2F0aW9uQXJyYXlbbm90aWZpY2F0aW9uX2l0ZW0udGlwb10pKXtcbiAgICAgICAgICAgICAgICAgIG5ld05vdGlmaWNhdGlvbkFycmF5W25vdGlmaWNhdGlvbl9pdGVtLnRpcG9dW25vdGlmaWNhdGlvbl9pdGVtLnVpZF0gPSAxO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgbmV3Tm90aWZpY2F0aW9uQXJyYXlbbm90aWZpY2F0aW9uX2l0ZW0udGlwb11bbm90aWZpY2F0aW9uX2l0ZW0udWlkXSArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7Ki9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSwgMzAwMCk7XG4gICAgfTtcblxuICAgICRzY29wZS5vcGVuTm90aWZpY2F0aW9uID0gZnVuY3Rpb24obm90aWZpY2F0aW9uKXtcbiAgICAgICRzY29wZS5kb250U2hvd05vdGlmaWNhdGlvbkFnYWluKG5vdGlmaWNhdGlvbi5uaWQpO1xuICAgICAgaWYobm90aWZpY2F0aW9uLnRpcG89PVwibnVldm9fbWVuc2FqZVwiKXtcbiAgICAgICAgJHNjb3BlLnNlbmRfbWVzc2FnZV90byhub3RpZmljYXRpb24udWlkKTtcbiAgICAgIH1lbHNlIGlmKG5vdGlmaWNhdGlvbi50aXBvPT1cImludml0YWNpb25fYV90cmFnb1wiKXtcbiAgICAgICAgJHNjb3BlLm9wZW5JbnZpdGF0aW9uc01vZGFsKG5vdGlmaWNhdGlvbi51aWQpO1xuICAgICAgfWVsc2UgaWYobm90aWZpY2F0aW9uLnRpcG89PVwicmVzcHVlc3RhX2FfaW52aXRhY2lvblwiKXtcbiAgICAgICAgJHNjb3BlLm9wZW5JbnZpdGF0aW9uc01vZGFsKG5vdGlmaWNhdGlvbi51aWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5kb250U2hvd05vdGlmaWNhdGlvbkFnYWluID0gZnVuY3Rpb24obmlkKXtcbiAgICAgIGlmKFVzZXJTZXJ2aWNlLnVpZCl7XG4gICAgICAgIE5vdGlmaWNhdGlvblNlcnZpY2UuZG9udFNob3dOb3RpZmljYXRpb25BZ2FpbihVc2VyU2VydmljZS5uYW1lLFVzZXJTZXJ2aWNlLnBhc3N3b3JkLG5pZCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAvL0FGVEVSIFNFTkRJTkcgTk9UIFNIT1cgT1JERVIgRE8gTk9USElOR1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuY2xvc2VOb3RpZmljYXRpb24gPSBmdW5jdGlvbihub3RpZmljYXRpb24pe1xuICAgICAgJHNjb3BlLmRvbnRTaG93Tm90aWZpY2F0aW9uQWdhaW4obm90aWZpY2F0aW9uLm5pZCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLm9wZW5XZWJzaXRlID0gZnVuY3Rpb24odXJsKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbjogJ25vJyxcbiAgICAgICAgICAgICAgICBjbGVhcmNhY2hlOiAneWVzJyxcbiAgICAgICAgICAgICAgICB0b29sYmFyOiAnbm8nXG4gICAgICAgICAgICB9O1xuXG4gICAgICRjb3Jkb3ZhSW5BcHBCcm93c2VyLm9wZW4odXJsLCAnX2JsYW5rJywgb3B0aW9ucylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAvLyBlcnJvclxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUuY3JlYXRlX29ubGluZV9tYXAgPSBmdW5jdGlvbigpe1xuICAgICAgJHNjb3BlLm1hcCA9IHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICB0aWxlTGF5ZXI6ICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsXG4gICAgICAgICAgbWluWm9vbTogMSxcbiAgICAgICAgICBtYXhab29tOiAxOCxcbiAgICAgICAgICB6b29tQ29udHJvbFBvc2l0aW9uOiAndG9wbGVmdCcsXG4gICAgICAgIH0sXG4gICAgICAgIG1hcmtlcnM6IHt9LFxuICAgICAgICBldmVudHM6IHtcbiAgICAgICAgICBtYXA6IHtcbiAgICAgICAgICAgIGVuYWJsZTogWydjb250ZXh0J10sXG4gICAgICAgICAgICBsb2dpYzogJ2VtaXQnXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjZW50ZXI6IHtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgICRzY29wZS5sb2FkUGluc0xheWVyKCk7XG4gICAgICAkc2NvcGUubWFwLmNlbnRlciA9IHtcbiAgICAgICAgICBsYXQ6IC0zNC45MDExMTMsXG4gICAgICAgICAgbG5nOiAtNTYuMTY0NTMxLFxuICAgICAgICAgIHpvb206IDE2XG4gICAgICAgIH07XG4gICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uKG1hcCkge1xuICAgICAgICBtYXAub24oJ21vdmVlbmQnLCAkc2NvcGUuaGlkZU9mZlNjcmVlblBpbnMpO1xuICAgICAgfSk7XG4gICAgfTtcblxuXG5cbiAgJHNjb3BlLm5leHQgPSBmdW5jdGlvbigpIHtcbiAgICAkaW9uaWNTbGlkZUJveERlbGVnYXRlLm5leHQoKTtcbiAgfTtcblxuICAkc2NvcGUucHJldmlvdXMgPSBmdW5jdGlvbigpIHtcbiAgICAkaW9uaWNTbGlkZUJveERlbGVnYXRlLnByZXZpb3VzKCk7XG4gIH07XG5cbiAgJHNjb3BlLmJhY2tfdG9fbWFwID0gZnVuY3Rpb24oYmFja190b19tYXApe1xuICAgIGlmKGJhY2tfdG9fbWFwKXtcbiAgICAgIC8vTG9jYXRpb25zU2VydmljZS5pbml0aWFsX2xhdCA9ICRzY29wZS5yZXBvcnQubGF0O1xuICAgICAgLy9Mb2NhdGlvbnNTZXJ2aWNlLmluaXRpYWxfbG5nID0gJHNjb3BlLnJlcG9ydC5sb247XG4gICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgIC8vJHNjb3BlLmFkZFJlcG9ydHNMYXllcigpO1xuICAgIH1lbHNle1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgfVxuICB9XG5cblxuICAkc2NvcGUuaW1hZ2UgPSBudWxsO1xuXG4gICRzY29wZS5hZGRJbWFnZSA9IGZ1bmN0aW9uKGlzRnJvbUFsYnVtLCBpc1VzZXJQaG90bywgaXNDb21tZW50UGhvdG8sIGlzTmV3VXNlclBob3RvKSB7XG4gICAgLy9hbGVydChcImFkZEltYWdlXCIpO1xuICAgICRzY29wZS5pc1VzZXJQaG90byA9IGlzVXNlclBob3RvO1xuICAgICRzY29wZS5pc0NvbW1lbnRQaG90byA9IGlzQ29tbWVudFBob3RvO1xuICAgICRzY29wZS5pc05ld1VzZXJQaG90byA9IGlzTmV3VXNlclBob3RvO1xuXG4gICAgdmFyIHNvdXJjZSA9IENhbWVyYS5QaWN0dXJlU291cmNlVHlwZS5DQU1FUkE7XG4gICAgdmFyIGZpeF9vcmllbnRhdGlvbiA9IHRydWU7XG4gICAgdmFyIHNhdmVfdG9fZ2FsbGVyeSA9IHRydWU7XG4gICAgaWYoaXNGcm9tQWxidW09PTEpe1xuICAgICAgc291cmNlID0gQ2FtZXJhLlBpY3R1cmVTb3VyY2VUeXBlLlBIT1RPTElCUkFSWTtcbiAgICAgIGZpeF9vcmllbnRhdGlvbiA9IGZhbHNlO1xuICAgICAgc2F2ZV90b19nYWxsZXJ5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICBxdWFsaXR5OiA5MCxcbiAgICAgIGRlc3RpbmF0aW9uVHlwZTogQ2FtZXJhLkRlc3RpbmF0aW9uVHlwZS5GSUxFX1VSSSxcbiAgICAgIHNvdXJjZVR5cGU6IHNvdXJjZSxcbiAgICAgIGFsbG93RWRpdDogZmFsc2UsXG4gICAgICBjb3JyZWN0T3JpZW50YXRpb24gOiBmaXhfb3JpZW50YXRpb24sXG4gICAgICBlbmNvZGluZ1R5cGU6IENhbWVyYS5FbmNvZGluZ1R5cGUuSlBFRyxcbiAgICAgIHBvcG92ZXJPcHRpb25zOiBDYW1lcmFQb3BvdmVyT3B0aW9ucyxcbiAgICAgIHNhdmVUb1Bob3RvQWxidW06IHNhdmVfdG9fZ2FsbGVyeSxcbiAgICAgIHRhcmdldFdpZHRoOiA1MDAsXG4gICAgICB0YXJnZXRIZWlnaHQ6IDUwMFxuICAgIH07XG5cblxuICAgICRjb3Jkb3ZhQ2FtZXJhLmdldFBpY3R1cmUob3B0aW9ucykudGhlbihmdW5jdGlvbihpbWFnZURhdGEpIHtcbiAgICAgIG9uSW1hZ2VTdWNjZXNzKGltYWdlRGF0YSk7XG5cbiAgICAgIGZ1bmN0aW9uIG9uSW1hZ2VTdWNjZXNzKGZpbGVVUkkpIHtcbiAgICAgICAgd2luZG93LkZpbGVQYXRoLnJlc29sdmVOYXRpdmVQYXRoKGZpbGVVUkksIGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgIC8vIG9uU3VjY2VzcyBjb2RlXG4gICAgICAgICAgLy9hbGVydChyZXN1bHQpO1xuICAgICAgICAgIGZpbGVVUkkgPSAnZmlsZTovLycgKyByZXN1bHQ7XG4gICAgICAgICAgaWYocmVzdWx0LnN0YXJ0c1dpdGgoXCJmaWxlOi8vXCIpKXtcbiAgICAgICAgICAgIGZpbGVVUkkgPSByZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKCRzY29wZS5pc1VzZXJQaG90bz09MSl7XG4gICAgICAgICAgICAvL1VzZXJTZXJ2aWNlLmFkZF9waG90byhmaWxlVVJJKTtcbiAgICAgICAgICAgICRzY29wZS5wcm9maWxlLnBpY3R1cmVfdXJsID0gZmlsZVVSSTtcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGlmKCRzY29wZS5pc0NvbW1lbnRQaG90bz09MSl7XG4gICAgICAgICAgICAgICRzY29wZS5jb21tZW50LmZpbGUgPSBmaWxlVVJJO1xuICAgICAgICAgICAgfWVsc2UgaWYoJHNjb3BlLmlzTmV3VXNlclBob3RvPT0xKXtcbiAgICAgICAgICAgICAgJHNjb3BlLm5ld3VzZXIucGljdHVyZV91cmwgPSBmaWxlVVJJO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAkc2NvcGUuaW1nVVJJID0gZmlsZVVSSTtcbiAgICAgICAgICAvL2NyZWF0ZUZpbGVFbnRyeShmaWxlVVJJKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBhbGVydChcIkVycm9yIHJlc29sdmVOYXRpdmVQYXRoXCIgKyBlcnJvcik7XG4gICAgICAgIH0pO1xuXG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZUZpbGVFbnRyeShmaWxlVVJJKSB7XG4gICAgICAgIHdpbmRvdy5yZXNvbHZlTG9jYWxGaWxlU3lzdGVtVVJMKGZpbGVVUkksIGNvcHlGaWxlLCBmYWlsKTtcbiAgICAgIH1cblxuICAgICAgLy8gNVxuICAgICAgZnVuY3Rpb24gY29weUZpbGUoZmlsZUVudHJ5KSB7XG4gICAgICAgIHZhciBuYW1lID0gZmlsZUVudHJ5LmZ1bGxQYXRoLnN1YnN0cihmaWxlRW50cnkuZnVsbFBhdGgubGFzdEluZGV4T2YoJy8nKSArIDEpO1xuICAgICAgICB2YXIgbmV3TmFtZSA9IG1ha2VpZCgpICsgbmFtZTtcblxuICAgICAgICB3aW5kb3cucmVzb2x2ZUxvY2FsRmlsZVN5c3RlbVVSTChjb3Jkb3ZhLmZpbGUuZGF0YURpcmVjdG9yeSwgZnVuY3Rpb24oZmlsZVN5c3RlbTIpIHtcbiAgICAgICAgICAgIGZpbGVFbnRyeS5jb3B5VG8oXG4gICAgICAgICAgICAgIGZpbGVTeXN0ZW0yLFxuICAgICAgICAgICAgICBuZXdOYW1lLFxuICAgICAgICAgICAgICBvbkNvcHlTdWNjZXNzLFxuICAgICAgICAgICAgICBmYWlsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZmFpbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIDZcbiAgICAgIGZ1bmN0aW9uIG9uQ29weVN1Y2Nlc3MoZW50cnkpIHtcbiAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuaW1hZ2UgPSBlbnRyeS5uYXRpdmVVUkw7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBmYWlsKGVycm9yKSB7XG5cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gbWFrZWlkKCkge1xuICAgICAgICB2YXIgdGV4dCA9IFwiXCI7XG4gICAgICAgIHZhciBwb3NzaWJsZSA9IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlcIjtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0ZXh0O1xuICAgICAgfVxuXG4gICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAvL2NvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG4gIH07XG5cbiAgJHNjb3BlLnVybEZvckltYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGltYWdlVVJMID0gXCJodHRwOi8vcGxhY2Vob2xkLml0LzIwMHgyMDBcIjtcbiAgICBpZiAoJHNjb3BlLmltYWdlKSB7XG4gICAgICB2YXIgbmFtZSA9ICRzY29wZS5pbWFnZS5zdWJzdHIoJHNjb3BlLmltYWdlLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICAgIGltYWdlVVJMID0gY29yZG92YS5maWxlLmRhdGFEaXJlY3RvcnkgKyBuYW1lO1xuICAgIH1cbiAgICAvL2NvbnNvbGUubG9nKFwiSW1hZ2VVUkwgPSBcIiArIGltYWdlVVJMKTtcbiAgICByZXR1cm4gaW1hZ2VVUkw7XG4gIH07XG5cblxuICAgICRzY29wZS5zY3JvbGxNZSA9IGZ1bmN0aW9uKGFuY2hvcl9pZCl7XG4gICAgICAkbG9jYXRpb24uaGFzaChhbmNob3JfaWQpO1xuICAgICAgdmFyIGhhbmRsZSAgPSAkaW9uaWNTY3JvbGxEZWxlZ2F0ZS4kZ2V0QnlIYW5kbGUoJ2NvbnRlbnQnKTtcbiAgICAgIGhhbmRsZS5hbmNob3JTY3JvbGwoKTtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2V0X2FjdGl2ZV9vcHRpb24gPSBmdW5jdGlvbihidXR0b25pZCkge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYnV0dG9uaWQpLmNsYXNzTmFtZSA9IFwib3B0aW9uLWFjdGl2ZVwiO1xuICAgIH1cblxuICAgICRzY29wZS5oaWRlX3NwZWNpYWxfZGl2cyA9IGZ1bmN0aW9uKCl7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXItb3B0aW9ucy1tZW51XCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNsb3NlX3JlcG9ydF9kZXRhaWxfbW9kYWwgPSBmdW5jdGlvbigpe1xuICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgICAgJHNjb3BlLnJlcG9ydF9kZXRhaWxfaWQgPSBudWxsO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogQ2VudGVyIG1hcCBvbiB1c2VyJ3MgY3VycmVudCBwb3NpdGlvblxuICAgICAqL1xuICAgICRzY29wZS5sb2NhdGUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgJGNvcmRvdmFHZW9sb2NhdGlvblxuICAgICAgICAuZ2V0Q3VycmVudFBvc2l0aW9uKClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocG9zaXRpb24pIHtcbiAgICAgICAgICAkc2NvcGUubWFwLmNlbnRlci5sYXQgPSBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7XG4gICAgICAgICAgJHNjb3BlLm1hcC5jZW50ZXIubG5nID0gcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZTtcbiAgICAgICAgICAkc2NvcGUubWFwLmNlbnRlci56b29tID0gMTU7XG5cbiAgICAgICAgICAkc2NvcGUubWFwLm1hcmtlcnMubm93ID0ge1xuICAgICAgICAgICAgbGF0OiBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUsXG4gICAgICAgICAgICBsbmc6IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIllvdSBBcmUgSGVyZVwiLFxuICAgICAgICAgICAgZm9jdXM6IHRydWUsXG4gICAgICAgICAgICBkcmFnZ2FibGU6IGZhbHNlXG4gICAgICAgICAgfTtcblxuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAvLyBlcnJvclxuICAgICAgICAgIC8vY29uc29sZS5sb2coXCJMb2NhdGlvbiBlcnJvciFcIik7XG4gICAgICAgICAgLy9jb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcblxuICAgIH07XG5cblxuXG4gICAgJHNjb3BlLmFkZE1hcENvbnRyb2xzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXBfY3Jvc3NoYWlyJykuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXBfY3Jvc3NoYWlyX2J1dHRvbicpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cbiAgICB9O1xuXG5cbiAgICAkc2NvcGUuY2hhbmdlVXNlckxvY2F0aW9uUGluID0gZnVuY3Rpb24obGF0LGxvbix1aWQpe1xuICAgICAgaWYoJHNjb3BlLm9ubGluZV91c2VyX2dlb19hcnJheVt1aWRdKXtcbiAgICAgICAgbGF5ZXIgPSAkc2NvcGUub25saW5lX3VzZXJfZ2VvX2FycmF5W3VpZF07XG4gICAgICAgIHZhciBuZXdMYXRMbmcgPSBuZXcgTC5MYXRMbmcobGF0LCBsb24pO1xuICAgICAgICBsYXllci5zZXRMYXRMbmcobmV3TGF0TG5nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuaGlkZU9mZlNjcmVlblBpbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XG4gICAgICAgIHZhciBtYXBCb3VuZHMgPSBtYXAuZ2V0Qm91bmRzKCk7XG4gICAgICAgICRzY29wZS51c2Vyc1Zpc2libGUgPSBbXTtcbiAgICAgICAgICAkc2NvcGUub25saW5lX3VzZXJfZ2VvX2FycmF5LmZvckVhY2goZnVuY3Rpb24obGF5ZXIsa2V5KXtcbiAgICAgICAgICAgIHZhciBzaG91bGRCZVZpc2libGUgPSBtYXBCb3VuZHMuY29udGFpbnMobGF5ZXIuZ2V0TGF0TG5nKCkpO1xuICAgICAgICAgICAgaWYgKCFzaG91bGRCZVZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzaG91bGRCZVZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBtYXAuYWRkTGF5ZXIobGF5ZXIpO1xuICAgICAgICAgICAgICAgICRzY29wZS51c2Vyc1Zpc2libGUucHVzaChsYXllci5mZWF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLnJlbW92ZUFsbFBpbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XG4gICAgICAgICRzY29wZS51c2Vyc1Zpc2libGUgPSBbXTtcbiAgICAgICAgaWYoJHNjb3BlLm9ubGluZV91c2VyX2dlb19hcnJheSl7XG4gICAgICAgICAgJHNjb3BlLm9ubGluZV91c2VyX2dlb19hcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyLGtleSl7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwicmVtb3ZpbmdcIik7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGxheWVyKTtcbiAgICAgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmxvYWRQaW5zTGF5ZXIgPSBmdW5jdGlvbigpe1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcbiAgICAgICAgICBQaW5TZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZihQaW5TZXJ2aWNlLmxhc3RQaW5zUmVzcG9uc2U9PW51bGwgfHwgKFBpblNlcnZpY2UubGFzdFBpbnNSZXNwb25zZSAmJiBQaW5TZXJ2aWNlLmxhc3RQaW5zUmVzcG9uc2UhPXJlc3BvbnNlKSl7XG4gICAgICAgICAgICAgIGlmKCRzY29wZS5vbmxpbmVfdXNlcl9nZW9fYXJyYXkpe1xuICAgICAgICAgICAgICAgICRzY29wZS51c2Vyc1Zpc2libGUgPSBbXTtcbiAgICAgICAgICAgICAgICAkc2NvcGUub25saW5lX3VzZXJfZ2VvX2FycmF5LmZvckVhY2goZnVuY3Rpb24obGF5ZXIsa2V5KXtcbiAgICAgICAgICAgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBQaW5TZXJ2aWNlLmxhc3RQaW5zUmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgJHNjb3BlLnJlcG9ydHNCeVN0YXRlID0ge307XG4gICAgICAgICAgICAgIHZhciBwaW5zQXJyYXkgPSByZXNwb25zZS5kYXRhLmZlYXR1cmVzO1xuICAgICAgICAgICAgICAkc2NvcGUub25saW5lX3VzZXJzX2dlbyA9IHJlc3BvbnNlLmRhdGEuZmVhdHVyZXM7XG4gICAgICAgICAgICAgIHBpbnNBcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGZlYXR1cmUpe1xuICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvbiA9IGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXQgPSBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdO1xuICAgICAgICAgICAgICAgICAgICBpZihsb24mJmxhdCl7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIG9ubGluZVN0YXR1cyA9IGZlYXR1cmUucHJvcGVydGllcy5PbmxpbmVfc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBpY29uID0gZmVhdHVyZS5wcm9wZXJ0aWVzLkljb247XG4gICAgICAgICAgICAgICAgICAgICAgaWYoaWNvbj09XCJhbm9uXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbiA9IFwiLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGljb25fc2hhZG93ID0gJy4vaW1nL2dlbmVyaWNfcGluX3JlZC5wbmcnO1xuICAgICAgICAgICAgICAgICAgICAgIGlmKG9ubGluZVN0YXR1cz09XCJPbmxpbmVcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uX3NoYWRvdyA9ICcuL2ltZy9nZW5lcmljX3Bpbl9ncmVlbi5wbmcnO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VySWNvbiA9IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dVcmw6IGljb25fc2hhZG93LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93U2l6ZTogICBbMTAwLCAxMzhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93QW5jaG9yOiBbNDQsIDEzOF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsOiBpY29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs0NiwgNDZdLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkFuY2hvcjogWzI0LCAxMjBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBBbmNob3I6IFswLCAtMTM4XVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBsYXllciA9IEwubWFya2VyKFtsYXQsIGxvbl0sIHtpY29uOiBtYXJrZXJJY29ufSk7XG4gICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuZmVhdHVyZSA9IGZlYXR1cmU7XG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9ubGluZV91c2VyX2dlb19hcnJheVtsYXllci5mZWF0dXJlLnByb3BlcnRpZXMuVWlkXSA9IGxheWVyO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1aWQgPSBmZWF0dXJlLnByb3BlcnRpZXMuVWlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBmZWF0dXJlLnByb3BlcnRpZXMuTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnRlcmVzdGVkID0gZmVhdHVyZS5wcm9wZXJ0aWVzLkludGVyZXN0ZWRJbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSBmZWF0dXJlLnByb3BlcnRpZXMuU3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdlbmRlciA9IGZlYXR1cmUucHJvcGVydGllcy5HZW5kZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL3ZhciBvbmxpbmVTdGF0dXMgPSBmZWF0dXJlLnByb3BlcnRpZXMuT25saW5lX3N0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZmVhdHVyZS5wcm9wZXJ0aWVzLkNhbnRhbGsgPSAkc2NvcGUuY2FuVGFsa1RvVXNlcihmZWF0dXJlLnByb3BlcnRpZXMuVWlkLDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9NZXNzYWdlU2VydmljZS5jYW5UYWxrVG9Vc2Vyc1t1aWRdPT0wO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoVXNlclNlcnZpY2UudWlkICYmIFVzZXJTZXJ2aWNlLnVpZD09dWlkKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IFwiVMO6OiBcIituYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RVcGRhdGUgPSAkc2NvcGUudGltZUNvbnZlcnRlcihmZWF0dXJlLnByb3BlcnRpZXMuTG9jYXRpb25UaW1lU3RhbXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9ICc8YSBjbGFzcz1cIm5hbWVfaW5zaWRlX21hcmtlcl9wb3B1cFwiPjxwPicgKyBuYW1lICsgJzwvcD4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyc8cCBjbGFzcz1cImdlbmRlcl9pbnNpZGVfbWFya2VyX3BvcHVwXCI+JytnZW5kZXIrJzwvcD4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyc8cD48aW1nIGNsYXNzPVwiaW1nX2luc2lkZV9tYXJrZXJfcG9wdXBcIiBzcmM9XCInK2ljb24rJ1wiLz48L3A+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sICsnPHAgY2xhc3M9XCJzdGF0dXNfaW5zaWRlX21hcmtlcl9wb3B1cFwiPlwiJytzdGF0dXMrJ1wiPC9wPic7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArJzxwIGNsYXNzPVwiaW50ZXJlc3RlZF9pbnNpZGVfbWFya2VyX3BvcHVwXCI+SW50ZXJlc2FkQCBlbiAnK2ludGVyZXN0ZWQrJzwvcD4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyc8cCBjbGFzcz1cImxhc3R1cGRhdGVfaW5zaWRlX21hcmtlcl9wb3B1cFwiPicrb25saW5lU3RhdHVzKyc8L3A+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sICsnPHAgY2xhc3M9XCJsYXN0dXBkYXRlX2luc2lkZV9tYXJrZXJfcG9wdXBcIj4nK2xhc3RVcGRhdGUrJzwvcD4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIVVzZXJTZXJ2aWNlLnVpZCB8fCBVc2VyU2VydmljZS51aWQhPXVpZCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sICsnPHAgY2xhc3M9XCJtZXNzYWdlX2ljb25faW5zaWRlX21hcmtlcl9wb3B1cFwiPjxpbWcgbmctY2xpY2s9XCJzZW5kX21lc3NhZ2VfdG8oJyt1aWQrJyk7XCIgc3JjPVwiLi9pbWcvbWVzc2FnZV9pY29uLnBuZ1wiIC8+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyc8aW1nIG5nLWNsaWNrPVwib3Blbkludml0YXRpb25zTW9kYWwoJyt1aWQrJyk7XCIgc3JjPVwiLi9pbWcvZHJpbmtfaWNvbi5wbmdcIiAvPjwvcD4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyc8L2E+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb21waWxlZCA9ICRjb21waWxlKGh0bWwpKCRzY29wZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5iaW5kUG9wdXAoY29tcGlsZWRbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgJHNjb3BlLmhpZGVPZmZTY3JlZW5QaW5zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkc2NvcGUuY2hlY2tUYWxrU3RhdHVzKCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNoZWNrVGFsa1N0YXR1cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAvLyRzY29wZS5teUludGVydmFsc1snY2FuVGFsayddID0gJGludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZihTZW1hcGhvcmVTZXJ2aWNlLnRha2VJZkF2YWlsYWJsZShcImNhbl90YWxrXCIpKXtcbiAgICAgICAgICBNZXNzYWdlU2VydmljZS5jaGVja1dob0NhblRhbGsoVXNlclNlcnZpY2UubmFtZSxVc2VyU2VydmljZS5wYXNzd29yZCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgIC8vU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgIHZhciBkYXRhID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCk7XG4gICAgICAgICAgICBpZighKGRhdGEuU3RhdHVzICYmIGRhdGEuU3RhdHVzPT1cImVycm9yXCIpKXtcbiAgICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHVpZCl7XG4gICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2UuY2FuVGFsa1RvVXNlcnNbJ3VpZC0nK3VpZF0gPSAxO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJjYW5fdGFsa1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgLy99LCAyMDAwKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmtleV9wcmVzcyA9IGZ1bmN0aW9uKGV2ZW50LHN0YWdlKXtcbiAgICAgIHZhciBrZXlDb2RlID0gZXZlbnQua2V5Q29kZTtcbiAgICAgIGlmKHN0YWdlPT0ncHJpdmF0ZV9jaGF0Jyl7XG4gICAgICAgIGlmKGtleUNvZGU9PTEzKXtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYoY29yZG92YT09PW51bGwpe1xuXG4gICAgICAgICAgICB9ZWxzZSBpZihjb3Jkb3ZhJiZjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQpe1xuICAgICAgICAgICAgICBjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY2F0Y2goZXJyKSB7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuc2VuZF9tZXNzYWdlX3RvID0gZnVuY3Rpb24odWlkKXtcbiAgICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJvcGVuLW1vZGFsXCIpKXtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICBpZihVc2VyU2VydmljZS51aWQpe1xuICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5jaGVja1dob0NhblRhbGsoVXNlclNlcnZpY2UubmFtZSxVc2VyU2VydmljZS5wYXNzd29yZCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgICAgICAvL1NlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKTtcbiAgICAgICAgICAgICAgICBpZighKGRhdGEuU3RhdHVzICYmIGRhdGEuU3RhdHVzPT1cImVycm9yXCIpKXtcbiAgICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbih1aWQpe1xuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5jYW5UYWxrVG9Vc2Vyc1sndWlkLScrdWlkXSA9IDE7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGlmKCEkc2NvcGUuY2FuVGFsa1RvVXNlcih1aWQpKXtcbiAgICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJvcGVuLW1vZGFsXCIpO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWxlcnRQb3B1cCA9ICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkludml0YSBhbGdvIGRlIHRvbWFyXCIsXG4gICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJEZWJlIHRlbmVyIGFsIG1lbm9zIHVuYSBpbnZpdGFjacOzbiBhIHVuIHRyYWdvIGFjZXB0YWRhIGVudHJlIHVzdGVkIHkgZXN0YSBwZXJzb25hIHBhcmEgcG9kZXIgaGFibGFyLlwiXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBhbGVydFBvcHVwLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGF0ID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGF0Lm90aGVyX3VzZXIgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYXQub3RoZXJfdXNlci51aWQgPSB1aWQ7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGF0Lm1lc3NhZ2VzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGF0Lm5ld190ZXh0X21lc3NhZ2UgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5nZXRVc2VySW5mbyh1aWQpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuUGhvdG8pe1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYXQub3RoZXJfdXNlci5waWN0dXJlX3VybCA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlBob3RvO1xuICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYXQub3RoZXJfdXNlci5waWN0dXJlX3VybCA9IFwiLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYXQub3RoZXJfdXNlci51c2VybmFtZSA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLk5hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGF1dGhvcl91aWQgPSBVc2VyU2VydmljZS51aWQ7XG4gICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2UuZ2V0QWxsTWVzc2FnZXNUb1VzZXIoVXNlclNlcnZpY2UubmFtZSwgVXNlclNlcnZpY2UucGFzc3dvcmQsdWlkLGF1dGhvcl91aWQpLnRoZW4oZnVuY3Rpb24ocmVzcDIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZighKGRhdGEuU3RhdHVzICYmIGRhdGEuU3RhdHVzPT1cImVycm9yXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoYXQubWVzc2FnZXMgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwMik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUubXlJbnRlcnZhbHNbJ3ByaXZhdGVNZXNzYWdlJ10pe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKCRzY29wZS5teUludGVydmFsc1sncHJpdmF0ZU1lc3NhZ2UnXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubXlJbnRlcnZhbHNbJ3ByaXZhdGVNZXNzYWdlJ10gPSAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2UuZ2V0QWxsTWVzc2FnZXNUb1VzZXIoVXNlclNlcnZpY2UubmFtZSwgVXNlclNlcnZpY2UucGFzc3dvcmQsJHNjb3BlLmNoYXQub3RoZXJfdXNlci51aWQsVXNlclNlcnZpY2UudWlkKS50aGVuKGZ1bmN0aW9uKHJlc3AzKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhMiA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3AzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEoZGF0YTIuU3RhdHVzICYmIGRhdGEyLlN0YXR1cz09XCJlcnJvclwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGF0Lm1lc3NhZ2VzID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UoZGF0YTIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW5pZCA9ICRzY29wZS5jaGF0Lm1lc3NhZ2VzWyRzY29wZS5jaGF0Lm1lc3NhZ2VzLmxlbmd0aC0xXS5uaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zY3JvbGxNZShcIm1lc3NhZ2UtXCIrbW5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCd0ZW1wbGF0ZXMvcHJpdmF0ZV9jaGF0Lmh0bWwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXJkd2FyZUJhY2tCdXR0b25DbG9zZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUtaW4tdXAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZm9jdXNGaXJzdElucHV0OiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obW9kYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXItb3B0aW9ucy1tZW51XCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwgPSBtb2RhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwib3Blbi1tb2RhbFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtbmlkID0gJHNjb3BlLmNoYXQubWVzc2FnZXNbJHNjb3BlLmNoYXQubWVzc2FnZXMubGVuZ3RoLTFdLm5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zY3JvbGxNZShcIm1lc3NhZ2UtXCIrbW5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIC8vU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJjYW5fdGFsa1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwib3Blbi1tb2RhbFwiKTtcbiAgICAgICAgICAgIHZhciBhbGVydFBvcHVwID0gJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgICAgICAgICB0aXRsZTogXCJJbmljaWUgc2VzacOzbiBvIGNyZWUgdW5hIG51ZXZhIGN1ZW50YVwiLFxuICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJEZWJlIGVzdGFyIGxvZ3VlYWRvIHBhcmEgcG9kZXIgZW52aWFyIHkgcmVjaWJpciBtZW5zYWplcy5cIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAgIC8vcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgLy9TRU1BRk9STyBPQ1VQQURPXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgICRzY29wZS5jaGVja0lmQ2FuUmVwbHlJbnZpdGF0aW9uID0gZnVuY3Rpb24oaW52aXRhdGlvbil7XG4gICAgICBpZihVc2VyU2VydmljZS51aWQpe1xuICAgICAgICBpZihVc2VyU2VydmljZS51aWQhPWludml0YXRpb24udWlkKXtcbiAgICAgICAgICBpZihpbnZpdGF0aW9uLnN0YXR1cz09XCJFbnZpYWRhXCJ8fGludml0YXRpb24uc3RhdHVzPT1cIlJlY2liaWRhXCIpe1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNoZWNrSWZXYWl0aW5nUmVwbHlGcm9tSW52aXRhdGlvbiA9IGZ1bmN0aW9uKGludml0YXRpb24pe1xuICAgICAgaWYoVXNlclNlcnZpY2UudWlkKXtcbiAgICAgICAgaWYoVXNlclNlcnZpY2UudWlkPT1pbnZpdGF0aW9uLnVpZCl7XG4gICAgICAgICAgaWYoaW52aXRhdGlvbi5zdGF0dXM9PVwiRW52aWFkYVwifHxpbnZpdGF0aW9uLnN0YXR1cz09XCJSZWNpYmlkYVwiKXtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgICRzY29wZS5nZXREcmlua0Nvc3RCeU5pZCA9IGZ1bmN0aW9uKG5pZCl7XG4gICAgICB2YXIgcmVzdWx0ID0gMDtcbiAgICAgIGlmKCRzY29wZS5pbnZpdGF0aW9uLmF2YWlsYWJsZV9kcmlua3Mpe1xuICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi5hdmFpbGFibGVfZHJpbmtzLmZvckVhY2goZnVuY3Rpb24oZHJpbmspIHtcbiAgICAgICAgICBpZihkcmluay5OaWQ9PW5pZCl7XG4gICAgICAgICAgICByZXN1bHQgPSBkcmluay5DcmVkaXRzO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgICRzY29wZS5hY2NlcHRJbnZpdGF0aW9uID0gZnVuY3Rpb24obmlkKXtcbiAgICAgICRzY29wZS5zZW5kX2ludml0YXRpb25fcmVzcG9uc2UoXCJBY2VwdGFkYVwiLG5pZCk7XG4gICAgICAkc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnRhbGsgPSB0cnVlO1xuICAgIH1cblxuICAgICRzY29wZS5yZWZ1c2VJbnZpdGF0aW9uID0gZnVuY3Rpb24obmlkKXtcbiAgICAgICRzY29wZS5zZW5kX2ludml0YXRpb25fcmVzcG9uc2UoXCJSZWNoYXphZGFcIixuaWQpO1xuICAgIH1cblxuICAgICRzY29wZS5jYW5UYWxrVG9Vc2VyID0gZnVuY3Rpb24odWlkKXtcbiAgICAgIGlmKFVzZXJTZXJ2aWNlLnVpZCl7XG4gICAgICAgICAgaWYoTWVzc2FnZVNlcnZpY2UuY2FuVGFsa1RvVXNlcnNbJ3VpZC0nK3VpZF0hPW51bGwpe1xuICAgICAgICAgICAgaWYoTWVzc2FnZVNlcnZpY2UuY2FuVGFsa1RvVXNlcnNbJ3VpZC0nK3VpZF09PTEpe1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG4gICAgJHNjb3BlLnNlbmRfaW52aXRhdGlvbl9yZXNwb25zZSA9IGZ1bmN0aW9uKHJlc3BvbnNlLG5pZCl7XG4gICAgICB2YXIgZXJyb3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVycm9yX2NvbnRhaW5lclwiKTtcbiAgICAgIGVycm9yLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgaWYobmlkID09IG51bGwpe1xuICAgICAgICBlcnJvci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBlcnJvci5pbm5lckhUTUwgPSBcIkh1Ym8gdW4gZXJyb3IuIE5vIHNlIGVuY3VlbnRyYSBlbCBJRCBkZSBpbnZpdGFjacOzblwiO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHZhciBjb3N0ID0gJHNjb3BlLmdldERyaW5rQ29zdEJ5TmlkKCRzY29wZS5pbnZpdGF0aW9uLnNlbGVjdGVkX2RyaW5rKTtcbiAgICAgICAgdmFyIGNyZWRpdHMgPSAkc2NvcGUuaW52aXRhdGlvbi51c2VyX2NyZWRpdHM7XG4gICAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwic3VibWl0LWZvcm1cIikpe1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICBEcmlua1NlcnZpY2Uuc2VuZERyaW5rSW52aXRhdGlvblJlc3BvbnNlKHJlc3BvbnNlLFVzZXJTZXJ2aWNlLm5hbWUsVXNlclNlcnZpY2UucGFzc3dvcmQsbmlkLFVzZXJTZXJ2aWNlLnVpZCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIHZhciBkYXRhID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCk7XG4gICAgICAgICAgICBpZighKGRhdGEuU3RhdHVzICYmIGRhdGEuU3RhdHVzPT1cImVycm9yXCIpKXtcbiAgICAgICAgICAgICAgLy9NZXNzYWdlU2VydmljZS5jYW5UYWxrVG9Vc2Vyc1sndWlkLScrJHNjb3BlLmludml0YXRpb24ub3RoZXJfdXNlci51aWRdID0gbnVsbDtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICBlcnJvci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICBlcnJvci5pbm5lckhUTUwgPSBkYXRhLk1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuc2VuZF9pbnZpdGF0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBlcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXJyb3JfY29udGFpbmVyXCIpO1xuICAgICAgaWYoJHNjb3BlLmludml0YXRpb24uc2VsZWN0ZWRfZHJpbmsgPT0gbnVsbCl7XG4gICAgICAgIGVycm9yLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIGVycm9yLmlubmVySFRNTCA9IFwiRGViZSBzZWxlY2Npb25hciB1bmEgYmViaWRhIGEgaW52aXRhclwiO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHZhciBjb3N0ID0gJHNjb3BlLmdldERyaW5rQ29zdEJ5TmlkKCRzY29wZS5pbnZpdGF0aW9uLnNlbGVjdGVkX2RyaW5rKTtcbiAgICAgICAgdmFyIGNyZWRpdHMgPSAkc2NvcGUuaW52aXRhdGlvbi51c2VyX2NyZWRpdHM7XG4gICAgICAgIGlmKHBhcnNlRmxvYXQoY29zdCk+cGFyc2VGbG9hdChjcmVkaXRzKSl7XG4gICAgICAgICAgZXJyb3Iuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICBlcnJvci5pbm5lckhUTUwgPSBcIkNyw6lkaXRvcyBpbnN1ZmljaWVudGVzLiBQYXJhIHBvZGVyIGludml0YXIgZXN0YSBiZWJpZGEgZGViZSBjb21wcmFyIG3DoXMgY3LDqWRpdG9zXCI7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwic3VibWl0LWZvcm1cIikpe1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgRHJpbmtTZXJ2aWNlLnNlbmREcmlua0ludml0YXRpb25Ub1VzZXIoJHNjb3BlLmludml0YXRpb24uc2VsZWN0ZWRfZHJpbmssJHNjb3BlLmludml0YXRpb24ub3RoZXJfdXNlci51aWQsVXNlclNlcnZpY2UudWlkLFVzZXJTZXJ2aWNlLm5hbWUsVXNlclNlcnZpY2UucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICB2YXIgZGF0YSA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApO1xuICAgICAgICAgICAgICBpZighKGRhdGEuU3RhdHVzICYmIGRhdGEuU3RhdHVzPT1cImVycm9yXCIpKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi51c2VyX2NyZWRpdHMgPSBkYXRhLk5ld0NyZWRpdHM7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmludml0YXRpb24uc2VsZWN0ZWRfZHJpbmsgPSBudWxsO1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmNhblRhbGtUb1VzZXJzWyd1aWQtJyskc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVpZF0gPSBudWxsO1xuICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBlcnJvci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIGVycm9yLmlubmVySFRNTCA9IGRhdGEuTWVzc2FnZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLm9wZW5JbnZpdGF0aW9uc01vZGFsID0gZnVuY3Rpb24odWlkKXtcbiAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwib3Blbi1tb2RhbFwiKSl7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBpZihVc2VyU2VydmljZS51aWQpe1xuICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgJHNjb3BlLmludml0YXRpb24ucmVzcG9uc2UgPSBudWxsO1xuICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVpZCA9IHVpZDtcbiAgICAgICAgICAvL01lc3NhZ2VTZXJ2aWNlLmNhblRhbGtUb1VzZXJzWyd1aWQtJyskc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVpZF0gPSBudWxsO1xuICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLmludml0YXRpb25zID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgJHNjb3BlLmludml0YXRpb24uYXZhaWxhYmxlX2RyaW5rcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLnNlbGVjdGVkX2RyaW5rID0gbnVsbDtcbiAgICAgICAgICBNZXNzYWdlU2VydmljZS5nZXRVc2VySW5mbyh1aWQpLnRoZW4oZnVuY3Rpb24oZGF0YV9yZXNwKXtcbiAgICAgICAgICBpZigkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShkYXRhX3Jlc3ApLlBob3RvKXtcbiAgICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIucGljdHVyZV91cmwgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShkYXRhX3Jlc3ApLlBob3RvO1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJHNjb3BlLmludml0YXRpb24ub3RoZXJfdXNlci5waWN0dXJlX3VybCA9IFwiLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmdcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgJHNjb3BlLmludml0YXRpb24ub3RoZXJfdXNlci51c2VybmFtZSA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKGRhdGFfcmVzcCkuTmFtZTtcbiAgICAgICAgICAgIERyaW5rU2VydmljZS5nZXRBbGxEcmlua3NBdmFpbGFibGUoVXNlclNlcnZpY2UubmFtZSwgVXNlclNlcnZpY2UucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICAgIHZhciBkYXRhID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCk7XG4gICAgICAgICAgICAgIGlmKCEoZGF0YS5TdGF0dXMgJiYgZGF0YS5TdGF0dXM9PVwiZXJyb3JcIikpe1xuICAgICAgICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLmF2YWlsYWJsZV9kcmlua3MgPSBkYXRhLkRyaW5rcztcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi51c2VyX2NyZWRpdHMgPSBkYXRhLlVzZXJDcmVkaXRzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIERyaW5rU2VydmljZS5nZXRBbGxJbnZpdGF0aW9uc1dpdGhVc2VyKFVzZXJTZXJ2aWNlLm5hbWUsIFVzZXJTZXJ2aWNlLnBhc3N3b3JkLCRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIudWlkLFVzZXJTZXJ2aWNlLnVpZCkudGhlbihmdW5jdGlvbihyZXNwMil7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEyID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcDIpO1xuICAgICAgICAgICAgICAgIGlmKCEoZGF0YTIuU3RhdHVzICYmIGRhdGEyLlN0YXR1cz09XCJlcnJvclwiKSl7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi5pbnZpdGF0aW9ucyA9IGRhdGEyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5jaGVja1dob0NhblRhbGsoVXNlclNlcnZpY2UubmFtZSxVc2VyU2VydmljZS5wYXNzd29yZCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCk7XG4gICAgICAgICAgICAgICAgICBpZighKGRhdGEuU3RhdHVzICYmIGRhdGEuU3RhdHVzPT1cImVycm9yXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKHVpZCl7XG4gICAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2UuY2FuVGFsa1RvVXNlcnNbJ3VpZC0nK3VpZF0gPSAxO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZigkc2NvcGUubXlJbnRlcnZhbHNbJ2RyaW5rSW52aXRhdGlvbiddKXtcbiAgICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoJHNjb3BlLm15SW50ZXJ2YWxzWydkcmlua0ludml0YXRpb24nXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5teUludGVydmFsc1snZHJpbmtJbnZpdGF0aW9uJ10gPSAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBEcmlua1NlcnZpY2UuZ2V0QWxsSW52aXRhdGlvbnNXaXRoVXNlcihVc2VyU2VydmljZS5uYW1lLCBVc2VyU2VydmljZS5wYXNzd29yZCwkc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVpZCxVc2VyU2VydmljZS51aWQpLnRoZW4oZnVuY3Rpb24ocmVzcDMpe1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YTMgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwMyk7XG4gICAgICAgICAgICAgICAgICAgIGlmKCEoZGF0YTMuU3RhdHVzICYmIGRhdGEzLlN0YXR1cz09XCJlcnJvclwiKSl7XG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludml0YXRpb24uaW52aXRhdGlvbnMgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShkYXRhMyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2UuY2hlY2tXaG9DYW5UYWxrKFVzZXJTZXJ2aWNlLm5hbWUsVXNlclNlcnZpY2UucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKTtcbiAgICAgICAgICAgICAgICAgICAgICBpZighKGRhdGEuU3RhdHVzICYmIGRhdGEuU3RhdHVzPT1cImVycm9yXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbih1aWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5jYW5UYWxrVG9Vc2Vyc1sndWlkLScrdWlkXSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgICAgICAgICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwoJ3RlbXBsYXRlcy9kcmlua19pbnZpdGF0aW9uLmh0bWwnLCB7XG4gICAgICAgICAgICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICAgICAgICAgICAgaGFyZHdhcmVCYWNrQnV0dG9uQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUtaW4tdXAnLFxuICAgICAgICAgICAgICAgICAgLy9mb2N1c0ZpcnN0SW5wdXQ6IHRydWVcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlci1vcHRpb25zLW1lbnVcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgICAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwgPSBtb2RhbDtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbC5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwib3Blbi1tb2RhbFwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcIm9wZW4tbW9kYWxcIik7XG4gICAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICAgICAgICB0aXRsZTogXCJJbmljaWUgc2VzacOzbiBvIGNyZWUgdW5hIG51ZXZhIGN1ZW50YVwiLFxuICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiRGViZSBlc3RhciBsb2d1ZWFkbyBwYXJhIHBvZGVyIGVudmlhciB5IHJlY2liaXIgaW52aXRhY2lvbmVzLlwiXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICBhbGVydFBvcHVwLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICAgICAgLy9yZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9ZWxzZXtcbiAgICAgICAgLy9TRU1BRk9STyBPQ1VQQURPXG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmNsb3NlX21lc3NhZ2VfbW9kYWwgPSBmdW5jdGlvbigpe1xuICAgICAgaWYoJHNjb3BlLm15SW50ZXJ2YWxzWydwcml2YXRlTWVzc2FnZSddKXtcbiAgICAgICAgJGludGVydmFsLmNhbmNlbCgkc2NvcGUubXlJbnRlcnZhbHNbJ3ByaXZhdGVNZXNzYWdlJ10pO1xuICAgICAgfVxuICAgICAgaWYoJHNjb3BlLm15SW50ZXJ2YWxzWydkcmlua0ludml0YXRpb24nXSl7XG4gICAgICAgICRpbnRlcnZhbC5jYW5jZWwoJHNjb3BlLm15SW50ZXJ2YWxzWydkcmlua0ludml0YXRpb24nXSk7XG4gICAgICB9XG4gICAgICAvL0NhcmdhciBlbCBtb2RhbCBjb24gbGEgaW5mbyBkZWwgdXN1YXJpbyBsb2d1ZWFkbyB5IGNvbiBlbCBzdWJtaXQgYSB1cGRhdGVfdXNlclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgIH1cblxuICAgICRzY29wZS5jbG9zZV9pbnZpdGF0aW9uX21vZGFsID0gZnVuY3Rpb24oKXtcbiAgICAgIGlmKCRzY29wZS5teUludGVydmFsc1sncHJpdmF0ZU1lc3NhZ2UnXSl7XG4gICAgICAgICRpbnRlcnZhbC5jYW5jZWwoJHNjb3BlLm15SW50ZXJ2YWxzWydwcml2YXRlTWVzc2FnZSddKTtcbiAgICAgIH1cbiAgICAgIGlmKCRzY29wZS5teUludGVydmFsc1snZHJpbmtJbnZpdGF0aW9uJ10pe1xuICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKCRzY29wZS5teUludGVydmFsc1snZHJpbmtJbnZpdGF0aW9uJ10pO1xuICAgICAgfVxuICAgICAgLy9DYXJnYXIgZWwgbW9kYWwgY29uIGxhIGluZm8gZGVsIHVzdWFyaW8gbG9ndWVhZG8geSBjb24gZWwgc3VibWl0IGEgdXBkYXRlX3VzZXJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIE1vZGFsU2VydmljZS5jaGVja05vTW9kYWxJc09wZW4oKTtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2VuZF9tZXNzYWdlX29rID0gZnVuY3Rpb24oKXtcbiAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwic3VibWl0LWZvcm1cIikpe1xuICAgICAgICAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgaWYoJHNjb3BlLmNoYXQubmV3X3RleHRfbWVzc2FnZSl7XG4gICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2VuZFRleHRNZXNzYWdlVG9Vc2VyKCRzY29wZS5jaGF0Lm5ld190ZXh0X21lc3NhZ2UsJHNjb3BlLmNoYXQub3RoZXJfdXNlci51aWQsVXNlclNlcnZpY2UudWlkLFVzZXJTZXJ2aWNlLm5hbWUsVXNlclNlcnZpY2UucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm1lc3NhZ2VfdGV4dF9hcmVhXCIpLmlubmVySFRNTD1cIlwiO1xuICAgICAgICAgICAgJHNjb3BlLmNoYXQubmV3X3RleHRfbWVzc2FnZSA9IFwiXCI7XG4gICAgICAgICAgICBNZXNzYWdlU2VydmljZS5nZXRBbGxNZXNzYWdlc1RvVXNlcihVc2VyU2VydmljZS5uYW1lLCBVc2VyU2VydmljZS5wYXNzd29yZCwkc2NvcGUuY2hhdC5vdGhlcl91c2VyLnVpZCxVc2VyU2VydmljZS51aWQpLnRoZW4oZnVuY3Rpb24ocmVzcDIpe1xuICAgICAgICAgICAgICAgICRzY29wZS5jaGF0Lm1lc3NhZ2VzID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcDIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5nZXROYW1lRnJvbVVpZCA9ZnVuY3Rpb24odWlkKXtcbiAgICAgIGlmKFVzZXJTZXJ2aWNlLnVpZD09dWlkKXtcbiAgICAgICAgcmV0dXJuIFVzZXJTZXJ2aWNlLm5hbWU7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgaWYoJHNjb3BlLmNoYXQub3RoZXJfdXNlci51aWQ9PXVpZCl7XG4gICAgICAgICAgcmV0dXJuICRzY29wZS5jaGF0Lm90aGVyX3VzZXIudXNlcm5hbWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuZ2V0TmFtZUZyb21VaWRJbnZpdGF0aW9uID1mdW5jdGlvbih1aWQpe1xuICAgICAgaWYoVXNlclNlcnZpY2UudWlkPT11aWQpe1xuICAgICAgICByZXR1cm4gVXNlclNlcnZpY2UubmFtZTtcbiAgICAgIH1lbHNle1xuICAgICAgICBpZigkc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVpZD09dWlkKXtcbiAgICAgICAgICByZXR1cm4gJHNjb3BlLmludml0YXRpb24ub3RoZXJfdXNlci51c2VybmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS50aW1lQ29udmVydGVyID0gZnVuY3Rpb24oVU5JWF90aW1lc3RhbXApe1xuICAgICAgdmFyIGEgPSBuZXcgRGF0ZShVTklYX3RpbWVzdGFtcCAqIDEwMDApO1xuICAgICAgdmFyIG1vbnRocyA9IFsnRW5lcm8nLCdGZWJyZXJvJywnTWFyem8nLCdBYnJpbCcsJ01heW8nLCdKdW5pbycsJ0p1bGlvJywnQWdvc3RvJywnU2V0aWVtYnJlJywnT2N0dWJyZScsJ05vdmllbWJyZScsJ0RpY2llbWJyZSddO1xuICAgICAgdmFyIHllYXIgPSBhLmdldEZ1bGxZZWFyKCk7XG4gICAgICAvL3ZhciBtb250aCA9IG1vbnRoc1thLmdldE1vbnRoKCldO1xuICAgICAgdmFyIG1vbnRoID0gYS5nZXRNb250aCgpO1xuICAgICAgaWYobW9udGg8MTApe1xuICAgICAgICBtb250aCA9IFwiMFwiK21vbnRoO1xuICAgICAgfVxuICAgICAgdmFyIGRheSA9IGEuZ2V0RGF0ZSgpO1xuICAgICAgaWYoZGF5PDEwKXtcbiAgICAgICAgZGF5ID0gXCIwXCIrZGF5O1xuICAgICAgfVxuICAgICAgdmFyIGhvdXIgPSBhLmdldEhvdXJzKCk7XG4gICAgICBpZihob3VyPDEwKXtcbiAgICAgICAgaG91ciA9IFwiMFwiK2hvdXI7XG4gICAgICB9XG4gICAgICB2YXIgbWluID0gYS5nZXRNaW51dGVzKCk7XG4gICAgICBpZihtaW48MTApe1xuICAgICAgICBtaW4gPSBcIjBcIittaW47XG4gICAgICB9XG4gICAgICB2YXIgc2VjID0gYS5nZXRTZWNvbmRzKCk7XG4gICAgICB2YXIgdGltZSA9IGRheSArICcvJyArIG1vbnRoICsgJy8nICsgeWVhciArICcgJyArIGhvdXIgKyAnOicgKyBtaW47XG4gICAgICByZXR1cm4gdGltZTtcbiAgICB9XG5cblxuXG4gICAgLy8gU3VnZ2VzdGlvblxuICAgICRzY29wZS5tb2RlbCA9IFtdO1xuICAgICRzY29wZS5leHRlcm5hbE1vZGVsID0gW107XG4gICAgJHNjb3BlLnNlbGVjdGVkSXRlbXMgPSBbXTtcbiAgICAkc2NvcGUucHJlc2VsZWN0ZWRTZWFyY2hJdGVtcyA9IFtdO1xuICAgICRzY29wZS5jbGlja2VkVmFsdWVNb2RlbCA9IFwiXCI7XG4gICAgJHNjb3BlLnJlbW92ZWRWYWx1ZU1vZGVsID0gXCJcIjtcblxuXG4gICAgJHNjb3BlLml0ZW1zUmVtb3ZlZCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAkc2NvcGUucmVtb3ZlZFZhbHVlTW9kZWwgPSBjYWxsYmFjaztcbiAgICB9O1xuXG4gICAgJHNjb3BlLnVzZXJfb3B0aW9ucyA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgbWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlci1vcHRpb25zLW1lbnVcIik7XG4gICAgICBpZihtZW51LnN0eWxlLmRpc3BsYXk9PVwiYmxvY2tcIil7XG4gICAgICAgIG1lbnUuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgfWVsc2V7XG4gICAgICAgIC8vY29uc29sZS5sb2coVXNlclNlcnZpY2UubmFtZSk7XG4gICAgICAgIHZhciBuYW1lID0gVXNlclNlcnZpY2UubmFtZTtcbiAgICAgICAgaWYobmFtZT09bnVsbCl7XG4gICAgICAgICAgLy9ObyBlc3RhIGxvZ3VlYWRvXG4gICAgICAgICAgJHNjb3BlLnNob3dfYW5vbnltb3VzX21lbnUoKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgLy9Fc3TDoSBsb2d1ZWFkb1xuICAgICAgICAgICRzY29wZS5zaG93X3VzZXJfbWVudSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLnNob3dfYW5vbnltb3VzX21lbnUgPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXItb3B0aW9ucy1tZW51XCIpO1xuICAgICAgdmFyIGh0bWwgPSBcIjxkaXYgaWQ9J2F1dGhfb3B0aW9ucyc+PGRpdiBjbGFzcz0nbm9uYXV0aC1saW5rJyBuZy1jbGljaz0nc2hvd19sb2dpbl9tb2RhbCgpJz5JbmljaWFyIHNlc2nDs248L2Rpdj5cIjtcbiAgICAgIGh0bWwgPSBodG1sICsgXCI8ZGl2IGNsYXNzPSdub25hdXRoLWxpbmsnIG5nLWNsaWNrPSdzaG93X3NpZ25fdXBfbW9kYWwoKSc+UmVnaXN0cmFyc2U8L2Rpdj48L2Rpdj5cIjtcbiAgICAgIG1lbnUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICRjb21waWxlKG1lbnUpKCRzY29wZSk7IC8vPC0tLS0gcmVjb21waWxhdGlvblxuICAgICAgbWVudS5zdHlsZS5oZWlnaHQgPSAnMTIwcHgnO1xuICAgICAgbWVudS5zdHlsZS53aWR0aCA9ICcxNTBweCc7XG4gICAgICBtZW51LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgfVxuXG4gICAgJHNjb3BlLnNob3dfdXNlcl9tZW51ID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLW9wdGlvbnMtbWVudVwiKTtcbiAgICAgIHZhciBodG1sID0gVXNlclNlcnZpY2UubmFtZSArIFwiPGRpdiBpZD0nYXV0aF9vcHRpb25zJz48ZGl2IGNsYXNzPSd1c2VyLWxvZ2dlZC1saW5rJyBuZy1jbGljaz0nc2hvd19lZGl0X3Byb2ZpbGVfbW9kYWwoKSc+TWkgcGVyZmlsPC9kaXY+XCI7XG4gICAgICAvL2h0bWwgPSBodG1sICsgXCI8ZGl2IGNsYXNzPSd1c2VyLWxvZ2dlZC1saW5rJyBuZy1jbGljaz0nY2hhbmdlX3Bhc3N3b3JkKCknPkNhbWJpYXIgY29udHJhc2XDsWE8L2Rpdj5cIjtcbiAgICAgIGh0bWwgPSBodG1sICsgXCI8ZGl2IGNsYXNzPSd1c2VyLWxvZ2dlZC1saW5rJyBuZy1jbGljaz0nc2lnbl9vdXQoKSc+Q2VycmFyIHNlc2nDs248L2Rpdj48L2Rpdj5cIjtcbiAgICAgIG1lbnUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICRjb21waWxlKG1lbnUpKCRzY29wZSk7IC8vPC0tLS0gcmVjb21waWxhdGlvblxuICAgICAgbWVudS5zdHlsZS5oZWlnaHQgPSAnMjIwcHgnO1xuICAgICAgbWVudS5zdHlsZS53aWR0aCA9ICcyMDBweCc7XG4gICAgICBtZW51LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgfTtcblxuICAgICRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXkgPSBmdW5jdGlvbihuYW1lLHR5cGUsdmFsdWUpe1xuICAgICAgdmFyIGZpZWxkID0gbmV3IEFycmF5KCk7XG4gICAgICBmaWVsZC5uYW1lID0gbmFtZTtcbiAgICAgIGZpZWxkLnR5cGUgPSB0eXBlO1xuICAgICAgZmllbGQudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHJldHVybiBmaWVsZDtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheV93aXRoX3R3b0ZpZWxkcyA9IGZ1bmN0aW9uKG5hbWUsdHlwZSx2YWx1ZSxzZWNvbmRWYWx1ZSl7XG4gICAgICB2YXIgZmllbGQgPSBuZXcgQXJyYXkoKTtcbiAgICAgIGZpZWxkLm5hbWUgPSBuYW1lO1xuICAgICAgZmllbGQudHlwZSA9IHR5cGU7XG4gICAgICBmaWVsZC52YWx1ZSA9IHZhbHVlO1xuICAgICAgZmllbGQuc2Vjb25kVmFsdWUgPSBzZWNvbmRWYWx1ZTtcbiAgICAgIHJldHVybiBmaWVsZDtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmZpeF9mYl9pbWFnZV9saW5rID0gZnVuY3Rpb24odXJsKXtcbiAgICAgIGlmKHVybC5pbmRleE9mKFwiaHR0cDovL2dyYXBoLmZhY2Vib29rLmNvbVwiKSA+PSAwKXtcbiAgICAgICAgdmFyIHBhcnRzID0gdXJsLnNwbGl0KFwiaHR0cDovL2dyYXBoLmZhY2Vib29rLmNvbVwiKTtcbiAgICAgICAgdmFyIG5ld1VybCA9IFwiaHR0cDovL2dyYXBoLmZhY2Vib29rLmNvbVwiK3BhcnRzWzFdO1xuICAgICAgICByZXR1cm4gbmV3VXJsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHVybDtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmxvZ19pbiA9IGZ1bmN0aW9uKHVzZXIsIHBhc3N3b3JkKXtcbiAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwic3VibWl0LWZvcm1cIikpe1xuICAgICAgICBpZihDb25uZWN0aXZpdHlTZXJ2aWNlLmlzT25saW5lKCkpe1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICB2YXIgZmllbGRzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIlVzdWFyaW9cIixcIm5vdE51bGxcIix1c2VyKSk7XG4gICAgICAgICAgZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIkNvbnRyYXNlw7FhXCIsXCJub3ROdWxsXCIscGFzc3dvcmQpKTtcbiAgICAgICAgICBpZihFcnJvclNlcnZpY2UuY2hlY2tfZmllbGRzKGZpZWxkcyxcImVycm9yX2NvbnRhaW5lclwiKSl7XG4gICAgICAgICAgICBBdXRoU2VydmljZS5sb2dfaW4odXNlcixwYXNzd29yZCkudGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgICAgIGlmKEVycm9yU2VydmljZS5odHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWwocmVzcCxcImVycm9yX2NvbnRhaW5lclwiKSl7XG4gICAgICAgICAgICAgICAgcGhvdG8gPSAkc2NvcGUuZml4X2ZiX2ltYWdlX2xpbmsoJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuUGhvdG8pO1xuICAgICAgICAgICAgICAgIGlmKHBob3RvPT1cImFub25cIil7XG4gICAgICAgICAgICAgICAgICBwaG90bz1cInVybCguL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZylcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVXNlclNlcnZpY2Uuc2F2ZV91c2VyX2RhdGEoJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuTmFtZSwgJHNjb3BlLm5vbmF1dGgucGFzc3dvcmQsIHBob3RvLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5TaG93TG9jYXRpb24sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlVpZCwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuRXN0YWRvLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5HZW5kZXIsICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkludGVyZXN0ZWRJbik7XG4gICAgICAgICAgICAgICAgREJTZXJ2aWNlLnNhdmVVc2VyKCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLk5hbWUsJHNjb3BlLm5vbmF1dGgucGFzc3dvcmQscGhvdG8sJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuU2hvd0xvY2F0aW9uLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlVpZCwkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5Fc3RhZG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkdlbmRlciwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2V0X3VzZXJfcGljdHVyZSgxKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgICRzY29wZS5jbG9zZV9sb2dpbl9tb2RhbCgpO1xuICAgICAgICAgICAgICAgICRzY29wZS5zZW5kVXNlckxvY2F0aW9uKCk7XG4gICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAvL2FsZXJ0KFwiRXJyb3IgZW4gc2lnbl9pblwiKTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgIEVycm9yU2VydmljZS5zaG93X2Vycm9yX21lc3NhZ2UoXCJlcnJvcl9jb250YWluZXJcIixyZXNwLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgUG9wVXBTZXJ2aWNlLnNob3dfYWxlcnQoXCJTaW4gY29uZXhpw7NuIGEgaW50ZXJuZXRcIixcIlBhcmEgaW5pY2lhciBzZXNpw7NuIGRlYmUgZXN0YXIgY29uZWN0YWRvIGEgaW50ZXJuZXRcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUubG9nX2luX2JhY2tncm91bmQgPSBmdW5jdGlvbih1c2VyLCBwYXNzd29yZCl7XG4gICAgICBBdXRoU2VydmljZS5sb2dfaW4odXNlcixwYXNzd29yZCkudGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIGlmKEVycm9yU2VydmljZS5odHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfYWpheChyZXNwKSl7XG4gICAgICAgICAgcGhvdG8gPSAkc2NvcGUuZml4X2ZiX2ltYWdlX2xpbmsoJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuUGhvdG8pO1xuICAgICAgICAgIGlmKHBob3RvPT1cImFub25cIil7XG4gICAgICAgICAgICBwaG90bz1cInVybCguL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZylcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgVXNlclNlcnZpY2Uuc2F2ZV91c2VyX2RhdGEoJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuTmFtZSwgcGFzc3dvcmQsIHBob3RvLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5TaG93TG9jYXRpb24sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlVpZCwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuRXN0YWRvLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5HZW5kZXIsICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkludGVyZXN0ZWRJbik7XG4gICAgICAgICAgREJTZXJ2aWNlLnNhdmVVc2VyKCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLk5hbWUscGFzc3dvcmQscGhvdG8sJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuU2hvd0xvY2F0aW9uLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlVpZCwkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5Fc3RhZG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkdlbmRlciwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuSW50ZXJlc3RlZEluKTtcblxuICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDEpO1xuICAgICAgICAgICRzY29wZS5zZW5kVXNlckxvY2F0aW9uKCk7XG4gICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgIH0sIGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAvL0Vycm9yU2VydmljZS5zaG93X2Vycm9yX21lc3NhZ2VfcG9wdXAocmVzcC5zdGF0dXNUZXh0KTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2VuZFVzZXJMb2NhdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZihTZW1hcGhvcmVTZXJ2aWNlLnRha2VJZkF2YWlsYWJsZShcInN1Ym1pdC1sb2NhdGlvblwiKSl7XG4gICAgICAgIGlmKFVzZXJTZXJ2aWNlLnNob3dfbG9jYXRpb249PTEpe1xuICAgICAgICAgIHZhciBwb3NPcHRpb25zID0ge3RpbWVvdXQ6IDEwMDAwLCBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWV9O1xuICAgICAgICAgICRjb3Jkb3ZhR2VvbG9jYXRpb25cbiAgICAgICAgICAgIC5nZXRDdXJyZW50UG9zaXRpb24ocG9zT3B0aW9ucylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICAgICAgICBQaW5TZXJ2aWNlLnNlbmRVc2VyTG9jYXRpb24ocG9zaXRpb24uY29vcmRzLmxhdGl0dWRlLHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGUsVXNlclNlcnZpY2UubmFtZSxVc2VyU2VydmljZS5wYXNzd29yZCxVc2VyU2VydmljZS51aWQpLnRoZW4oZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgICAgIGlmKEVycm9yU2VydmljZS5odHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfYWpheChyZXNwKSl7XG4gICAgICAgICAgICAgICAgICBMb2NhdGlvbnNTZXJ2aWNlLnNhdmVfbGFzdF91c2VyX3Bvc2l0aW9uKHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZSxwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlKTtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5sb2FkUGluc0xheWVyKCk7XG4gICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1sb2NhdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtbG9jYXRpb25cIik7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWxvY2F0aW9uXCIpO1xuICAgICAgICAgICAgICAkc2NvcGUubG9hZFBpbnNMYXllcigpO1xuICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtbG9jYXRpb25cIik7XG4gICAgICAgICAgJHNjb3BlLmxvYWRQaW5zTGF5ZXIoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuXG5cbiAgICAkc2NvcGUuc2lnbl9vdXQgPSBmdW5jdGlvbigpe1xuICAgICAgVXNlclNlcnZpY2UuZXJhc2VfdXNlcl9kYXRhKCk7XG4gICAgICBEQlNlcnZpY2UuZXJhc2VVc2VyKCk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMCk7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXItb3B0aW9ucy1tZW51XCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG4gICAgfVxuXG4gICAgJHNjb3BlLnNob3dfZWRpdF9wcm9maWxlX21vZGFsID0gZnVuY3Rpb24oKXtcbiAgICAgIC8vQ2FyZ2FyIGVsIG1vZGFsIGNvbiBsYSBpbmZvIGRlbCB1c3VhcmlvIGxvZ3VlYWRvIHkgY29uIGVsIHN1Ym1pdCBhIGVkaXRfcHJvZmlsZV9va1xuICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJvcGVuLW1vZGFsXCIpKXtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICRzY29wZS5uZXd1c2VyID0gbmV3IEFycmF5KCk7XG4gICAgICAgICRzY29wZS5uZXd1c2VyLmVtYWlsID0gVXNlclNlcnZpY2UuZW1haWw7XG4gICAgICAgICRzY29wZS5uZXd1c2VyLmdlbmRlciA9IFVzZXJTZXJ2aWNlLmdlbmRlcjtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIudXNlcm5hbWUgPSBVc2VyU2VydmljZS5uYW1lO1xuICAgICAgICAkc2NvcGUubmV3dXNlci5pbnRlcmVzdGVkID0gVXNlclNlcnZpY2UuaW50ZXJlc3RlZDtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIuc3RhdHVzID0gVXNlclNlcnZpY2Uuc3RhdHVzO1xuICAgICAgICAkc2NvcGUubmV3dXNlci5zaG93X2xvY2F0aW9uID0gVXNlclNlcnZpY2Uuc2hvd19sb2NhdGlvbjtcbiAgICAgICAgJHNjb3BlLmFjdHVhbF9waG90byA9IFVzZXJTZXJ2aWNlLnBpY3R1cmVfdXJsO1xuICAgICAgICBpZigkc2NvcGUuYWN0dWFsX3Bob3RvIT1udWxsKXtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgJHNjb3BlLmFjdHVhbF9waG90byA9IFwiLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmdcIjtcbiAgICAgICAgfVxuICAgICAgICBpZigkc2NvcGUuYWN0dWFsX3Bob3RvPT1cInVybCguL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZylcIil7XG4gICAgICAgICAgJHNjb3BlLmFjdHVhbF9waG90byA9IFwiLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmdcIjtcbiAgICAgICAgfVxuICAgICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgICAgICAgaWYoVmFsaWRhdGlvblNlcnZpY2UuaXNNb2JpbGVEZXZpY2UoKSl7XG4gICAgICAgICAgICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwoJ3RlbXBsYXRlcy9lZGl0X3Byb2ZpbGVfd2l0aF9waG90by5odG1sJywge1xuICAgICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICAgICAgaGFyZHdhcmVCYWNrQnV0dG9uQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogJ3NsaWRlLWluLXVwJyxcbiAgICAgICAgICAgICAgICAvL2ZvY3VzRmlyc3RJbnB1dDogdHJ1ZVxuICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLW9wdGlvbnMtbWVudVwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsID0gbW9kYWw7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbC5zaG93KCk7XG4gICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcIm9wZW4tbW9kYWxcIik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCd0ZW1wbGF0ZXMvZWRpdF9wcm9maWxlX3dpdGhfcGhvdG9fZGVza3RvcC5odG1sJywge1xuICAgICAgICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICAgICAgICBoYXJkd2FyZUJhY2tCdXR0b25DbG9zZTogZmFsc2UsXG4gICAgICAgICAgICAgIGFuaW1hdGlvbjogJ3NsaWRlLWluLXVwJyxcbiAgICAgICAgICAgICAgLy9mb2N1c0ZpcnN0SW5wdXQ6IHRydWVcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obW9kYWwpIHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlci1vcHRpb25zLW1lbnVcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwgPSBtb2RhbDtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwib3Blbi1tb2RhbFwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgJHNjb3BlLnJlYWRVUkwgPSBmdW5jdGlvbiAoaW5wdXQsdHlwZSkge1xuICAgICAgaWYgKGlucHV0LmZpbGVzICYmIGlucHV0LmZpbGVzWzBdKSB7XG4gICAgICAgIGlmKHR5cGU9PTEpe1xuICAgICAgICAgICRzY29wZS5uZXd1c2VyLnBpY3R1cmVfdXJsID0gaW5wdXQuZmlsZXNbMF07XG4gICAgICAgICAgICB9ZWxzZSBpZiAodHlwZT09Mil7XG4gICAgICAgICAgJHNjb3BlLmNvbW1lbnQucGhvdG8gPSBpbnB1dC5maWxlc1swXTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgJHNjb3BlLnJlcG9ydC5maWxlID0gaW5wdXQuZmlsZXNbMF07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJteUltYWdlXCIpLnNyYyA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChpbnB1dC5maWxlc1swXSk7XG4gICAgfVxuXG4gICAgfVxuXG4gICAgJHNjb3BlLmNsb3NlX2VkaXRfcHJvZmlsZV9tb2RhbCA9IGZ1bmN0aW9uKCl7XG4gICAgICAvL0NhcmdhciBlbCBtb2RhbCBjb24gbGEgaW5mbyBkZWwgdXN1YXJpbyBsb2d1ZWFkbyB5IGNvbiBlbCBzdWJtaXQgYSB1cGRhdGVfdXNlclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgIH1cblxuICAgICRzY29wZS5lZGl0X3Byb2ZpbGVfb2sgPSBmdW5jdGlvbigpe1xuICAgICAgJHNjb3BlLmVkaXRfcHJvZmlsZSgpO1xuICAgIH1cblxuICAgICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlID0gZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgaWYocmVzcG9uc2UuZGF0YSl7XG4gICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuZWRpdF9wcm9maWxlID0gZnVuY3Rpb24oKXtcbiAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwic3VibWl0LWZvcm1cIikpe1xuICAgICAgICBpZihDb25uZWN0aXZpdHlTZXJ2aWNlLmlzT25saW5lKCkpe1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAvKnZhciBmaWVsZHMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiQ29ycmVvIGVsZWN0csOzbmljb1wiLFwiZW1haWxcIixuZXdfZW1haWwpKTtcbiAgICAgICAgICAvL2ZpZWxkcy5wdXNoKCRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXkoXCJDb250cmFzZcOxYVwiLFwibm90TnVsbFwiLHBhc3N3b3JkKSk7XG4gICAgICAgICAgZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIkPDqWR1bGEgZGUgSWRlbnRpZGFkXCIsXCJpZGRvY191eVwiLGlkX2RvYykpO1xuICAgICAgICAgIGZpZWxkcy5wdXNoKCRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXkoXCJOb21icmUgeSBhcGVsbGlkb1wiLFwidHdvX3dvcmRzXCIsZnVsbG5hbWUpKTsqL1xuICAgICAgICAgIC8qaWYoRXJyb3JTZXJ2aWNlLmNoZWNrX2ZpZWxkcyhmaWVsZHMsXCJlcnJvcl9jb250YWluZXJcIikpeyovXG4gICAgICAgICAgJHNjb3BlLm5ld3VzZXIucGFzc3dvcmQgPSBVc2VyU2VydmljZS5wYXNzd29yZDtcbiAgICAgICAgICAgIHZhciBlZGl0X3JlcXVlc3QgPSBBdXRoU2VydmljZS5lZGl0X3VzZXIoJHNjb3BlLm5ld3VzZXIpO1xuICAgICAgICAgICAgaWYoJHNjb3BlLm5ld3VzZXIucGljdHVyZV91cmw9PW51bGwgfHwgJHNjb3BlLm5ld3VzZXIucGljdHVyZV91cmw9PVwiXCIgfHwgIVZhbGlkYXRpb25TZXJ2aWNlLmlzTW9iaWxlRGV2aWNlKCkpe1xuICAgICAgICAgICAgICBlZGl0X3JlcXVlc3Quc3VjY2VzcyhmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlbnRfbGFiZWxcIikuaW5uZXJIVE1MID0gXCJFbnZpYWRvOiAxMDAlXCI7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXNwKTtcbiAgICAgICAgICAgICAgICBpZihFcnJvclNlcnZpY2UuaHR0cF9yZXNwb25zZV9pc19zdWNjZXNzZnVsKHJlc3AsXCJlcnJvcl9jb250YWluZXJcIikpe1xuICAgICAgICAgICAgICAgICAgVXNlclNlcnZpY2Uuc2F2ZV91c2VyX2RhdGEoJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuTmFtZSwgJHNjb3BlLm5ld3VzZXIucGFzc3dvcmQsICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlBob3RvLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5TaG93TG9jYXRpb24sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlVpZCwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuRXN0YWRvLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5HZW5kZXIsICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkludGVyZXN0ZWRJbik7XG4gICAgICAgICAgICAgICAgICBEQlNlcnZpY2Uuc2F2ZVVzZXIoJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuTmFtZSwkc2NvcGUubmV3dXNlci5wYXNzd29yZCwkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5QaG90bywkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5TaG93TG9jYXRpb24sJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuVWlkLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkVzdGFkbywgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuR2VuZGVyLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5JbnRlcmVzdGVkSW4pO1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlX2VkaXRfcHJvZmlsZV9tb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrX3VzZXJfbG9nZ2VkKCk7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLGNvbmZpZyl7XG4gICAgICAgICAgICAgICAgRXJyb3JTZXJ2aWNlLnNob3dfZXJyb3JfbWVzc2FnZShcImVycm9yX2NvbnRhaW5lclwiLHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICBlZGl0X3JlcXVlc3QudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UocmVzdWx0LnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBpZihFcnJvclNlcnZpY2UuaHR0cF9kYXRhX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWwoZGF0YSxcImVycm9yX2NvbnRhaW5lclwiKSl7XG4gICAgICAgICAgICAgICAgICBkYXRhID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICBVc2VyU2VydmljZS5zYXZlX3VzZXJfZGF0YShkYXRhLk5hbWUsICRzY29wZS5uZXd1c2VyLnBhc3N3b3JkLCBkYXRhLlBob3RvLCBkYXRhLlNob3dMb2NhdGlvbiwgZGF0YS5VaWQsIGRhdGEuRXN0YWRvLCBkYXRhLkdlbmRlciwgZGF0YS5JbnRlcmVzdGVkSW4pO1xuICAgICAgICAgICAgICAgICAgREJTZXJ2aWNlLnNhdmVVc2VyKGRhdGEuTmFtZSwkc2NvcGUubmV3dXNlci5wYXNzd29yZCxkYXRhLlBob3RvLGRhdGEuU2hvd0xvY2F0aW9uLGRhdGEuVWlkLGRhdGEuRXN0YWRvLCBkYXRhLkdlbmRlciwgZGF0YS5JbnRlcmVzdGVkSW4pO1xuICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlX2VkaXRfcHJvZmlsZV9tb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrX3VzZXJfbG9nZ2VkKCk7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgICAgIHZhciBhbGVydCA9IFwiQ8OzZGlnbzogXCIgKyBlcnJvci5jb2RlO1xuICAgICAgICAgICAgICAgIGFsZXJ0ID0gYWxlcnQgKyBcIiBPcmlnZW46IFwiICsgZXJyb3Iuc291cmNlO1xuICAgICAgICAgICAgICAgIGFsZXJ0ID0gYWxlcnQgKyBcIiBEZXN0aW5vOiBcIiArIGVycm9yLnRhcmdldDtcbiAgICAgICAgICAgICAgICBhbGVydCA9IGFsZXJ0ICsgXCIgaHR0cF9zdGF0dXM6IFwiICsgZXJyb3IuaHR0cF9zdGF0dXM7XG4gICAgICAgICAgICAgICAgYWxlcnQgPSBhbGVydCArIFwiIEJvZHk6IFwiICsgZXJyb3IuYm9keTtcbiAgICAgICAgICAgICAgICBhbGVydCA9IGFsZXJ0ICsgXCIgRXhjZXB0aW9uOiBcIiArIGVycm9yLmV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgICBFcnJvclNlcnZpY2Uuc2hvd19lcnJvcl9tZXNzYWdlKFwiZXJyb3JfY29udGFpbmVyXCIsXCJIdWJvIHVuIGVycm9yIGVuIGVsIGVudsOtbzogXCIgKyBhbGVydCk7XG4gICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24ocHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXBsb2FkUHJvZ3Jlc3MgPSAocHJvZ3Jlc3MubG9hZGVkIC8gcHJvZ3Jlc3MudG90YWwpICogMTAwO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlbnRfbGFiZWxcIikuaW5uZXJIVE1MID0gXCJFbnZpYWRvOiBcIiArIE1hdGgucm91bmQoJHNjb3BlLnVwbG9hZFByb2dyZXNzKSArIFwiJVwiO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIC8qfWVsc2V7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICB9Ki9cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICBQb3BVcFNlcnZpY2Uuc2hvd19hbGVydChcIlNpbiBjb25leGnDs24gYSBpbnRlcm5ldFwiLFwiUGFyYSBlZGl0YXIgc3UgcGVyZmlsIGRlYmUgZXN0YXIgY29uZWN0YWRvIGEgaW50ZXJuZXRcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuICAgICRzY29wZS5zaG93X2xvZ2luX21vZGFsID0gZnVuY3Rpb24oKXtcbiAgICAgIC8vQ2FyZ2FyIGVsIG1vZGFsIGNvbiBlbCBmb3JtIGRlIGxvZ2luIHkgYWhpIGxsYW1hIGFsIHNpZ25faW5cbiAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwib3Blbi1tb2RhbFwiKSl7XG4gICAgICAgICRzY29wZS5ub25hdXRoID0gbmV3IEFycmF5KCk7XG4gICAgICAgICRzY29wZS5ub25hdXRoLnVzZXIgPSBcIlwiO1xuICAgICAgICAkc2NvcGUubm9uYXV0aC5wYXNzd29yZCA9IFwiXCI7XG4gICAgICAgIE1vZGFsU2VydmljZS5jaGVja05vTW9kYWxJc09wZW4oKTtcbiAgICAgICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCd0ZW1wbGF0ZXMvbG9nX2luLmh0bWwnLCB7XG4gICAgICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICAgICAgaGFyZHdhcmVCYWNrQnV0dG9uQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUtaW4tdXAnLFxuICAgICAgICAgICAgLy9mb2N1c0ZpcnN0SW5wdXQ6IHRydWVcbiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICAgICAgICRzY29wZS5oaWRlX3NwZWNpYWxfZGl2cygpO1xuICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwgPSBtb2RhbDtcbiAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJvcGVuLW1vZGFsXCIpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsLnNob3coKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUubG9naW5fb2sgPSBmdW5jdGlvbigpe1xuICAgICAgJHNjb3BlLmxvZ19pbigkc2NvcGUubm9uYXV0aC51c2VyLCRzY29wZS5ub25hdXRoLnBhc3N3b3JkKTtcbiAgICB9XG5cbiAgICAkc2NvcGUuY2xvc2VfbG9naW5fbW9kYWwgPSBmdW5jdGlvbigpe1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgIH1cblxuXG5cbiAgICAkc2NvcGUuc2hvd19zaWduX3VwX21vZGFsID0gZnVuY3Rpb24oKXtcbiAgICAgIC8vY2FyZ2FyIGVsIG1vZGFsIGNvbiBlbCBmb3JtIGRlIHNpZ25fdXAgeSBkZSBhaGkgbGxhbWFyIGFsIHNpZ25fdXBcbiAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwib3Blbi1tb2RhbFwiKSl7XG4gICAgICAgICRzY29wZS5uZXd1c2VyID0gbmV3IEFycmF5KCk7XG4gICAgICAgICRzY29wZS5uZXd1c2VyLmVtYWlsID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIucGFzc3dvcmQgPSBcIlwiO1xuICAgICAgICAkc2NvcGUubmV3dXNlci5mdWxsbmFtZSA9IFwiXCI7XG4gICAgICAgICRzY29wZS5uZXd1c2VyLmlkX2RvYyA9IFwiXCI7XG4gICAgICAgICRzY29wZS5uZXd1c2VyLnRlbGVwaG9uZSA9IFwiXCI7XG4gICAgICAgICRzY29wZS5uZXd1c2VyLnBob3RvID0gXCJcIjtcbiAgICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgICAgICBpZihWYWxpZGF0aW9uU2VydmljZS5pc01vYmlsZURldmljZSgpKXtcbiAgICAgICAgICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwoJ3RlbXBsYXRlcy9zaWduX3VwLmh0bWwnLCB7XG4gICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICAgIGhhcmR3YXJlQmFja0J1dHRvbkNsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUtaW4tdXAnLFxuICAgICAgICAgICAgICAvL2ZvY3VzRmlyc3RJbnB1dDogdHJ1ZVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihtb2RhbCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5oaWRlX3NwZWNpYWxfZGl2cygpO1xuICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbCA9IG1vZGFsO1xuICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwib3Blbi1tb2RhbFwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICRpb25pY01vZGFsLmZyb21UZW1wbGF0ZVVybCgndGVtcGxhdGVzL3NpZ25fdXBfZGVza3RvcC5odG1sJywge1xuICAgICAgICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICAgICAgICBoYXJkd2FyZUJhY2tCdXR0b25DbG9zZTogZmFsc2UsXG4gICAgICAgICAgICAgIGFuaW1hdGlvbjogJ3NsaWRlLWluLXVwJyxcbiAgICAgICAgICAgICAgLy9mb2N1c0ZpcnN0SW5wdXQ6IHRydWVcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obW9kYWwpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaGlkZV9zcGVjaWFsX2RpdnMoKTtcbiAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwgPSBtb2RhbDtcbiAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcIm9wZW4tbW9kYWxcIik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsLnNob3coKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuY2xvc2Vfc2lnbl91cF9tb2RhbCA9IGZ1bmN0aW9uKCl7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLnNpZ25fdXAgPSBmdW5jdGlvbigpe1xuICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJzdWJtaXQtZm9ybVwiKSl7XG4gICAgICAgIGlmKENvbm5lY3Rpdml0eVNlcnZpY2UuaXNPbmxpbmUoKSl7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgIHZhciBmaWVsZHMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAvKmZpZWxkcy5wdXNoKCRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXkoXCJDb3JyZW8gZWxlY3Ryw7NuaWNvXCIsXCJlbWFpbFwiLCRzY29wZS5uZXd1c2VyLmVtYWlsKSk7XG4gICAgICAgICAgZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIkNvbnRyYXNlw7FhXCIsXCJub3ROdWxsXCIsJHNjb3BlLm5ld3VzZXIucGFzc3dvcmQpKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiVXN1YXJpb1wiLFwibm90TnVsbFwiLCRzY29wZS5uZXd1c2VyLnVzZXJuYW1lKSk7XG4gICAgICAgICAgZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIkfDqW5lcm9cIixcIm5vdE51bGxcIiwkc2NvcGUubmV3dXNlci5nZW5kZXIpKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiSW50ZXJlc2FkbyBlblwiLFwibm90TnVsbFwiLCRzY29wZS5uZXd1c2VyLmludGVyZXN0ZWQpKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiRXN0YWRvXCIsXCJub3ROdWxsXCIsJHNjb3BlLm5ld3VzZXIuc3RhdHVzKSk7XG4gICAgICAgICAgZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIk1vc3RyYXIgdWJpY2FjacOzblwiLFwibm90TnVsbFwiLCRzY29wZS5uZXd1c2VyLnNob3dfbG9jYXRpb24pKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5X3dpdGhfdHdvRmllbGRzKFwiJ0NvbnRyYXNlw7FhJyB5ICdDb25maXJtYXIgY29udHJhc2XDsWEnXCIsXCJlcXVhbHNUb1wiLCRzY29wZS5uZXd1c2VyLnBhc3N3b3JkLCAkc2NvcGUubmV3dXNlci5yZXBhc3N3b3JkKSk7Ki9cbiAgICAgICAgICAvL2lmKEVycm9yU2VydmljZS5jaGVja19maWVsZHMoZmllbGRzLFwiZXJyb3JfY29udGFpbmVyXCIpKXtcbiAgICAgICAgICAgIGlmKCRzY29wZS5uZXd1c2VyLnBpY3R1cmVfdXJsIT1udWxsICYmICRzY29wZS5uZXd1c2VyLnBpY3R1cmVfdXJsIT1cIlwiICYmIFZhbGlkYXRpb25TZXJ2aWNlLmlzTW9iaWxlRGV2aWNlKCkpe1xuICAgICAgICAgICAgICBBdXRoU2VydmljZS5jcmVhdGVfdXNlcigkc2NvcGUubmV3dXNlcikudGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlbnRfbGFiZWxcIikuaW5uZXJIVE1MID0gXCJFbnZpYWRvOiAxMDAlXCI7XG4gICAgICAgICAgICAgICAgaWYoRXJyb3JTZXJ2aWNlLmh0dHBfZGF0YV9yZXNwb25zZV9pc19zdWNjZXNzZnVsKGRhdGEsXCJlcnJvcl9jb250YWluZXJcIikpe1xuICAgICAgICAgICAgICAgICAgZGF0YSA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgVXNlclNlcnZpY2Uuc2F2ZV91c2VyX2RhdGEoZGF0YS5uYW1lLCBkYXRhLmVtYWlsLCAkc2NvcGUubmV3dXNlci5wYXNzd29yZCwgZGF0YS5pZGVudGl0eV9kb2N1bWVudCwgZGF0YS5waG9uZSwgZGF0YS5waWN0dXJlX3VybCk7XG4gICAgICAgICAgICAgICAgICBVc2VyU2VydmljZS5zYXZlX3VzZXJfZGF0YShkYXRhLk5hbWUsICRzY29wZS5uZXd1c2VyLnBhc3N3b3JkLCBkYXRhLlBob3RvLCBkYXRhLlNob3dMb2NhdGlvbiwgZGF0YS5VaWQsIGRhdGEuRXN0YWRvLCBkYXRhLkdlbmRlciwgZGF0YS5JbnRlcmVzdGVkSW4pO1xuICAgICAgICAgICAgICAgICAgREJTZXJ2aWNlLnNhdmVVc2VyKGRhdGEuTmFtZSxwYXNzd29yZCxkYXRhLlBob3RvLGRhdGEuU2hvd0xvY2F0aW9uLGRhdGEuVWlkLGRhdGEuRXN0YWRvLCBkYXRhLkdlbmRlciwgZGF0YS5JbnRlcmVzdGVkSW4pO1xuICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlX2VkaXRfcHJvZmlsZV9tb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLmNoZWNrX3VzZXJfbG9nZ2VkKCk7XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5jcmVhdGVfdXNlcigkc2NvcGUubmV3dXNlcikudGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgICAgICAgaWYoRXJyb3JTZXJ2aWNlLmh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bChyZXNwLFwiZXJyb3JfY29udGFpbmVyXCIpKXtcbiAgICAgICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLnNhdmVfdXNlcl9kYXRhKCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLk5hbWUsICRzY29wZS5uZXd1c2VyLnBhc3N3b3JkLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5QaG90bywgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuU2hvd0xvY2F0aW9uLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5VaWQsICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkVzdGFkbywgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuR2VuZGVyLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5JbnRlcmVzdGVkSW4pO1xuICAgICAgICAgICAgICAgICAgREJTZXJ2aWNlLnNhdmVVc2VyKCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLk5hbWUsJHNjb3BlLm5ld3VzZXIucGFzc3dvcmQsJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuUGhvdG8sJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuU2hvd0xvY2F0aW9uLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlVpZCwkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5Fc3RhZG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkdlbmRlciwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICAgICAgICAgIC8vJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMSk7XG4gICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY2xvc2Vfc2lnbl91cF9tb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiVXN1YXJpbyBjcmVhZG8gY29uIMOpeGl0b1wiLFxuICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5tZXNzYWdlXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jaGVja191c2VyX2xvZ2dlZCgpO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgRXJyb3JTZXJ2aWNlLnNob3dfZXJyb3JfbWVzc2FnZShcImVycm9yX2NvbnRhaW5lclwiLHJlc3Auc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIC8qfWVsc2V7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICB9Ki9cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICBQb3BVcFNlcnZpY2Uuc2hvd19hbGVydChcIlNpbiBjb25leGnDs24gYSBpbnRlcm5ldFwiLFwiUGFyYSBpbmljaWFyIHJlZ2lzdHJhcnNlIGRlYmUgZXN0YXIgY29uZWN0YWRvIGEgaW50ZXJuZXRcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuc2lnbl91cF9vayA9IGZ1bmN0aW9uKCl7XG4gICAgICAvL2NvbnNvbGUubG9nKCRzY29wZS5uZXd1c2VyKTtcbiAgICAgICRzY29wZS5zaWduX3VwKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNoZWNrX3VzZXJfbG9nZ2VkID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBuYW1lID0gVXNlclNlcnZpY2UubmFtZTtcbiAgICAgIGlmKG5hbWU9PW51bGwpe1xuICAgICAgICAgIC8vU2kgSGF5IHVuIHVzdWFyaW8gZ3VhcmRhZG9cbiAgICAgICAgICB2YXIgdXNlciA9IERCU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICAgdXNlci50aGVuKGZ1bmN0aW9uIChkb2MpIHtcbiAgICAgICAgICAgIGlmKGRvYy5uYW1lIT1udWxsICYmIGRvYy5uYW1lIT1cIlwiICYmIGRvYy5uYW1lIT1cInVuZGVmaW5lZFwiKXtcbiAgICAgICAgICAgICAgJHNjb3BlLmxvZ19pbl9iYWNrZ3JvdW5kKGRvYy5uYW1lLCBkb2MucGFzc3dvcmQpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDApO1xuICAgICAgICAgIH0pO1xuICAgICAgfWVsc2V7XG4gICAgICAgIC8vRXN0w6EgbG9ndWVhZG9cbiAgICAgICAgaWYoVXNlclNlcnZpY2UucGljdHVyZV91cmw9PW51bGwgfHwgVXNlclNlcnZpY2UucGljdHVyZV91cmw9PVwiXCIpe1xuICAgICAgICAgIC8vRWwgdXN1YXJpbyBubyB0aWVuZSBmb3RvIGRlZmluaWRhXG4gICAgICAgICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIC8vRWwgdXN1YXJpbyB0aWVuZSBmb3RvXG4gICAgICAgICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuc2V0X29mZmxpbmVfdXNlciA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgbmFtZSA9IFVzZXJTZXJ2aWNlLm5hbWU7XG4gICAgICBpZihuYW1lPT1udWxsKXtcbiAgICAgICAgICAvL1NpIEhheSB1biB1c3VhcmlvIGd1YXJkYWRvXG4gICAgICAgICAgdmFyIHVzZXIgPSBEQlNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAgIHVzZXIudGhlbihmdW5jdGlvbiAoZG9jKSB7XG4gICAgICAgICAgICBpZihkb2MubmFtZSE9bnVsbCAmJiBkb2MubmFtZSE9XCJcIiAmJiBkb2MubmFtZSE9XCJ1bmRlZmluZWRcIil7XG4gICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLnNhdmVfdXNlcl9kYXRhKGRvYy5uYW1lLCBkb2MucGFzc3dvcmQsIGRvYy5waWN0dXJlX3VybCwgZG9jLnNob3dfbG9jYXRpb24pO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDApO1xuICAgICAgICAgIH0pO1xuICAgICAgfWVsc2V7XG4gICAgICAgIC8vRXN0w6EgbG9ndWVhZG9cbiAgICAgICAgaWYoVXNlclNlcnZpY2UucGljdHVyZV91cmw9PW51bGwgfHwgVXNlclNlcnZpY2UucGljdHVyZV91cmw9PVwiXCIpe1xuICAgICAgICAgIC8vRWwgdXN1YXJpbyBubyB0aWVuZSBmb3RvIGRlZmluaWRhXG4gICAgICAgICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIC8vRWwgdXN1YXJpbyB0aWVuZSBmb3RvXG4gICAgICAgICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUgPSBmdW5jdGlvbihoYXNQaG90byl7XG4gICAgICB2YXIgcGljdHVyZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlcl9waWN0dXJlXCIpO1xuICAgICAgaWYoaGFzUGhvdG89PTApe1xuICAgICAgICAvL3BpY3R1cmUuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmcpXCI7XG4gICAgICAgICRzY29wZS51c2VyX2NhY2hlZF9pbWFnZT1cIi4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nXCI7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgaWYoVXNlclNlcnZpY2UucGljdHVyZV91cmwhPW51bGwgJiYgVXNlclNlcnZpY2UucGljdHVyZV91cmwhPVwiXCIpe1xuICAgICAgICAgIC8vYWxlcnQoVXNlclNlcnZpY2UucGljdHVyZV91cmwpO1xuICAgICAgICAgICRzY29wZS51c2VyX2NhY2hlZF9pbWFnZT1Vc2VyU2VydmljZS5waWN0dXJlX3VybDtcbiAgICAgICAgICAvL3BpY3R1cmUuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBVc2VyU2VydmljZS5waWN0dXJlX3VybCArIFwiKVwiO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAvL3BpY3R1cmUuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmcpXCI7XG4gICAgICAgICAgJHNjb3BlLnVzZXJfY2FjaGVkX2ltYWdlPVwiLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmdcIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgJHNjb3BlLmZpbmRfbWUgPSBmdW5jdGlvbigpe1xuICAgICAgICAkc2NvcGUuc2V0X2FjdGl2ZV9vcHRpb24oXCJidXR0b24tZmluZC1tZVwiKTtcbiAgICAgICAgJHNjb3BlLmhpZGVfc3BlY2lhbF9kaXZzKCk7XG4gICAgICAgIHZhciBwb3NPcHRpb25zID0ge3RpbWVvdXQ6IDEwMDAwLCBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWV9O1xuICAgICAgICAkY29yZG92YUdlb2xvY2F0aW9uXG4gICAgICAgICAgLmdldEN1cnJlbnRQb3NpdGlvbihwb3NPcHRpb25zKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLmxhdCAgPSBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1hcC5jZW50ZXIubG5nID0gcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZTtcbiAgICAgICAgICAgICAgICBMb2NhdGlvbnNTZXJ2aWNlLnNhdmVfbmV3X3JlcG9ydF9wb3NpdGlvbihwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUscG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICAgICAgaWYoQ29ubmVjdGl2aXR5U2VydmljZS5pc09ubGluZSgpKXtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLnpvb20gPSAxODtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLnpvb20gPSAxNjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1hcC5tYXJrZXJzLm5vdyA9IHtcbiAgICAgICAgICAgICAgICAgIGxhdDpwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgICBsbmc6cG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiPHAgYWxpZ249J2NlbnRlcic+VGUgZW5jdWVudHJhcyBhcXXDrSA8YnIvPiA8YSBuZy1jbGljaz0nbmV3X3JlcG9ydCgxKTsnPkluaWNpYXIgcmVwb3J0ZSBlbiB0dSBwb3NpY2nDs24gYWN0dWFsPC9hPjwvcD5cIixcbiAgICAgICAgICAgICAgICAgIGZvY3VzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIGdldE1lc3NhZ2VTY29wZTogZnVuY3Rpb24oKSB7IHJldHVybiAkc2NvcGU7IH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vJHNjb3BlLm1hcC5tYXJrZXJzLm5vdy5vcGVuUG9wdXAoKTtcbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgLy8gZXJyb3JcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiTG9jYXRpb24gZXJyb3IhXCIpO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAvL0Vycm9yU2VydmljZS5zaG93X2Vycm9yX21lc3NhZ2VfcG9wdXAoXCJObyBoZW1vcyBwb2RpZG8gZ2VvbG9jYWxpemFybG8uIMK/VGFsIHZleiBvbHZpZMOzIGhhYmlsaXRhciBsb3Mgc2VydmljaW9zIGRlIGxvY2FsaXphY2nDs24gZW4gc3UgZGlzcG9zaXRpdm8/XCIpXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9wZW5Db3VuY2lsU2VsZWN0b3IoKTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICB9O1xuXG4gIH1cblxuXSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnQXV0aFNlcnZpY2UnLCBbJyRodHRwJywgJyRjb3Jkb3ZhRmlsZVRyYW5zZmVyJywgJ0NvbmZpZ1NlcnZpY2UnLCdWYWxpZGF0aW9uU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCAkY29yZG92YUZpbGVUcmFuc2ZlciwgQ29uZmlnU2VydmljZSwgVmFsaWRhdGlvblNlcnZpY2UpIHtcblxuICB2YXIgYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL2FwaS9cIjtcblxuICByZXR1cm4ge1xuICAgIGxvZ19pbjogZnVuY3Rpb24gKHVzZXIscGFzc3dvcmQpIHtcbiAgICAgICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXIrJyZwYXNzd29yZD0nK3Bhc3N3b3JkO1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2xvZ2luJywgYm9keSx7d2l0aENyZWRlbnRpYWxzOiB0cnVlLCBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICAgIH0sXG5cbiAgICBzaWduX291dDogZnVuY3Rpb24gKHBhc3N3b3JkLCBlbWFpbCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldChiYXNlVVJMICsgXCJzaWduX291dFwiLCB7IHdpdGhDcmVkZW50aWFsczogdHJ1ZSwgcGFyYW1zOiB7IHBhc3N3b3JkX3NpZ25faW46IHBhc3N3b3JkLCBlbWFpbDogZW1haWwgfSB9KTtcbiAgICB9LFxuXG4gICAgY3JlYXRlX3VzZXI6IGZ1bmN0aW9uICh1c2VyT2JqKSB7XG4gICAgICBpZih1c2VyT2JqLnBpY3R1cmVfdXJsICYmIFZhbGlkYXRpb25TZXJ2aWNlLmlzTW9iaWxlRGV2aWNlKCkpe1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgIGZpbGVLZXk6IFwicGhvdG9cIixcbiAgICAgICAgIC8vZmlsZU5hbWU6IGZpbGVuYW1lLFxuICAgICAgICAgLy9jaHVua2VkTW9kZTogZmFsc2UsXG4gICAgICAgICAvL21pbWVUeXBlOiBcImltYWdlL2pwZ1wiLFxuICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgcGFyYW1zIDogeyAgdXNlcjogdXNlck9iai51c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB1c2VyT2JqLnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXJPYmouZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICBnZW5kZXI6IHVzZXJPYmouZ2VuZGVyLFxuICAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3RlZDogdXNlck9iai5pbnRlcmVzdGVkLFxuICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB1c2VyT2JqLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgIHNob3dfbG9jYXRpb246IHVzZXJPYmouc2hvd19sb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciB0cnVzdEFsbEhvc3RzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuICRjb3Jkb3ZhRmlsZVRyYW5zZmVyLnVwbG9hZChiYXNlVVJMICsgXCJjcmVhdGVfdXNlclwiLCB1c2VyT2JqLnBpY3R1cmVfdXJsLCBvcHRpb25zLCB0cnVzdEFsbEhvc3RzKTtcbiAgICAgIH1lbHNle1xuICAgICAgICBpZih1c2VyT2JqLnBpY3R1cmVfdXJsKXtcbiAgICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJwaG90b1wiLCB1c2VyT2JqLnBpY3R1cmVfdXJsKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJ1c2VyXCIsIHVzZXJPYmoudXNlcm5hbWUpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInBhc3N3b3JkXCIsIHVzZXJPYmoucGFzc3dvcmQpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcImVtYWlsXCIsIHVzZXJPYmouZW1haWwpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcImdlbmRlclwiLCB1c2VyT2JqLmdlbmRlcik7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwiaW50ZXJlc3RlZFwiLCB1c2VyT2JqLmludGVyZXN0ZWQpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInN0YXR1c1wiLCB1c2VyT2JqLnN0YXR1cyk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwic2hvd19sb2NhdGlvblwiLCB1c2VyT2JqLnNob3dfbG9jYXRpb24pO1xuICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnY3JlYXRlX3VzZXInLCBmb3JtRGF0YSwge1xuICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eVxuICAgICAgICAgIH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlck9iai51c2VybmFtZSsnJnBhc3N3b3JkPScrdXNlck9iai5wYXNzd29yZCsnJmVtYWlsPScrdXNlck9iai5lbWFpbCsnJmdlbmRlcj0nK3VzZXJPYmouZ2VuZGVyO1xuICAgICAgICAgIGJvZHkgPSBib2R5ICsnJmludGVyZXN0ZWQ9Jyt1c2VyT2JqLmludGVyZXN0ZWQrJyZzdGF0dXM9Jyt1c2VyT2JqLnN0YXR1cysnJnNob3dfbG9jYXRpb249Jyt1c2VyT2JqLnNob3dfbG9jYXRpb247XG4gICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdjcmVhdGVfdXNlcicsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfSxcblxuICAgIHBhc3N3b3JkX3JlY292ZXJ5OiBmdW5jdGlvbiAoZW1haWwpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoYmFzZVVSTCArIFwiZm9yZ290X3Bhc3N3b3JkXCIsIHsgcGFyYW1zOiB7IGxvZ2luX2VtYWlsOiBlbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcGFzc3dvcmRfY2hhbmdlOiBmdW5jdGlvbiAoZW1haWwsb2xkUGFzc3dvcmQsbmV3UGFzc3dvcmQsY29uZmlybVBhc3N3b3JkKSB7XG5cbiAgICAgIHZhciBib2R5ID0gJ2VtYWlsPScrZW1haWwrJyZwYXNzd29yZF9zaWduX2luPScrb2xkUGFzc3dvcmQrJyZuZXdfcGFzc3dvcmQ9JytuZXdQYXNzd29yZCsnJmNvbmZpcm09Jytjb25maXJtUGFzc3dvcmQ7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2NoYW5nZV9wYXNzd29yZCcsIGJvZHkse2hlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG5cbiAgICB9LFxuXG5cbiAgICBlZGl0X3VzZXI6IGZ1bmN0aW9uICh1c2VyT2JqKSB7XG4gICAgICBpZih1c2VyT2JqLnBpY3R1cmVfdXJsICYmIFZhbGlkYXRpb25TZXJ2aWNlLmlzTW9iaWxlRGV2aWNlKCkpe1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgIGZpbGVLZXk6IFwicGhvdG9cIixcbiAgICAgICAgIC8vZmlsZU5hbWU6IGZpbGVuYW1lLFxuICAgICAgICAgLy9jaHVua2VkTW9kZTogZmFsc2UsXG4gICAgICAgICAvL21pbWVUeXBlOiBcImltYWdlL2pwZ1wiLFxuICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgcGFyYW1zIDogeyAgdXNlcjogdXNlck9iai51c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB1c2VyT2JqLnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXJPYmouZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICBnZW5kZXI6IHVzZXJPYmouZ2VuZGVyLFxuICAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3RlZDogdXNlck9iai5pbnRlcmVzdGVkLFxuICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB1c2VyT2JqLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgIHNob3dfbG9jYXRpb246IHVzZXJPYmouc2hvd19sb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciB0cnVzdEFsbEhvc3RzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuICRjb3Jkb3ZhRmlsZVRyYW5zZmVyLnVwbG9hZChiYXNlVVJMICsgXCJlZGl0X3Byb2ZpbGVcIiwgdXNlck9iai5waWN0dXJlX3VybCwgb3B0aW9ucywgdHJ1c3RBbGxIb3N0cyk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJPYmoudXNlcm5hbWUrJyZwYXNzd29yZD0nK3VzZXJPYmoucGFzc3dvcmQrJyZlbWFpbD0nK3VzZXJPYmouZW1haWwrJyZnZW5kZXI9Jyt1c2VyT2JqLmdlbmRlcjtcbiAgICAgICAgYm9keSA9IGJvZHkgKycmaW50ZXJlc3RlZD0nK3VzZXJPYmouaW50ZXJlc3RlZCsnJnN0YXR1cz0nK3VzZXJPYmouc3RhdHVzKycmc2hvd19sb2NhdGlvbj0nK3VzZXJPYmouc2hvd19sb2NhdGlvbjtcbiAgICAgICAgaWYodXNlck9iai5waWN0dXJlX3VybCl7XG4gICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwicGhvdG9cIiwgdXNlck9iai5waWN0dXJlX3VybCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwidXNlclwiLCB1c2VyT2JqLnVzZXJuYW1lKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJwYXNzd29yZFwiLCB1c2VyT2JqLnBhc3N3b3JkKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJlbWFpbFwiLCB1c2VyT2JqLmVtYWlsKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJnZW5kZXJcIiwgdXNlck9iai5nZW5kZXIpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcImludGVyZXN0ZWRcIiwgdXNlck9iai5pbnRlcmVzdGVkKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJzdGF0dXNcIiwgdXNlck9iai5zdGF0dXMpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInNob3dfbG9jYXRpb25cIiwgdXNlck9iai5zaG93X2xvY2F0aW9uKTtcbiAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2VkaXRfcHJvZmlsZScsIGZvcm1EYXRhLCB7XG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBhbmd1bGFyLmlkZW50aXR5XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnZWRpdF9wcm9maWxlJywgYm9keSx7d2l0aENyZWRlbnRpYWxzOiB0cnVlLCBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gIH07XG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnQ29uZmlnU2VydmljZScsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xuXG4gIHZhciBDb25maWdPYmogPSB7fTtcbiAgLy9Db25maWdPYmouYmFzZVVSTCA9IFwiaHR0cHM6Ly9wbWJkZXYuZGV2ZWxvcG1lbnQuZGF0YXV5Lm9yZ1wiO1xuICBDb25maWdPYmouYmFzZVVSTCA9IFwiaHR0cHM6Ly9iYWNrZW5kLmUtb3BlbmJhci5jb21cIjtcbiAgaWYoaW9uaWMuUGxhdGZvcm0uaXNXZWJWaWV3KCkpe1xuICAgIENvbmZpZ09iai5iYXNlVVJMID0gXCJodHRwczovL2JhY2tlbmQuZS1vcGVuYmFyLmNvbVwiO1xuICB9IGVsc2Uge1xuICAgIENvbmZpZ09iai5iYXNlVVJMID0gXCIvYmFja2VuZFwiO1xuICB9XG4gIENvbmZpZ09iai5BcHBOYW1lID0gXCJlLW9wZW5iYXJcIjtcblxuICBDb25maWdPYmouYmFzZUNvYnJhbmQgPSBcIi9jb2JyYW5kcy9wb3JtaWJhcnJpb1wiO1xuXG4gIHJldHVybiBDb25maWdPYmo7XG5cbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdDb25uZWN0aXZpdHlTZXJ2aWNlJywgWyckY29yZG92YU5ldHdvcmsnLCBmdW5jdGlvbigkY29yZG92YU5ldHdvcmspe1xuXG4gIHJldHVybiB7XG4gICAgaXNPbmxpbmU6IGZ1bmN0aW9uKCl7XG4gICAgICAvKmlmKGlvbmljLlBsYXRmb3JtLmlzV2ViVmlldygpKXtcbiAgICAgICAgcmV0dXJuICRjb3Jkb3ZhTmV0d29yay5pc09ubGluZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5vbkxpbmU7XG4gICAgICAgIC8vcmV0dXJuIGZhbHNlO1xuICAgICAgfSovXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGlzT2ZmbGluZTogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIC8qaWYoaW9uaWMuUGxhdGZvcm0uaXNXZWJWaWV3KCkpe1xuICAgICAgICByZXR1cm4gISRjb3Jkb3ZhTmV0d29yay5pc09ubGluZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICFuYXZpZ2F0b3Iub25MaW5lO1xuICAgICAgfSovXG4gICAgfVxuICB9XG59XSlcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdEQlNlcnZpY2UnLCBbJyRxJywgZnVuY3Rpb24oJHEpIHtcbiAgIHZhciBfZGI7XG5cbiAgIHJldHVybiB7XG4gICAgICAgaW5pdERCOiBpbml0REIsXG4gICAgICAgc2F2ZVVzZXI6IHNhdmVVc2VyLFxuICAgICAgIGdldFVzZXI6IGdldFVzZXIsXG4gICAgICAgZXJhc2VVc2VyOiBlcmFzZVVzZXIsXG4gICAgICAgc2F2ZVJlcG9ydDogc2F2ZVJlcG9ydCxcbiAgICAgICBnZXRSZXBvcnQ6IGdldFJlcG9ydCxcbiAgICAgICBnZXRBbGxSZXBvcnRzOiBnZXRBbGxSZXBvcnRzLFxuICAgICAgIHVwZGF0ZVJlcG9ydDogdXBkYXRlUmVwb3J0LFxuICAgICAgIGRlbGV0ZVJlcG9ydDogZGVsZXRlUmVwb3J0LFxuICAgICAgIGRlbGV0ZUdpdmVuUmVwb3J0OiBkZWxldGVHaXZlblJlcG9ydCxcbiAgICAgICBnZXRDYXRlZ29yaWVzOiBnZXRDYXRlZ29yaWVzLFxuICAgICAgIHNhdmVDYXRlZ29yaWVzOiBzYXZlQ2F0ZWdvcmllc1xuICAgfTtcblxuICAgZnVuY3Rpb24gc2F2ZVVzZXIodXNlcl9uYW1lLCB1c2VyX3Bhc3N3b3JkLCB1c2VyX3BpY3R1cmVfdXJsLHNob3dfbG9jYXRpb24sIHVpZCwgc3RhdHVzLCBnZW5kZXIsIGludGVyZXN0ZWQpIHtcbiAgICAgICAgIHZhciB1c2VyID0ge1xuICAgICAgICAgICAgX2lkOiAndXNlci1sb2dnZWQnLFxuICAgICAgICAgICAgbmFtZTogdXNlcl9uYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHVzZXJfcGFzc3dvcmQsXG4gICAgICAgICAgICBwaWN0dXJlX3VybDogdXNlcl9waWN0dXJlX3VybCxcbiAgICAgICAgICAgIHNob3dfbG9jYXRpb246IHNob3dfbG9jYXRpb24sXG4gICAgICAgICAgICB1aWQ6IHVpZCxcbiAgICAgICAgICAgIHN0YXR1czogc3RhdHVzLFxuICAgICAgICAgICAgZ2VuZGVyOiBnZW5kZXIsXG4gICAgICAgICAgICBpbnRlcmVzdGVkOiBpbnRlcmVzdGVkXG4gICAgICAgICB9O1xuICAgICAgICAgZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKGRvYykge1xuICAgICAgICAgICB1c2VyLl9yZXYgPSBkb2MuX3JldjtcbiAgICAgICAgICAgcmV0dXJuIF9kYi5wdXQodXNlcik7XG4gICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgIHJldHVybiBfZGIucHV0KHVzZXIpO1xuICAgICAgICAgfSlcbiAgIH07XG5cbiAgZnVuY3Rpb24gZ2V0VXNlcigpIHtcbiAgICAgcmV0dXJuIF9kYi5nZXQoJ3VzZXItbG9nZ2VkJyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gZXJhc2VVc2VyKCkge1xuICAgIF9kYi5nZXQoJ3VzZXItbG9nZ2VkJykudGhlbihmdW5jdGlvbihkb2MpIHtcbiAgICAgIHJldHVybiBfZGIucmVtb3ZlKGRvYyk7XG4gICAgfSk7XG4gIH1cblxuICAgZnVuY3Rpb24gaW5pdERCKCkge1xuICAgICAgIC8vIENyZWF0ZXMgdGhlIGRhdGFiYXNlIG9yIG9wZW5zIGlmIGl0IGFscmVhZHkgZXhpc3RzXG4gICAgICAgX2RiID0gbmV3IFBvdWNoREIoJ3RvbWFtb3N1bmFfbG9jYWxfZGInKTtcbiAgICAgICByZXR1cm4gX2RiO1xuICAgfTtcblxuICAgZnVuY3Rpb24gc2F2ZVJlcG9ydChyZXBvcnQpIHtcbiAgICAgIC8vbmV3X3JlcG9ydF9pZCA9IFwicmVwb3J0X1wiICsgcG91Y2hDb2xsYXRlLnRvSW5kZXhhYmxlU3RyaW5nKFtyZXBvcnRdKTtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIHZhciBuZXdfcmVwb3J0X2lkID0gXCJyZXBvcnRfXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCkgKyAoZGF0ZS5nZXRNb250aCgpICsgMSkgKyBkYXRlLmdldERhdGUoKSArIGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gICAgICByZXBvcnQuX2lkID0gbmV3X3JlcG9ydF9pZDtcbiAgICAgIHJldHVybiBfZGIucHV0KHJlcG9ydCk7XG4gICB9O1xuXG4gICBmdW5jdGlvbiB1cGRhdGVSZXBvcnQocmVwb3J0KSB7XG4gICAgIHJldHVybiBfZGIucHV0KHJlcG9ydCk7XG4gIH07XG5cbiAgIGZ1bmN0aW9uIGdldENhdGVnb3JpZXMoKSB7XG4gICAgIHJldHVybiBfZGIuZ2V0KCdjYXRlZ29yaWVzLWxpc3QnKTtcbiAgIH07XG5cbiAgIGZ1bmN0aW9uIHNhdmVDYXRlZ29yaWVzKGNhdGVnb3JpZXMpIHtcbiAgICAgZ2V0Q2F0ZWdvcmllcygpLnRoZW4oZnVuY3Rpb24gKGRvYykge1xuICAgICAgIGNhdGVnb3JpZXMuX3JldiA9IGRvYy5fcmV2O1xuICAgICAgIHJldHVybiBfZGIucHV0KGNhdGVnb3JpZXMpO1xuICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgY2F0ZWdvcmllcy5faWQgPSBcImNhdGVnb3JpZXMtbGlzdFwiO1xuICAgICAgIHJldHVybiBfZGIucHV0KGNhdGVnb3JpZXMpO1xuICAgICB9KVxuICAgfTtcblxuICBmdW5jdGlvbiBnZXRSZXBvcnQocmVwb3J0SWQpIHtcbiAgICAgcmV0dXJuIF9kYi5nZXQocmVwb3J0SWQpO1xuICB9O1xuXG4gICBmdW5jdGlvbiBnZXRBbGxSZXBvcnRzKCkge1xuICAgICByZXR1cm4gX2RiLmFsbERvY3Moe1xuICAgICAgaW5jbHVkZV9kb2NzOiB0cnVlLFxuICAgICAgYXR0YWNobWVudHM6IGZhbHNlLFxuICAgICAgc3RhcnRrZXk6ICdyZXBvcnRfJyxcbiAgICAgIGVuZGtleTogJ3JlcG9ydF9cXHVmZmZmJ1xuICAgICB9KTsvKi50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgIC8vIGhhbmRsZSByZXN1bHRcbiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pOyovXG4gIH07XG5cbiAgZnVuY3Rpb24gZGVsZXRlUmVwb3J0KHJlcG9ydF9pZCkge1xuICAgIF9kYi5nZXQocmVwb3J0X2lkKS50aGVuKGZ1bmN0aW9uKGRvYykge1xuICAgICAgcmV0dXJuIF9kYi5yZW1vdmUoZG9jKTtcbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBkZWxldGVHaXZlblJlcG9ydChyZXBvcnQpIHtcbiAgICByZXR1cm4gX2RiLnJlbW92ZShyZXBvcnQpO1xuICB9O1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnRHJpbmtTZXJ2aWNlJywgWyckaHR0cCcsICdDb25maWdTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsIENvbmZpZ1NlcnZpY2UpIHtcblxuICB2YXIgYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL2FwaS9cIjtcblxuICByZXR1cm4ge1xuICAgIGdldEFsbERyaW5rc0F2YWlsYWJsZTogZnVuY3Rpb24gKHVzZXJuYW1lLHBhc3N3b3JkKSB7XG4gICAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkKycmaGFzaF9pZD0nK01hdGgucmFuZG9tKCk7XG4gICAgICAvL2JvZHkgPSBib2R5ICsnJmludGVyZXN0ZWQ9Jyt1c2VyT2JqLmludGVyZXN0ZWQrJyZzdGF0dXM9Jyt1c2VyT2JqLnN0YXR1cysnJnNob3dfbG9jYXRpb249Jyt1c2VyT2JqLnNob3dfbG9jYXRpb247XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2dldF9wb3NzaWJsZV9kcmlua3MnLCBib2R5LHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICAgIH0sXG5cbiAgICBnZXRBbGxJbnZpdGF0aW9uc1dpdGhVc2VyOiBmdW5jdGlvbiAodXNlcm5hbWUscGFzc3dvcmQsZGVzdGluYXRpb25fdWlkLGF1dGhvcl91aWQpIHtcbiAgICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQrJyZoYXNoX2lkPScrTWF0aC5yYW5kb20oKTtcbiAgICAgIGJvZHkgPSBib2R5ICsnJnVpZD0nK2Rlc3RpbmF0aW9uX3VpZCsnJmF1dGhvcl91aWQ9JythdXRob3JfdWlkO1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdnZXRfaW52aXRhdGlvbnNfYmV0d2Vlbl91c2VycycsIGJvZHkse2hlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gICAgfSxcblxuICAgIHNlbmREcmlua0ludml0YXRpb25Ub1VzZXI6IGZ1bmN0aW9uKGRyaW5rX25pZCxkZXN0aW5hdGlvbl91aWQsYXV0aG9yX3VpZCx1c2VybmFtZSxwYXNzd29yZCl7XG4gICAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkKycmZHJpbmtfbmlkPScrZHJpbmtfbmlkKycmZGVzdGluYXRpb25fdWlkPScrZGVzdGluYXRpb25fdWlkKycmYXV0aG9yX3VpZD0nK2F1dGhvcl91aWQrJyZoYXNoX2lkPScrTWF0aC5yYW5kb20oKTtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnc2VuZF9kcmlua19pbnZpdGF0aW9uJywgYm9keSx7d2l0aENyZWRlbnRpYWxzOiB0cnVlLCBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICAgIH0sXG5cbiAgICBzZW5kRHJpbmtJbnZpdGF0aW9uUmVzcG9uc2U6IGZ1bmN0aW9uKHJlc3BvbnNlLHVzZXJuYW1lLHBhc3N3b3JkLGludml0YXRpb25fbmlkLGRlc3RpbmF0aW9uX3VpZCl7XG4gICAgICB2YXIgYm9keSA9ICdyZXNwb25zZT0nK3Jlc3BvbnNlKycmdXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZCsnJmludml0YXRpb25fbmlkPScraW52aXRhdGlvbl9uaWQrJyZkZXN0aW5hdGlvbl91aWQ9JytkZXN0aW5hdGlvbl91aWQrJyZoYXNoX2lkPScrTWF0aC5yYW5kb20oKTtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnaW52aXRhdGlvbl9yZXNwb25zZScsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICB9XG5cbiAgfTtcbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdFcnJvclNlcnZpY2UnLCBbJyRodHRwJywnJGlvbmljUG9wdXAnLCAnVmFsaWRhdGlvblNlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwkaW9uaWNQb3B1cCxWYWxpZGF0aW9uU2VydmljZSkge1xuXG4gIHJldHVybiB7XG4gICAgaHR0cF9yZXNwb25zZV9pc19zdWNjZXNzZnVsOiBmdW5jdGlvbiAoanNvblJlc3VsdCwgZXJyb3JDb250YWluZXJJZCkge1xuICAgICAgdmFyIGVycm9yRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZXJyb3JDb250YWluZXJJZCk7XG4gICAgICBpZihqc29uUmVzdWx0LmRhdGEgJiYganNvblJlc3VsdC5kYXRhLlN0YXR1cz09XCJzdWNjZXNzXCIgfHwganNvblJlc3VsdC5TdGF0dXM9PVwic3VjY2Vzc1wiKXtcbiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1lbHNle1xuICAgICAgICBpZihqc29uUmVzdWx0LmRhdGEpe1xuICAgICAgICAgIGVycm9yRGl2LmlubmVySFRNTD1cIjxoMz5cIiArIGpzb25SZXN1bHQuZGF0YS5NZXNzYWdlICsgXCI8L2gzPlwiO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICBlcnJvckRpdi5pbm5lckhUTUw9XCI8aDM+XCIgKyBqc29uUmVzdWx0Lk1lc3NhZ2UgKyBcIjwvaDM+XCI7XG4gICAgICAgIH1cbiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBodHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfYWpheDogZnVuY3Rpb24gKGpzb25SZXN1bHQpIHtcbiAgICAgIGlmKGpzb25SZXN1bHQuZGF0YS5yZXN1bHQ9PTApe1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bF9wb3B1cDogZnVuY3Rpb24gKGpzb25SZXN1bHQpIHtcbiAgICAgIGlmKGpzb25SZXN1bHQuZGF0YS5yZXN1bHQ9PTApe1xuICAgICAgICB2YXIgYWxlcnRQb3B1cCA9ICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgIHRpdGxlOiBcIkVycm9yXCIsXG4gICAgICAgICB0ZW1wbGF0ZToganNvblJlc3VsdC5kYXRhLm1lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGh0dHBfZGF0YV9yZXNwb25zZV9pc19zdWNjZXNzZnVsOiBmdW5jdGlvbiAoZGF0YSwgZXJyb3JDb250YWluZXJJZCkge1xuICAgICAgdmFyIGVycm9yRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZXJyb3JDb250YWluZXJJZCk7XG4gICAgICBpZihkYXRhLlN0YXR1cyE9J3N1Y2Nlc3MnKXtcbiAgICAgICAgZXJyb3JEaXYuaW5uZXJIVE1MPVwiPGgzPlwiICsgZGF0YS5NZXNzYWdlICsgXCI8L2gzPlwiO1xuICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaHR0cF9kYXRhX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfYWpheDogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGlmKGRhdGEucmVzdWx0PT0wKXtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBzaG93X2Vycm9yX21lc3NhZ2U6IGZ1bmN0aW9uIChlcnJvckNvbnRhaW5lcklkLCBtZXNzYWdlKSB7XG4gICAgICAgIHZhciBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yQ29udGFpbmVySWQpO1xuICAgICAgICBlcnJvckRpdi5pbm5lckhUTUw9XCI8aDM+XCIgKyBtZXNzYWdlICsgXCI8L2gzPlwiO1xuICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIHNob3dfZXJyb3JfbWVzc2FnZV9wb3B1cDogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICB0aXRsZTogXCJFcnJvclwiLFxuICAgICAgICAgdGVtcGxhdGU6IG1lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIGNoZWNrX2ZpZWxkczogZnVuY3Rpb24gKGZpZWxkcywgZXJyb3JDb250YWluZXJJZCkge1xuICAgICAgdmFyIGVycm9ycyA9IFwiXCI7XG4gICAgICBmaWVsZHMuZm9yRWFjaChmdW5jdGlvbihmaWVsZCkge1xuICAgICAgICBpZihmaWVsZC50eXBlPT1cIm5vdE51bGxcIil7XG4gICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX25vdF9lbXB0eShmaWVsZC52YWx1ZSkpe1xuICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkLm5hbWUgKyAnXCIgbm8gcHVlZGUgZXN0YXIgdmFjw61vLjwvaDM+JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoZmllbGQudHlwZT09XCJlbWFpbFwiKXtcbiAgICAgICAgICBpZighVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVfZW1haWwoZmllbGQudmFsdWUpKXtcbiAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZC5uYW1lICsgJ1wiIG5vIGVzIHVuYSBkaXJlY2Npw7NuIGRlIGNvcnJlbyB2w6FsaWRhLjwvaDM+JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoZmllbGQudHlwZT09XCJpZGRvY191eVwiKXtcbiAgICAgICAgICBpZighVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVfaWRkb2NfdXkoZmllbGQudmFsdWUpKXtcbiAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZC5uYW1lICsgJ1wiIG5vIGVzIHVuYSBjw6lkdWxhIHVydWd1YXlhIHbDoWxpZGEuPC9oMz4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihmaWVsZC50eXBlPT1cInR3b193b3Jkc1wiKXtcbiAgICAgICAgICBpZighVmFsaWRhdGlvblNlcnZpY2UudmFsaWRhdGVfdHdvX3dvcmRzKGZpZWxkLnZhbHVlKSl7XG4gICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gRWwgY2FtcG8gXCInICsgZmllbGQubmFtZSArICdcIiBkZWJlIGNvbnRlbmVyIGFsIG1lbm9zIGRvcyBwYWxhYnJhcy48L2gzPic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGZpZWxkLnR5cGU9PVwiZXF1YWxzVG9cIil7XG4gICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX2VxdWFsc1RvKGZpZWxkLnZhbHVlLCBmaWVsZC5zZWNvbmRWYWx1ZSkpe1xuICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIExvcyBjYW1wb3MgXCInICsgZmllbGQubmFtZSArICdcIiBubyBjb2luY2lkZW4uPC9oMz4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZihlcnJvcnMgPT1cIlwiKXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdmFyIGVycm9yRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZXJyb3JDb250YWluZXJJZCk7XG4gICAgICAgIGVycm9yRGl2LmlubmVySFRNTD0gZXJyb3JzO1xuICAgICAgICBlcnJvckRpdi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG5cbiAgfTtcbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdMb2FkZXInLCBbJyRpb25pY0xvYWRpbmcnLCAnJHRpbWVvdXQnLCckaW9uaWNQb3B1cCcsZnVuY3Rpb24oJGlvbmljTG9hZGluZywkdGltZW91dCwkaW9uaWNQb3B1cCkge1xuXG4gIHZhciBMT0FERVJBUEkgPSB7XG5cbiAgICBzaG93TG9hZGluZzogZnVuY3Rpb24odGV4dCkge1xuICAgICAgdGV4dCA9IHRleHQgfHwgJ0xvYWRpbmcuLi4nO1xuICAgICAgJGlvbmljTG9hZGluZy5zaG93KHtcbiAgICAgICAgdGVtcGxhdGU6IHRleHRcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBoaWRlTG9hZGluZzogZnVuY3Rpb24oKSB7XG4gICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICB9LFxuXG4gICAgdG9nZ2xlTG9hZGluZ1dpdGhNZXNzYWdlOiBmdW5jdGlvbih0ZXh0LCB0aW1lb3V0KSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIHNlbGYuc2hvd0xvYWRpbmcodGV4dCk7XG5cbiAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxmLmhpZGVMb2FkaW5nKCk7XG4gICAgICB9LCB0aW1lb3V0IHx8IDMwMDApO1xuICAgIH0sXG5cbiAgICBjb25maXJtUG9wdXA6ZnVuY3Rpb24odGl0bGUsdGV4dCl7XG4gICAgICB2YXIgY29uZmlybVBvcHVwID0gJGlvbmljUG9wdXAuY29uZmlybSh7XG4gICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgdGVtcGxhdGU6IHRleHRcbiAgIH0pO1xuICAgcmV0dXJuIGNvbmZpcm1Qb3B1cDtcbiB9LFxuXG5cbiAgICBzaG93QWxlcnQ6ZnVuY3Rpb24oX3RpdGxlLF90ZW1wbGF0ZSkge1xuICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgIHRpdGxlOiBfdGl0bGUsXG4gICAgICAgIHRlbXBsYXRlOiBfdGVtcGxhdGVcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGFsZXJ0UG9wdXA7XG4gfVxuXG4gIH07XG4gIHJldHVybiBMT0FERVJBUEk7XG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnTG9jYXRpb25zU2VydmljZScsIFsgZnVuY3Rpb24oKSB7XG5cbiAgdmFyIGxvY2F0aW9uc09iaiA9IHt9O1xuICBsb2NhdGlvbnNPYmouaW5pdGlhbF9sYXQgPSBcIlwiO1xuICBsb2NhdGlvbnNPYmouaW5pdGlhbF9sbmcgPSBcIlwiO1xuICBsb2NhdGlvbnNPYmoubGFzdF91c2VyX2xhdCA9IFwiXCI7XG4gIGxvY2F0aW9uc09iai5sYXN0X3VzZXJfbG5nID0gXCJcIjtcbiAgbG9jYXRpb25zT2JqLmNvdW5jaWxfbW9kYWwgPSBudWxsO1xuICBsb2NhdGlvbnNPYmouc2VsZWN0ZWRfY291bmNpbCA9IG51bGw7XG5cbiAgbG9jYXRpb25zT2JqLnNlbGVjdENvdW5jaWwgPSBmdW5jdGlvbihjb3VuY2lsTmFtZSkge1xuICAgIGxvY2F0aW9uc09iai5zZWxlY3RlZF9jb3VuY2lsID0gIGNvdW5jaWxOYW1lO1xuICB9XG5cbiAgbG9jYXRpb25zT2JqLnNhdmVfaW5pdGlhbF9wb3NpdGlvbiA9IGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG4gICAgbG9jYXRpb25zT2JqLmluaXRpYWxfbGF0ID0gIHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZTtcbiAgICBsb2NhdGlvbnNPYmouaW5pdGlhbF9sbmcgPSAgcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZTtcbiAgfVxuXG4gIGxvY2F0aW9uc09iai5zYXZlX2xhc3RfdXNlcl9wb3NpdGlvbiA9IGZ1bmN0aW9uKGxhdCxsbmcpe1xuICAgIGxvY2F0aW9uc09iai5sYXN0X3VzZXJfbGF0ID0gbGF0O1xuICAgIGxvY2F0aW9uc09iai5sYXN0X3VzZXJfbG5nID0gbG5nO1xuICB9XG5cbiAgbG9jYXRpb25zT2JqLnNhdmVkTG9jYXRpb25zID0gW107XG5cbiAgcmV0dXJuIGxvY2F0aW9uc09iajtcblxufV0pO1xuIiwiIC8vcG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ01hcFNlcnZpY2UnLCBbIGZ1bmN0aW9uKCkge1xuIHBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdNYXBTZXJ2aWNlJywgWydsZWFmbGV0RGF0YScsICckY29tcGlsZScsIGZ1bmN0aW9uKGxlYWZsZXREYXRhLCAkY29tcGlsZSkge1xuXG4gICAvL0RlZmluaWNpb24gZGUgbGEgcHJveWVjY2Npb24gVVRNIDIxIHNcbiAgIHByb2o0LmRlZnMoJ0VQU0c6MzI3MjEnLCAnK3Byb2o9dXRtICt6b25lPTIxICtzb3V0aCArZWxscHM9V0dTODQgK2RhdHVtPVdHUzg0ICt1bml0cz1tICtub19kZWZzJyk7XG5cblxuICAgdmFyIG1hcFNlcnZpY2UgPSB7fTtcblxuICAgbWFwU2VydmljZS5nb1RvUGxhY2UgPSBmdW5jdGlvbihuYW1lLGxhdCxsb24sc2NvcGUpIHtcbiAgICB2YXIgX2dlb0pzb24gPSB7XG4gICAgICAgICAgICAgIFwidHlwZVwiOiBcIkZlYXR1cmVDb2xsZWN0aW9uXCIsXG4gICAgICAgICAgICAgIFwiY3JzXCI6IHsgXCJ0eXBlXCI6IFwibmFtZVwiLFxuICAgICAgICAgICAgICAgICAgICAgIFwicHJvcGVydGllc1wiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogJ3VybjpvZ2M6ZGVmOmNyczpFUFNHOjozMjcyMSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgXCJmZWF0dXJlc1wiOiBbXG4gICAgICAgICAgICAgICAgeyBcInR5cGVcIjogXCJGZWF0dXJlXCIsXG4gICAgICAgICAgICAgICAgXCJnZW9tZXRyeVwiOntcbiAgICAgICAgICAgICAgICAgICAgICAgXCJ0eXBlXCI6XCJQb2ludFwiLFxuICAgICAgICAgICAgICAgICAgICAgICBcImNvb3JkaW5hdGVzXCI6W2xhdCxsb25dXG4gICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcInByb3BlcnRpZXNcIjp7XG4gICAgICAgICAgICAgICAgICAgICAgXCJub21icmVcIjogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9O1xuICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uKG1hcCkge1xuICAgICAgdmFyIF9sYXRsbmc7XG4gICAgICAgdmFyIGxheWVyID0gTC5Qcm9qLmdlb0pzb24oX2dlb0pzb24sIHtcbiAgICAgICAgICdwb2ludFRvTGF5ZXInOiBmdW5jdGlvbihmZWF0dXJlLCBsYXRsbmcpIHtcbiAgICAgICAgICAgX2xhdGxuZyA9IGxhdGxuZztcbiAgICAgICAgICAgdmFyIGh0bWxQb3BVcCA9IFwiPHAgYWxpZ249J2NlbnRlcic+XCIrZmVhdHVyZS5wcm9wZXJ0aWVzLm5vbWJyZStcIiA8YnIvPiA8YSBuZy1jbGljaz0nbmV3X3JlcG9ydF9mcm9tX2xhdGxvbihcIitfbGF0bG5nLmxhdCtcIixcIitfbGF0bG5nLmxuZytcIik7Jz5JbmljaWFyIHJlcG9ydGUgYXF1w608L2E+PC9wPlwiO1xuICAgICAgICAgICB2YXIgY29tcGlsZWQgPSAkY29tcGlsZShodG1sUG9wVXApKHNjb3BlKTtcbiAgICAgICAgICAgcmV0dXJuIEwubWFya2VyKGxhdGxuZykuYmluZFBvcHVwKGNvbXBpbGVkWzBdKTtcbiAgICAgICAgIH1cbiAgICAgICB9KTtcblxuICAgICAgIGxheWVyLmFkZFRvKG1hcCk7XG4gICAgICAgbWFwLnNldFZpZXcoX2xhdGxuZywgMTgpO1xuICAgICAgIGxheWVyLm9wZW5Qb3B1cCgpO1xuICAgICB9KTtcbiAgIH07XG5cbiAgbWFwU2VydmljZS5jZW50ZXJNYXBPbkNvb3JkcyA9IGZ1bmN0aW9uKGxhdCxsbmcsem9vbSkge1xuICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uKG1hcCkge1xuICAgICAgICBtYXAuc2V0VmlldyhuZXcgTC5MYXRMbmcobGF0LCBsbmcpLHpvb20pO1xuICAgICAgIH0pO1xuICAgICB9XG5cbiAgIHJldHVybiBtYXBTZXJ2aWNlO1xuXG4gfV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ01lc3NhZ2VTZXJ2aWNlJywgWyckaHR0cCcsICdsZWFmbGV0RGF0YScsJ0NvbmZpZ1NlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgbGVhZmxldERhdGEsIENvbmZpZ1NlcnZpY2UpIHtcblxuICB2YXIgcGluc1VSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL3NpdGVzL3RvbWFtb3NfdW5hL2ZpbGVzL2pzb24vb25saW5lX3VzZXJzX2dlby5qc29uXCI7XG4gIHZhciBhcGlVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hcGkvXCJcbi8qKlxuICAgKiBDb25zdHJ1Y3Rvciwgd2l0aCBjbGFzcyBuYW1lXG4gICAqL1xuICBmdW5jdGlvbiBNZXNzYWdlKF9kYXRhKSB7XG4gICAgYW5ndWxhci5leHRlbmQodGhpcywgX2RhdGEpO1xuICB9XG5cblxuICBNZXNzYWdlLmdldEFsbE1lc3NhZ2VzVG9Vc2VyID0gZnVuY3Rpb24odXNlcm5hbWUscGFzc3dvcmQsdWlkLGF1dGhvcl91aWQpe1xuICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQrJyZhdXRob3JfdWlkPScrYXV0aG9yX3VpZCsnJnVpZD0nK3VpZCsnJmhhc2hfaWQ9JytNYXRoLnJhbmRvbSgpO1xuICAgIHJldHVybiAkaHR0cC5wb3N0KGFwaVVSTCArICdnZXRfYWxsX21lc3NhZ2VzX3RvX3VzZXInLCBib2R5LHtoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICB9XG5cbiAgTWVzc2FnZS5nZXRVc2VySW5mbyA9IGZ1bmN0aW9uKHVpZCl7XG4gICAgcmV0dXJuICRodHRwLmdldChhcGlVUkwgKyAnZ2V0X3VzZXJfaW5mbycsIHtjYWNoZTogZmFsc2UsIHBhcmFtczoge3VpZDp1aWQsIGhhc2hfaWQ6TWF0aC5yYW5kb20oKX19KTtcbiAgfVxuXG4gIE1lc3NhZ2Uuc2VuZFRleHRNZXNzYWdlVG9Vc2VyID0gZnVuY3Rpb24odGV4dCxkZXN0aW5hdGlvbl91aWQsYXV0aG9yX3VpZCx1c2VybmFtZSxwYXNzd29yZCl7XG4gICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZCsnJnRleHQ9Jyt0ZXh0KycmZGVzdGluYXRpb25fdWlkPScrZGVzdGluYXRpb25fdWlkKycmYXV0aG9yX3VpZD0nK2F1dGhvcl91aWQ7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoYXBpVVJMICsgJ3NlbmRfdGV4dF9tZXNzYWdlJywgYm9keSx7d2l0aENyZWRlbnRpYWxzOiB0cnVlLCBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICB9XG5cbiAgTWVzc2FnZS5jaGVja1dob0NhblRhbGsgPSBmdW5jdGlvbih1c2VybmFtZSxwYXNzd29yZCl7XG4gICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZDtcbiAgICByZXR1cm4gJGh0dHAucG9zdChhcGlVUkwgKyAnY2hlY2tfdXNlcl90YWxrJywgYm9keSx7d2l0aENyZWRlbnRpYWxzOiB0cnVlLCBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICB9XG5cblxuICAgIE1lc3NhZ2UuY2FuVGFsa1RvVXNlcnMgPSBuZXcgQXJyYXkoKTtcbiAgICBNZXNzYWdlLmN1cnJlbnQgPSB7fTtcblxuXG4gICAgLyoqXG4gICAgICogU3RhdGljIG1ldGhvZCwgYXNzaWduZWQgdG8gY2xhc3NcbiAgICAgKiBJbnN0YW5jZSAoJ3RoaXMnKSBpcyBub3QgYXZhaWxhYmxlIGluIHN0YXRpYyBjb250ZXh0XG4gICAgICovXG4gICAgTWVzc2FnZS5idWlsZCA9IGZ1bmN0aW9uKF9kYXRhKSB7XG5cbiAgICAgIHJldHVybiBuZXcgTWVzc2FnZShcbiAgICAgICAgX2RhdGFcbiAgICAgICk7XG4gICAgfTtcblxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvblxuICAgICAqL1xuICAgIHJldHVybiBNZXNzYWdlO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnTW9kYWxTZXJ2aWNlJywgWyBmdW5jdGlvbigpIHtcblxuICB2YXIgbW9kYWxPQkogPSB7fTtcbiAgbW9kYWxPQkouYWN0aXZlTW9kYWwgPSBudWxsO1xuXG4gIG1vZGFsT0JKLmNoZWNrTm9Nb2RhbElzT3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgIGlmKG1vZGFsT0JKLmFjdGl2ZU1vZGFsKXtcbiAgICAgIG1vZGFsT0JKLmFjdGl2ZU1vZGFsLmhpZGUoKTtcbiAgICAgIG1vZGFsT0JKLmFjdGl2ZU1vZGFsLnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtb2RhbE9CSjtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ05vdGlmaWNhdGlvblNlcnZpY2UnLCBbJyRodHRwJywgJ0NvbmZpZ1NlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgQ29uZmlnU2VydmljZSkge1xuXG4gIHZhciBiYXNlVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYXBpL1wiO1xuXG4gIHJldHVybiB7XG4gICAgZ2V0VW5yZWNpdmVkTm90aWZpY2F0aW9uczogZnVuY3Rpb24gKHVzZXJuYW1lLHBhc3N3b3JkKSB7XG4gICAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkKycmaGFzaF9pZD0nK01hdGgucmFuZG9tKCk7XG4gICAgICAvL2JvZHkgPSBib2R5ICsnJmludGVyZXN0ZWQ9Jyt1c2VyT2JqLmludGVyZXN0ZWQrJyZzdGF0dXM9Jyt1c2VyT2JqLnN0YXR1cysnJnNob3dfbG9jYXRpb249Jyt1c2VyT2JqLnNob3dfbG9jYXRpb247XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2dldF91bnJlY2l2ZWRfbm90aWZpY2F0aW9ucycsIGJvZHkse2hlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gICAgfSxcblxuICAgIGRvbnRTaG93Tm90aWZpY2F0aW9uQWdhaW46IGZ1bmN0aW9uICh1c2VybmFtZSxwYXNzd29yZCxuaWQpIHtcbiAgICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQrJyZuaWQ9JytuaWQrJyZoYXNoX2lkPScrTWF0aC5yYW5kb20oKTtcbiAgICAgIC8vYm9keSA9IGJvZHkgKycmaW50ZXJlc3RlZD0nK3VzZXJPYmouaW50ZXJlc3RlZCsnJnN0YXR1cz0nK3VzZXJPYmouc3RhdHVzKycmc2hvd19sb2NhdGlvbj0nK3VzZXJPYmouc2hvd19sb2NhdGlvbjtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnZG9udF9zaG93X25vdGlmaWNhdGlvbl9hZ2FpbicsIGJvZHkse2hlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gICAgfVxuXG4gIH07XG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnUGluU2VydmljZScsIFsnJGh0dHAnLCAnbGVhZmxldERhdGEnLCdDb25maWdTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsIGxlYWZsZXREYXRhLCBDb25maWdTZXJ2aWNlKSB7XG5cbiAgdmFyIHBpbnNVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9zaXRlcy90b21hbW9zX3VuYS9maWxlcy9qc29uL3VzZXJzX2dlby5qc29uXCI7XG4gIHZhciBhcGlVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hcGkvXCJcbi8qKlxuICAgKiBDb25zdHJ1Y3Rvciwgd2l0aCBjbGFzcyBuYW1lXG4gICAqL1xuICBmdW5jdGlvbiBQaW4oX2RhdGEpIHtcbiAgICBhbmd1bGFyLmV4dGVuZCh0aGlzLCBfZGF0YSk7XG4gIH1cblxuXG4gIFBpbi5nZXRBbGwgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiAkaHR0cC5nZXQocGluc1VSTCwge2NhY2hlOiBmYWxzZSwgcGFyYW1zOiB7aGFzaF9pZDpNYXRoLnJhbmRvbSgpfX0pO1xuICB9XG5cbiAgUGluLnNlbmRVc2VyTG9jYXRpb24gPSBmdW5jdGlvbihsYXRpdHVkZSxsb25naXR1ZGUsdXNlcm5hbWUscGFzc3dvcmQsdWlkKXtcbiAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkKycmbGF0PScrbGF0aXR1ZGUrJyZsb249Jytsb25naXR1ZGUrXCImdWlkPVwiK3VpZDtcbiAgICByZXR1cm4gJGh0dHAucG9zdChhcGlVUkwgKyAnc2VuZF91c2VyX3Bvc2l0aW9uJywgYm9keSx7d2l0aENyZWRlbnRpYWxzOiB0cnVlLCBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuXG4gIH1cblxuXG4gICAgUGluLl9hbGwgPSBbXTtcbiAgICBQaW4uY3VycmVudCA9IHt9O1xuICAgIFBpbi5sYXN0UGluc1Jlc3BvbnNlID0gbnVsbDtcblxuXG5cblxuICAgIC8qKlxuICAgICAqIFN0YXRpYyBtZXRob2QsIGFzc2lnbmVkIHRvIGNsYXNzXG4gICAgICogSW5zdGFuY2UgKCd0aGlzJykgaXMgbm90IGF2YWlsYWJsZSBpbiBzdGF0aWMgY29udGV4dFxuICAgICAqL1xuICAgIFBpbi5idWlsZCA9IGZ1bmN0aW9uKF9kYXRhKSB7XG5cbiAgICAgIHJldHVybiBuZXcgUGluKFxuICAgICAgICBfZGF0YVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgUGluLnByb3RvdHlwZS5zZXRMYXRMbmcgPSBmdW5jdGlvbiAobGF0bG5nKSB7XG5cbiAgICAgIHRoaXMubGF0ID0gbGF0bG5nLmxhdDtcbiAgICAgIHRoaXMubG9uID0gbGF0bG5nLmxuZztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvblxuICAgICAqL1xuICAgIHJldHVybiBQaW47XG5cbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdQb3BVcFNlcnZpY2UnLCBbJyRpb25pY1BvcHVwJywnVmFsaWRhdGlvblNlcnZpY2UnLCBmdW5jdGlvbigkaW9uaWNQb3B1cCxWYWxpZGF0aW9uU2VydmljZSkge1xuXG4gIHJldHVybiB7XG4gICAgc2hvd19hbGVydDogZnVuY3Rpb24gKGFsZXJ0X3RpdGxlLGFsZXJ0X21lc3NhZ2UpIHtcbiAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICB0aXRsZTogYWxlcnRfdGl0bGUsXG4gICAgICAgICB0ZW1wbGF0ZTogYWxlcnRfbWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgICAgYWxlcnRQb3B1cC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuICAgY29uZmlybVBvcHVwOiBmdW5jdGlvbih0aXRsZSx0ZXh0KXtcbiAgICAgdmFyIGNvbmZpcm1Qb3B1cCA9ICRpb25pY1BvcHVwLmNvbmZpcm0oe1xuICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgcmV0dXJuIGNvbmZpcm1Qb3B1cDtcbiAgIH0sXG5cbiAgIGFza0Zvck9uZVZhbHVlUG9wVXA6IGZ1bmN0aW9uKHNjb3BlLHRpdGxlLHRleHQsZmllbGRfbmFtZSx2YWxpZGF0aW9uVHlwZSl7XG4gICAgICAkc2NvcGUgPSBzY29wZTtcbiAgICAgIHZhciBteVBvcHVwID0gJGlvbmljUG9wdXAuc2hvdyh7XG4gICAgICB0ZW1wbGF0ZTogZmllbGRfbmFtZSArICc6IDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwib25lX3ZhbHVlX3BvcHVwXCI+PGRpdiBpZD1cImVycm9yX2NvbnRhaW5lcl9pbnNpZGVcIj48L2Rpdj4nLFxuICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgc3ViVGl0bGU6IHRleHQsXG4gICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgYnV0dG9uczogW1xuICAgICAgICB7IHRleHQ6ICdDYW5jZWxhcicgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRleHQ6ICc8Yj5FbnZpYXI8L2I+JyxcbiAgICAgICAgICB0eXBlOiAnYnV0dG9uLXBvc2l0aXZlJyxcbiAgICAgICAgICBvblRhcDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIGVycm9ycyA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9uZV92YWx1ZV9wb3B1cFwiKS52YWx1ZTtcbiAgICAgICAgICAgIGlmKHZhbGlkYXRpb25UeXBlPT1cIm5vdE51bGxcIil7XG4gICAgICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9ub3RfZW1wdHkodmFsdWUpKXtcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gRWwgY2FtcG8gXCInICsgZmllbGRfbmFtZSArICdcIiBubyBwdWVkZSBlc3RhciB2YWPDrW8uPC9oMz4nO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih2YWxpZGF0aW9uVHlwZT09XCJlbWFpbFwiKXtcbiAgICAgICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX2VtYWlsKHZhbHVlKSl7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkX25hbWUgKyAnXCIgbm8gZXMgdW5hIGRpcmVjY2nDs24gZGUgY29ycmVvIHbDoWxpZGEuPC9oMz4nO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih2YWxpZGF0aW9uVHlwZT09XCJpZGRvY191eVwiKXtcbiAgICAgICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX2lkZG9jX3V5KHZhbHVlKSl7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkX25hbWUgKyAnXCIgbm8gZXMgdW5hIGPDqWR1bGEgdXJ1Z3VheWEgdsOhbGlkYS48L2gzPic7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHZhbGlkYXRpb25UeXBlPT1cInR3b193b3Jkc1wiKXtcbiAgICAgICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX3R3b193b3Jkcyh2YWx1ZSkpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZF9uYW1lICsgJ1wiIGRlYmUgY29udGVuZXIgYWwgbWVub3MgZG9zIHBhbGFicmFzLjwvaDM+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoZXJyb3JzIT1cIlwiKXtcbiAgICAgICAgICAgICAgdmFyIGVycm9yRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlcnJvcl9jb250YWluZXJfaW5zaWRlXCIpO1xuICAgICAgICAgICAgICBlcnJvckRpdi5pbm5lckhUTUw9IGVycm9ycztcbiAgICAgICAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgLy9kb24ndCBhbGxvdyB0aGUgdXNlciB0byBjbG9zZSB1bmxlc3MgaGUgZW50ZXJzIHdpZmkgcGFzc3dvcmRcbiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pO1xuICAgIHJldHVybiBteVBvcHVwO1xuICAgfVxuXG5cbiAgfTtcbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdTZW1hcGhvcmVTZXJ2aWNlJywgW2Z1bmN0aW9uKCkge1xuXG4gIHZhciBzZW1hcGhvcmVPYmogPSB7fTtcbiAgc2VtYXBob3JlT2JqLnNlbWFwaG9yZXMgPSBuZXcgQXJyYXkoKTtcbiAgc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbJ29wZW4tbW9kYWwnXSA9IFwiYXZhaWxhYmxlXCI7XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzWydzdWJtaXQtZm9ybSddID0gXCJhdmFpbGFibGVcIjtcbiAgc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbJ3N1Ym1pdC1sb2NhdGlvbiddID0gXCJhdmFpbGFibGVcIjtcbiAgc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbJ2Nhbl90YWxrJ10gPSBcImF2YWlsYWJsZVwiO1xuXG5cblxuXG4gIHNlbWFwaG9yZU9iai50YWtlSWZBdmFpbGFibGUgPSBmdW5jdGlvbihzZW1hcGhvcmVJZCkge1xuICAgIC8vY29uc29sZS5sb2coc2VtYXBob3JlSWQgKyBcIjpcIiArIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzW3NlbWFwaG9yZUlkXSk7XG4gICAgaWYoc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbc2VtYXBob3JlSWRdPT1cImF2YWlsYWJsZVwiKXtcbiAgICAgICAgc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbc2VtYXBob3JlSWRdID0gXCJvY2N1cGllZFwiO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9ZWxzZXtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBzZW1hcGhvcmVPYmoubWFrZUF2YWlsYWJsZUFnYWluID0gZnVuY3Rpb24oc2VtYXBob3JlSWQpIHtcbiAgICBpZihzZW1hcGhvcmVPYmouc2VtYXBob3Jlc1tzZW1hcGhvcmVJZF09PVwib2NjdXBpZWRcIil7XG4gICAgICAgIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzW3NlbWFwaG9yZUlkXSA9IFwiYXZhaWxhYmxlXCI7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1lbHNle1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzZW1hcGhvcmVPYmo7XG5cbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdsb2NhdGlvbkFQSScsIFsnJGh0dHAnLCAnJHEnLCAnQXBpSW1FbmRwb2ludCcsICdBcGlEYXRhRW5kcG9pbnQnLCAnQ29uZmlnU2VydmljZScsICdMb2NhdGlvbnNTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsICRxLCBBcGlJbUVuZHBvaW50LCBBcGlEYXRhRW5kcG9pbnQsIENvbmZpZ1NlcnZpY2UsIExvY2F0aW9uc1NlcnZpY2UpIHtcblxuICB2YXIgcmVzdFByZWZmaXggPSBcInViaWNhY2lvbmVzUmVzdFByb2RcIjtcblxuXG4gIHZhciBsb2NhdGlvbkFQSSA9IHt9O1xuXG4gIGxvY2F0aW9uQVBJLnNlYXJjaExvY2F0aW9uQnlTdHIgPSBmdW5jdGlvbihfbG9jYXRpb24pIHtcbiAgICAvKnJldHVybiAkaHR0cC5nZXQoQXBpSW1FbmRwb2ludC51cmwgKyAnLycgKyByZXN0UHJlZmZpeCArICcvY2FsbGVzJywge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHBhcmFtczoge1xuICAgICAgICBub21icmU6IF9sb2NhdGlvblxuICAgICAgfVxuICAgIH0pOyovXG4gICAgdmFyIGJhc2VVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hamF4L2dlb2NvZGU/dGVybT1cIiArIExvY2F0aW9uc1NlcnZpY2Uuc2VsZWN0ZWRfY291bmNpbCArIFwiLFwiICsgX2xvY2F0aW9uO1xuICAgIHJldHVybiAkaHR0cC5nZXQoYmFzZVVSTCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHBhcmFtczoge31cbiAgICB9KTtcbiAgfTtcblxuXG4gIGxvY2F0aW9uQVBJLnNlYXJjaEVzcXVpbmFCeVN0ciA9IGZ1bmN0aW9uKF9sb2NhdGlvbikge1xuICAgIC8vY29uc29sZS5sb2coXCJzZWFyY2hFc3F1aW5hQnlTdHIgPSBcIiArIEpTT04uc3RyaW5naWZ5KF9sb2NhdGlvbikpO1xuICAgIC8vcmV0dXJuICRodHRwLmdldChBcGlJbUVuZHBvaW50LnVybCArICcvJyArIHJlc3RQcmVmZml4ICsgJy9lc3F1aW5hLycgKyBfbG9jYXRpb24uY2FsbGUgKyAnLycgKyBfbG9jYXRpb24uZXNxdWluYSwge1xuICAgICAgLypyZXR1cm4gJGh0dHAuZ2V0KEFwaUltRW5kcG9pbnQudXJsICsgJy8nICsgcmVzdFByZWZmaXggKyAnL2NydWNlcy8nICsgX2xvY2F0aW9uLmNhbGxlICsgJy8nLFxuICAgICAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBub21icmU6IF9sb2NhdGlvbi5lc3F1aW5hXG4gICAgICAgIH1cbiAgICAgIH0pOyovXG5cbiAgICAgIHZhciBiYXNlVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYWpheC9nZW9jb2RlP3Rlcm09XCIgKyBMb2NhdGlvbnNTZXJ2aWNlLnNlbGVjdGVkX2NvdW5jaWwgKyBcIixcIlxuICAgICAgICAgICAgICAgICAgICArIF9sb2NhdGlvbi5jYWxsZSArIFwiLFwiICsgX2xvY2F0aW9uLmVzcXVpbmE7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KGJhc2VVUkwsIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgcGFyYW1zOiB7fVxuICAgICAgfSk7XG4gIH07XG5cbiAgbG9jYXRpb25BUEkuZ2V0TG9jYXRpb25HZW9tID0gZnVuY3Rpb24oX2xvY2F0aW9uKSB7XG4gICAgdmFyIHVybCA9IEFwaUltRW5kcG9pbnQudXJsICsgJy8nICsgcmVzdFByZWZmaXggKyBsb2NhdGlvbkFQSS5nZXRQYXJhbVBhdGhCeVRpcG8oX2xvY2F0aW9uLnRpcG8pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX2xvY2F0aW9uLnBhdGhQYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHVybCArPSAnLycgKyBfbG9jYXRpb24ucGF0aFBhcmFtc1tpXTtcbiAgICB9XG4gICAgcmV0dXJuICRodHRwLmdldChiYXNlVVJMKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH0pO1xuICB9O1xuXG4gIGxvY2F0aW9uQVBJLmdldExvY2F0aW9uR2VvbVBNQiA9IGZ1bmN0aW9uKGNhbGxlLGVzcXVpbmFfbnVtZXJvLHRpcG8pIHtcbiAgICB2YXIgYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL2FqYXgvZ2VvY29kZT90ZXJtPVwiICsgTG9jYXRpb25zU2VydmljZS5zZWxlY3RlZF9jb3VuY2lsICsgXCIsXCJcbiAgICAgICAgICAgICAgKyBjYWxsZSArIFwiLFwiICsgZXNxdWluYV9udW1lcm8gKyBcIixcIiArIHRpcG87XG5cbiAgICByZXR1cm4gJGh0dHAuZ2V0KGJhc2VVUkwpO1xuXG4gIH07XG5cbiAgbG9jYXRpb25BUEkuZ2V0UGFyYW1QYXRoQnlUaXBvID0gZnVuY3Rpb24oX3RpcG8pIHtcblxuICAgIHZhciByZXN0R2VvRGF0YVNlcnZpY2VQYXRoID0ge1xuICAgICAgJ0VTUVVJTkEnOlwiL2VzcXVpbmFcIixcbiAgICAgICdESVJFQ0NJT04nOlwiL2RpcmVjY2lvblwiXG4gICAgfTtcblxuICAgIHJldHVybiByZXN0R2VvRGF0YVNlcnZpY2VQYXRoW190aXBvXTtcblxuXG4gIH07XG5cbiAgcmV0dXJuIGxvY2F0aW9uQVBJO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnXycsIFtmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHdpbmRvdy5fOyAvL1VuZGVyc2NvcmUgbXVzdCBhbHJlYWR5IGJlIGxvYWRlZCBvbiB0aGUgcGFnZVxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ1VzZXJTZXJ2aWNlJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG5cbiAgLy92YXIgYmFzZVVSTCA9IFwiaHR0cDovL3BtYnV5LmRldmVsb3BtZW50LmRhdGF1eS5vcmcvYXV0aC9hamF4L1wiO1xuICB2YXIgVXNlck9iaiA9IHt9O1xuICBVc2VyT2JqLnVpZCA9IG51bGw7XG4gIFVzZXJPYmoubmFtZSA9IG51bGw7XG4gIFVzZXJPYmouZW1haWwgPSBudWxsO1xuICBVc2VyT2JqLnBhc3N3b3JkID0gbnVsbDtcbiAgVXNlck9iai5waWN0dXJlX3VybCA9IFwidXJsKC4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nKVwiO1xuICBVc2VyT2JqLnNob3dfbG9jYXRpb24gPSBudWxsO1xuXG5cbiAgVXNlck9iai5zYXZlX3VzZXJfZGF0YSA9IGZ1bmN0aW9uICh1c2VyX25hbWUsIHVzZXJfcGFzc3dvcmQsIHVzZXJfcGljdHVyZV91cmwsIHNob3dfbG9jYXRpb24sIHVpZCwgc3RhdHVzLCBnZW5kZXIsIGludGVyZXN0ZWQpIHtcbiAgICAgIFVzZXJPYmoudWlkID0gdWlkO1xuICAgICAgVXNlck9iai5uYW1lID0gdXNlcl9uYW1lO1xuICAgICAgVXNlck9iai5wYXNzd29yZCA9IHVzZXJfcGFzc3dvcmQ7XG4gICAgICBVc2VyT2JqLnBpY3R1cmVfdXJsID0gdXNlcl9waWN0dXJlX3VybDtcbiAgICAgIFVzZXJPYmouc2hvd19sb2NhdGlvbiA9IHNob3dfbG9jYXRpb247XG4gICAgICBVc2VyT2JqLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgIFVzZXJPYmouZ2VuZGVyID0gZ2VuZGVyO1xuICAgICAgVXNlck9iai5pbnRlcmVzdGVkID0gaW50ZXJlc3RlZDtcblxuICAgICAgLy9TQVZFIElOIFBPVUNIREJcbiAgfVxuXG4gIFVzZXJPYmouZXJhc2VfdXNlcl9kYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIFVzZXJPYmoubmFtZSA9IG51bGw7XG4gICAgVXNlck9iai5lbWFpbCA9IG51bGw7XG4gICAgVXNlck9iai5wYXNzd29yZCA9IG51bGw7XG4gICAgVXNlck9iai5pZGVudGl0eV9kb2N1bWVudCA9IG51bGw7XG4gICAgVXNlck9iai5waG9uZSA9IG51bGw7XG4gICAgVXNlck9iai5waWN0dXJlX3VybCA9IG51bGw7XG4gICAgLy9ERUxFVEUgSU4gUE9VQ0hEQlxuICB9XG5cbiAgVXNlck9iai5nZXRfdXNlcl9kYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIC8vTEVWQU5UQSBERSBQT1VDSERCIExPUyBEQVRPUyBERUwgVVNVQVJJTy4gU0kgSEFZIExPUyBQT05FIEVOIExBUyBWQVJJQUJMRVMgREVMIFNFUlZJQ0lPLiBTSSBOTyBIQVkgUE9ORSBUT0RPIE5VTExcbiAgfVxuXG4gIFVzZXJPYmouYWRkX3Bob3RvID0gZnVuY3Rpb24gKHVzZXJfcGljdHVyZV91cmwpIHtcbiAgICBVc2VyT2JqLnBpY3R1cmVfdXJsID0gdXNlcl9waWN0dXJlX3VybDtcbiAgfVxuXG4gIFVzZXJPYmouaXNMb2dnZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYoVXNlck9iai5uYW1lIT1udWxsICYmIFVzZXJPYmoubmFtZSE9XCJcIil7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9ZWxzZXtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuXG4gIHJldHVybiBVc2VyT2JqO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnVmFsaWRhdGlvblNlcnZpY2UnLCBbJyRodHRwJywnJGlvbmljUG9wdXAnLCBmdW5jdGlvbigkaHR0cCwkaW9uaWNQb3B1cCkge1xuXG4gIHJldHVybiB7XG4gICAgaXNNb2JpbGVEZXZpY2U6IGZ1bmN0aW9uKCl7XG4gICAgICBpZih3aW5kb3cuY29yZG92YSl7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgfSxcblxuICAgIHZhbGlkYXRlX25vdF9lbXB0eTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmKHZhbHVlIT1udWxsICYmIHZhbHVlIT1cInVuZGVmaW5lZFwiICYmIHZhbHVlIT1cIlwiKXtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHZhbGlkYXRlX3R3b193b3JkczogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmKHZhbHVlIT1udWxsICYmIHZhbHVlIT1cInVuZGVmaW5lZFwiICYmIHZhbHVlIT1cIlwiKXtcbiAgICAgICAgICB2YXIgdmFsdWVzID0gdmFsdWUuc3BsaXQoJyAnKS5maWx0ZXIoZnVuY3Rpb24odil7cmV0dXJuIHYhPT0nJ30pO1xuICAgICAgICAgIGlmICh2YWx1ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAvL3R3byBvciBtb3JlIHdvcmRzXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vbm90IGVub3VnaCB3b3Jkc1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdmFsaWRhdGVfZXF1YWxzVG86IGZ1bmN0aW9uICh2YWx1ZSxzZWNvbmRWYWx1ZSkge1xuICAgICAgaWYodmFsdWU9PXNlY29uZFZhbHVlKXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB2YWxpZGF0ZV9lbWFpbDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmKHZhbHVlIT1udWxsICYmIHZhbHVlIT1cInVuZGVmaW5lZFwiICYmIHZhbHVlIT1cIlwiKXtcbiAgICAgICAgICB2YXIgcmUgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbiAgICAgICAgICByZXR1cm4gcmUudGVzdCh2YWx1ZSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB2YWxpZGF0ZV9pZGRvY191eTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZih2YWx1ZSE9bnVsbCAmJiB2YWx1ZSE9XCJ1bmRlZmluZWRcIiAmJiB2YWx1ZSE9XCJcIil7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXEQvZywgJycpO1xuICAgICAgICAgIHZhciBkaWcgPSB2YWx1ZVt2YWx1ZS5sZW5ndGggLSAxXTtcbiAgICAgICAgICB2YXIgYSA9IDA7IHZhciBpID0gMDtcbiAgICAgICAgICBpZih2YWx1ZS5sZW5ndGggPD0gNil7XG4gICAgICAgICAgICBmb3IoaSA9IHZhbHVlLmxlbmd0aDsgaSA8IDc7IGkrKyl7XG4gICAgICAgICAgICAgIHZhbHVlID0gJzAnICsgdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvcihpID0gMDsgaSA8IDc7IGkrKyl7XG4gICAgICAgICAgICBhICs9IChwYXJzZUludChcIjI5ODc2MzRcIltpXSkgKiBwYXJzZUludCh2YWx1ZVtpXSkpICUgMTA7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgaWYoYSUxMCA9PT0gMCl7XG4gICAgICAgICAgICByZXN1bHQgPSAwO1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmVzdWx0ID0gMTAgLSBhICUgMTA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKGRpZyA9PSByZXN1bHQpe1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XSk7XG4iXX0=
