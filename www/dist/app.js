window.VERSION = "0.0.2";var pmb_im={controllers:angular.module("pmb_im.controllers",[]),services:angular.module("pmb_im.services",[])};pmb_im.app=angular.module("pmb_im",["ionic","ionic.wizard","ion-autocomplete","leaflet-directive","pmb_im.controllers","pmb_im.services","ngCordova"]).constant("ApiImEndpoint",{url:"http://www.montevideo.gub.uy"}).constant("ApiDataEndpoint",{url:"http://tomamosuna.info"}).run(["$ionicPlatform","$rootScope","$cordovaKeyboard",function(e,t,n){t.VERSION=window.VERSION,e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!1),ionic.Platform.isFullScreen=!0,window.StatusBar&&StatusBar.styleDefault()})}]).config(["$stateProvider","$urlRouterProvider","$compileProvider","$ionicConfigProvider",function(e,t,n,o){n.debugInfoEnabled(!1),e.state("app",{cache:!1,url:"/app","abstract":!0,templateUrl:"templates/menu.html",controller:"AbsController"}).state("app.map",{cache:!1,url:"/map",views:{menuContent:{templateUrl:"templates/map.html",controller:"MapController"}}}).state("app.intro",{cache:!1,url:"/intro",views:{menuContent:{templateUrl:"templates/intro.html",controller:"IntroCtrl"}}}),t.otherwise("/app/intro")}]),pmb_im.controllers.controller("AbsController",["$scope",function(e){}]),pmb_im.controllers.controller("IntroCtrl",["$scope","$state","$cordovaGeolocation","$stateParams","$ionicPlatform","$ionicPopup","LocationsService","DBService",function(e,t,n,o,a,i,r,s){var l=s.initDB();l.info().then(console.log.bind(console)),e.geolocate=function(){var e={timeout:3500,enableHighAccuracy:!0};n.getCurrentPosition(e).then(function(e){r.save_initial_position(e),t.go("app.map")},function(e){t.go("app.map")})},e.$on("$ionicView.enter",function(){null!=r.council_modal&&(r.council_modal.hide(),r.council_modal.remove()),e.geolocate()})}]),pmb_im.controllers.controller("MapController",["$scope","_","$cordovaCamera","$cordovaGeolocation","$compile","$ionicModal","$ionicPopup","leafletData","ConfigService","LocationsService","PinService","MessageService","DrinkService","AuthService","UserService","DBService","$timeout","$interval","$location","ErrorService","$ionicSlideBoxDelegate","$ionicScrollDelegate","PopUpService","ConnectivityService","$cordovaInAppBrowser","MapService","ModalService","SemaphoreService","ValidationService",function(e,t,n,o,a,i,r,s,l,c,u,d,p,m,_,g,f,v,h,y,b,w,k,I,A,E,D,R,B){e.online_user_geo={},e.online_user_geo_array=new Array,e.baseURL=l.baseURL,e.AppName=l.AppName,e.user_cached_image="./img/icon-user-anonymous.png",e.one_value_popup=null,e.myIntervals=new Array,e.$on("$ionicView.beforeEnter",function(){D.checkNoModalIsOpen(),g.initDB(),I.isOnline()?e.check_user_logged():e.set_offline_user(),document.getElementById("foot_bar").style.display="block",I.isOnline()&&(e.create_online_map(),e.myIntervals.userLocation=v(function(){e.sendUserLocation()},3e4))}),e.$on("$ionicView.afterEnter",function(){s.getMap();""!=c.initial_lat?E.centerMapOnCoords(c.initial_lat,c.initial_lng,16):E.centerMapOnCoords(-34.901113,-56.164531,14)}),e.openWebsite=function(e){var t={location:"no",clearcache:"yes",toolbar:"no"};A.open(e,"_blank",t).then(function(e){})["catch"](function(e){})},e.create_online_map=function(){e.map={defaults:{tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",minZoom:12,maxZoom:18,zoomControlPosition:"topleft"},markers:{},events:{map:{enable:["context"],logic:"emit"}},center:{}},e.loadPinsLayer(),e.map.center={lat:-34.901113,lng:-56.164531,zoom:16},s.getMap().then(function(t){t.on("moveend",e.hideOffScreenPins)})},e.next=function(){b.next()},e.previous=function(){b.previous()},e.back_to_map=function(e){e?(D.checkNoModalIsOpen(),document.getElementById("foot_bar").style.display="block",document.getElementById("spinner-inside-modal").style.display="none"):document.getElementById("spinner-inside-modal").style.display="none"},e.image=null,e.addImage=function(t,o,a,i){e.isUserPhoto=o,e.isCommentPhoto=a,e.isNewUserPhoto=i;var r=Camera.PictureSourceType.CAMERA,s=!0,l=!0;1==t&&(r=Camera.PictureSourceType.PHOTOLIBRARY,s=!1,l=!1);var c={quality:90,destinationType:Camera.DestinationType.FILE_URI,sourceType:r,allowEdit:!1,correctOrientation:s,encodingType:Camera.EncodingType.JPEG,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:l,targetWidth:500,targetHeight:500};n.getPicture(c).then(function(t){function n(t){window.FilePath.resolveNativePath(t,function(n){t="file://"+n,n.startsWith("file://")&&(t=n),1==e.isUserPhoto?e.profile.picture_url=t:1==e.isCommentPhoto?e.comment.file=t:1==e.isNewUserPhoto&&(e.newuser.picture_url=t),e.imgURI=t},function(e){alert("Error resolveNativePath"+e)})}n(t)},function(e){})},e.urlForImage=function(){var t="http://placehold.it/200x200";if(e.image){var n=e.image.substr(e.image.lastIndexOf("/")+1);t=cordova.file.dataDirectory+n}return t},e.scrollMe=function(e){h.hash(e);var t=w.$getByHandle("content");t.anchorScroll()},e.set_active_option=function(e){document.getElementById(e).className="option-active"},e.hide_special_divs=function(){document.getElementById("user-options-menu").style.display="none"},e.close_report_detail_modal=function(){D.checkNoModalIsOpen(),e.report_detail_id=null},e.locate=function(){o.getCurrentPosition().then(function(t){e.map.center.lat=t.coords.latitude,e.map.center.lng=t.coords.longitude,e.map.center.zoom=15,e.map.markers.now={lat:t.coords.latitude,lng:t.coords.longitude,message:"You Are Here",focus:!0,draggable:!1}},function(e){})},e.addMapControls=function(){document.getElementById("map_crosshair").style.display="block",document.getElementById("map_crosshair_button").style.display="block"},e.changeUserLocationPin=function(t,n,o){if(e.online_user_geo_array[o]){layer=e.online_user_geo_array[o];var a=new L.LatLng(t,n);layer.setLatLng(a)}},e.hideOffScreenPins=function(){s.getMap().then(function(t){var n=t.getBounds();e.usersVisible=[],e.online_user_geo_array.forEach(function(o,a){var i=n.contains(o.getLatLng());n._northEast.lat=n._northEast.lat+.003,n._northEast.lon=n._northEast.lon-.003,n._southWest.lat=n._southWest.lat-.003,n._southWest.lon=n._southWest.lon+.003,i?i&&(t.addLayer(o),e.usersVisible.push(o.feature)):t.removeLayer(o)})})},e.removeAllPins=function(){s.getMap().then(function(t){e.usersVisible=[],e.online_user_geo_array&&e.online_user_geo_array.forEach(function(e,n){t.removeLayer(e)})})},e.loadPinsLayer=function(){document.getElementById("spinner").style.display="block",s.getMap().then(function(t){u.getAll().then(function(n){if(null==u.lastPinsResponse||u.lastPinsResponse&&u.lastPinsResponse!=n){e.online_user_geo_array&&(e.usersVisible=[],e.online_user_geo_array.forEach(function(e,n){t.removeLayer(e)})),u.lastPinsResponse=n,e.reportsByState={};var o=n.data.features;e.online_users_geo=n.data.features,o.forEach(function(t){if(t.properties){var n=t.geometry.coordinates[0],o=t.geometry.coordinates[1];if(n&&o){var i=t.properties.Icon;"anon"==i&&(i="./img/icon-user-anonymous.png");var r=L.icon({shadowUrl:"./img/generic_pin_green.png",shadowSize:[100,138],shadowAnchor:[44,138],iconUrl:i,iconSize:[46,46],iconAnchor:[24,120],popupAnchor:[0,-138]}),s=L.marker([o,n],{icon:r});if(s.feature=t,e.online_user_geo_array[s.feature.properties.Uid]=s,t.properties){var l=t.properties.Uid,c=t.properties.Name,u=t.properties.InterestedIn,p=t.properties.Status,m=t.properties.Gender;0==d.canTalkToUsers[l],_.uid&&_.uid==l&&(c="Tú: "+c);var g=e.timeConverter(t.properties.LocationTimeStamp);html='<a class="name_inside_marker_popup"><p>'+c+"</p>",html=html+'<p class="gender_inside_marker_popup">'+m+"</p>",html=html+'<p><img class="img_inside_marker_popup" src="'+i+'"/></p>',html=html+'<p class="status_inside_marker_popup">"'+p+'"</p>',html=html+'<p class="interested_inside_marker_popup">Interesad@ en '+u+"</p>",html=html+'<p class="lastupdate_inside_marker_popup">'+g+"</p>",_.uid&&_.uid==l||(html=html+'<p class="message_icon_inside_marker_popup"><img ng-click="send_message_to('+l+');" src="./img/message_icon.png" />',html=html+'<img ng-click="openInvitationsModal('+l+');" src="./img/drink_icon.png" /></p>'),html+="</a>";var f=a(html)(e);s.bindPopup(f[0])}}}}),e.checkTalkStatus(),document.getElementById("spinner").style.display="none",e.hideOffScreenPins()}})})},e.checkTalkStatus=function(){e.myIntervals.canTalk=v(function(){R.takeIfAvailable("can_talk")&&d.checkWhoCanTalk(_.name,_.password).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(n.forEach(function(e){d.canTalkToUsers["uid-"+e]=1}),R.makeAvailableAgain("can_talk"))})},2e3)},e.key_press=function(e,t){var n=e.keyCode;if("private_chat"==t&&13==n)try{null===cordova||cordova&&cordova.plugins.Keyboard&&cordova.plugins.Keyboard.close()}catch(o){}},e.send_message_to=function(t){if(R.takeIfAvailable("open-modal"))if(document.getElementById("spinner").style.display="block",_.uid)if(e.canTalkToUser(t))e.chat=new Array,e.chat.other_user=new Array,e.chat.other_user.uid=t,e.chat.messages=new Array,e.chat.new_text_message="",d.getUserInfo(t).then(function(n){e.getObjectDataFromResponse(n).Photo?e.chat.other_user.picture_url=e.getObjectDataFromResponse(n).Photo:e.chat.other_user.picture_url="./img/icon-user-anonymous.png",e.chat.other_user.username=e.getObjectDataFromResponse(n).Name;var o=_.uid;d.getAllMessagesToUser(_.name,_.password,t,o).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.chat.messages=e.getObjectDataFromResponse(t)),e.myIntervals.privateMessage&&v.cancel(e.myIntervals.privateMessage),e.myIntervals.privateMessage=v(function(){d.getAllMessagesToUser(_.name,_.password,e.chat.other_user.uid,_.uid).then(function(t){var n=e.getObjectDataFromResponse(t);if(!n.Status||"error"!=n.Status){e.chat.messages=e.getObjectDataFromResponse(n);var o=e.chat.messages[e.chat.messages.length-1].nid;e.scrollMe("message-"+o)}})},5e3),i.fromTemplateUrl("templates/private_chat.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){document.getElementById("spinner").style.display="none",document.getElementById("user-options-menu").style.display="none",D.checkNoModalIsOpen(),D.activeModal=t,document.getElementById("foot_bar").style.display="none",D.activeModal.show(),R.makeAvailableAgain("open-modal");var n=e.chat.messages[e.chat.messages.length-1].nid;e.scrollMe("message-"+n)})})});else{R.makeAvailableAgain("open-modal"),document.getElementById("spinner").style.display="none";var n=r.alert({title:"Invita algo de tomar",template:"Debe tener al menos una invitación a un trago aceptada entre usted y esta persona para poder hablar."});n.then(function(e){})}else{document.getElementById("spinner").style.display="none",R.makeAvailableAgain("open-modal");var n=r.alert({title:"Inicie sesión o cree una nueva cuenta",template:"Debe estar logueado para poder enviar y recibir mensajes."});n.then(function(e){})}},e.checkIfCanReplyInvitation=function(e){return!(!_.uid||_.uid==e.uid||"Enviada"!=e.status&&"Recibida"!=e.status)},e.checkIfWaitingReplyFromInvitation=function(e){return!(!_.uid||_.uid!=e.uid||"Enviada"!=e.status&&"Recibida"!=e.status)},e.getDrinkCostByNid=function(t){var n=0;return e.invitation.available_drinks&&e.invitation.available_drinks.forEach(function(e){e.Nid==t&&(n=e.Credits)}),n},e.acceptInvitation=function(t){e.send_invitation_response("Aceptada",t),e.invitation.other_user.talk=!0},e.refuseInvitation=function(t){e.send_invitation_response("Rechazada",t)},e.canTalkToUser=function(e){if(_.uid)return null!=d.canTalkToUsers["uid-"+e]&&1==d.canTalkToUsers["uid-"+e]},e.send_invitation_response=function(t,n){var o=document.getElementById("error_container");if(o.style.display="none",null==n)o.style.display="block",o.innerHTML="Hubo un error. No se encuentra el ID de invitación";else{e.getDrinkCostByNid(e.invitation.selected_drink),e.invitation.user_credits;R.takeIfAvailable("submit-form")&&(document.getElementById("spinner-inside-modal").style.display="block",p.sendDrinkInvitationResponse(t,_.name,_.password,n,_.uid).then(function(t){R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none";var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status?(o.style.display="block",o.innerHTML=n.Message):d.canTalkToUsers["uid-"+e.invitation.other_user.uid]=null}))}},e.send_invitation=function(){var t=document.getElementById("error_container");if(null==e.invitation.selected_drink)t.style.display="block",t.innerHTML="Debe seleccionar una bebida a invitar";else{var n=e.getDrinkCostByNid(e.invitation.selected_drink),o=e.invitation.user_credits;parseFloat(n)>parseFloat(o)?(t.style.display="block",t.innerHTML="Créditos insuficientes. Para poder invitar esta bebida debe comprar más créditos"):R.takeIfAvailable("submit-form")&&(document.getElementById("spinner-inside-modal").style.display="block",p.sendDrinkInvitationToUser(e.invitation.selected_drink,e.invitation.other_user.uid,_.uid,_.name,_.password).then(function(n){R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none";var o=e.getObjectDataFromResponse(n);o.Status&&"error"==o.Status?(t.style.display="block",t.innerHTML=o.Message):(e.invitation.user_credits=o.NewCredits,e.invitation.selected_drink=null,d.canTalkToUsers["uid-"+e.invitation.other_user.uid]=null)}))}},e.openInvitationsModal=function(t){if(R.takeIfAvailable("open-modal"))if(document.getElementById("spinner").style.display="block",_.uid)e.invitation=new Array,e.invitation.response=null,e.invitation.other_user=new Array,e.invitation.other_user.uid=t,e.invitation.invitations=new Array,e.invitation.available_drinks=new Array,e.invitation.selected_drink=null,d.getUserInfo(t).then(function(t){e.getObjectDataFromResponse(t).Photo?e.invitation.other_user.picture_url=e.getObjectDataFromResponse(t).Photo:e.invitation.other_user.picture_url="./img/icon-user-anonymous.png",e.invitation.other_user.username=e.getObjectDataFromResponse(t).Name,p.getAllDrinksAvailable(_.name,_.password).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.invitation.available_drinks=n.Drinks,e.invitation.user_credits=n.UserCredits),p.getAllInvitationsWithUser(_.name,_.password,e.invitation.other_user.uid,_.uid).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.invitation.invitations=n),e.myIntervals.drinkInvitation&&v.cancel(e.myIntervals.drinkInvitation),e.myIntervals.drinkInvitation=v(function(){p.getAllInvitationsWithUser(_.name,_.password,e.invitation.other_user.uid,_.uid).then(function(t){var n=e.getObjectDataFromResponse(t);n.Status&&"error"==n.Status||(e.invitation.invitations=e.getObjectDataFromResponse(n))})},5e3),i.fromTemplateUrl("templates/drink_invitation.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){document.getElementById("spinner").style.display="none",document.getElementById("user-options-menu").style.display="none",D.checkNoModalIsOpen(),D.activeModal=e,document.getElementById("foot_bar").style.display="none",D.activeModal.show(),R.makeAvailableAgain("open-modal")})})})});else{document.getElementById("spinner").style.display="none",R.makeAvailableAgain("open-modal");var n=r.alert({title:"Inicie sesión o cree una nueva cuenta",template:"Debe estar logueado para poder enviar y recibir invitaciones."});n.then(function(e){})}},e.close_message_modal=function(){e.myIntervals.privateMessage&&v.cancel(e.myIntervals.privateMessage),e.myIntervals.drinkInvitation&&v.cancel(e.myIntervals.drinkInvitation),document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.close_invitation_modal=function(){e.myIntervals.privateMessage&&v.cancel(e.myIntervals.privateMessage),e.myIntervals.drinkInvitation&&v.cancel(e.myIntervals.drinkInvitation),document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.send_message_ok=function(){R.takeIfAvailable("submit-form")&&(e.chat.new_text_message?d.sendTextMessageToUser(e.chat.new_text_message,e.chat.other_user.uid,_.uid,_.name,_.password).then(function(t){R.makeAvailableAgain("submit-form"),document.getElementById("message_text_area").innerHTML="",e.chat.new_text_message="",d.getAllMessagesToUser(_.name,_.password,e.chat.other_user.uid,_.uid).then(function(t){e.chat.messages=e.getObjectDataFromResponse(t)})}):R.makeAvailableAgain("submit-form"))},e.getNameFromUid=function(t){return _.uid==t?_.name:e.chat.other_user.uid==t?e.chat.other_user.username:void 0},e.getNameFromUidInvitation=function(t){return _.uid==t?_.name:e.invitation.other_user.uid==t?e.invitation.other_user.username:void 0},e.timeConverter=function(e){var t=new Date(1e3*e),n=t.getFullYear(),o=t.getMonth();o<10&&(o="0"+o);var a=t.getDate();a<10&&(a="0"+a);var i=t.getHours();i<10&&(i="0"+i);var r=t.getMinutes();r<10&&(r="0"+r);var s=(t.getSeconds(),a+"/"+o+"/"+n+" "+i+":"+r);return s},e.model=[],e.externalModel=[],e.selectedItems=[],e.preselectedSearchItems=[],e.clickedValueModel="",e.removedValueModel="",e.itemsRemoved=function(t){e.removedValueModel=t},e.user_options=function(){var t=document.getElementById("user-options-menu");if("block"==t.style.display)t.style.display="none";else{var n=_.name;null==n?e.show_anonymous_menu():e.show_user_menu()}},e.show_anonymous_menu=function(){var t=document.getElementById("user-options-menu"),n="<div id='auth_options'><div class='nonauth-link' ng-click='show_login_modal()'>Iniciar sesión</div>";n+="<div class='nonauth-link' ng-click='show_sign_up_modal()'>Registrarse</div></div>",t.innerHTML=n,a(t)(e),t.style.height="120px",t.style.width="150px",t.style.display="block"},e.show_user_menu=function(){var t=document.getElementById("user-options-menu"),n=_.name+"<div id='auth_options'><div class='user-logged-link' ng-click='show_edit_profile_modal()'>Mi perfil</div>";n+="<div class='user-logged-link' ng-click='sign_out()'>Cerrar sesión</div></div>",t.innerHTML=n,a(t)(e),t.style.height="220px",t.style.width="200px",t.style.display="block"},e.create_field_array=function(e,t,n){var o=new Array;return o.name=e,o.type=t,o.value=n,o},e.create_field_array_with_twoFields=function(e,t,n,o){var a=new Array;return a.name=e,a.type=t,a.value=n,a.secondValue=o,a},e.fix_fb_image_link=function(e){if(e.indexOf("http://graph.facebook.com")>=0){var t=e.split("http://graph.facebook.com"),n="http://graph.facebook.com"+t[1];return n}return e},e.log_in=function(t,n){if(R.takeIfAvailable("submit-form"))if(I.isOnline()){document.getElementById("spinner-inside-modal").style.display="block";var o=new Array;o.push(e.create_field_array("Usuario","notNull",t)),o.push(e.create_field_array("Contraseña","notNull",n)),y.check_fields(o,"error_container")?m.log_in(t,n).then(function(t){y.http_response_is_successful(t,"error_container")?(photo=e.fix_fb_image_link(e.getObjectDataFromResponse(t).Photo),"anon"==photo&&(photo="url(./img/icon-user-anonymous.png)"),_.save_user_data(e.getObjectDataFromResponse(t).Name,e.nonauth.password,photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),g.saveUser(e.getObjectDataFromResponse(t).Name,e.nonauth.password,photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),e.set_user_picture(1),document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form"),e.close_login_modal(),e.sendUserLocation()):(R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none")},function(e){document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form"),y.show_error_message("error_container",e.statusText)}):(document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form"))}else R.makeAvailableAgain("submit-form"),k.show_alert("Sin conexión a internet","Para iniciar sesión debe estar conectado a internet")},e.log_in_background=function(t,n){m.log_in(t,n).then(function(t){return y.http_response_is_successful_ajax(t)?(photo=e.fix_fb_image_link(e.getObjectDataFromResponse(t).Photo),"anon"==photo&&(photo="url(./img/icon-user-anonymous.png)"),_.save_user_data(e.getObjectDataFromResponse(t).Name,n,photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),g.saveUser(e.getObjectDataFromResponse(t).Name,n,photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),e.set_user_picture(1),e.sendUserLocation(),1):0},function(e){return 0})},e.sendUserLocation=function(){if(R.takeIfAvailable("submit-location"))if(1==_.show_location){var t={timeout:1e4,enableHighAccuracy:!0};o.getCurrentPosition(t).then(function(t){u.sendUserLocation(t.coords.latitude,t.coords.longitude,_.name,_.password).then(function(n){return y.http_response_is_successful_ajax(n)?(c.save_last_user_position(t.coords.latitude,t.coords.longitude),e.loadPinsLayer(),R.makeAvailableAgain("submit-location"),1):(R.makeAvailableAgain("submit-location"),0)})},function(t){return R.makeAvailableAgain("submit-location"),e.loadPinsLayer(),0})}else R.makeAvailableAgain("submit-location"),e.loadPinsLayer()},e.sign_out=function(){_.erase_user_data(),g.eraseUser(),document.getElementById("spinner").style.display="none",e.set_user_picture(0),document.getElementById("user-options-menu").style.display="none"},e.show_edit_profile_modal=function(){R.takeIfAvailable("open-modal")&&(document.getElementById("spinner").style.display="block",e.newuser=new Array,e.newuser.email=_.email,e.newuser.gender=_.gender,e.newuser.username=_.name,e.newuser.interested=_.interested,e.newuser.status=_.status,e.newuser.show_location=_.show_location,e.actual_photo=_.picture_url,null!=e.actual_photo||(e.actual_photo="./img/icon-user-anonymous.png"),"url(./img/icon-user-anonymous.png)"==e.actual_photo&&(e.actual_photo="./img/icon-user-anonymous.png"),D.checkNoModalIsOpen(),B.isMobileDevice()?i.fromTemplateUrl("templates/edit_profile_with_photo.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){document.getElementById("spinner").style.display="none",document.getElementById("user-options-menu").style.display="none",D.activeModal=e,document.getElementById("foot_bar").style.display="none",D.activeModal.show(),R.makeAvailableAgain("open-modal")}):i.fromTemplateUrl("templates/edit_profile_with_photo_desktop.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(e){document.getElementById("spinner").style.display="none",document.getElementById("user-options-menu").style.display="none",D.activeModal=e,document.getElementById("foot_bar").style.display="none",D.activeModal.show(),R.makeAvailableAgain("open-modal")}))},e.readURL=function(t,n){if(t.files&&t.files[0]){1==n?e.newuser.picture_url=t.files[0]:2==n?e.comment.photo=t.files[0]:e.report.file=t.files[0];var o=new FileReader;o.onload=function(e){document.getElementById("myImage").src=e.target.result},o.readAsDataURL(t.files[0])}},e.close_edit_profile_modal=function(){document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.edit_profile_ok=function(){e.edit_profile()},e.getObjectDataFromResponse=function(e){return e.data?e.data:e},e.edit_profile=function(){if(R.takeIfAvailable("submit-form"))if(I.isOnline()){document.getElementById("spinner-inside-modal").style.display="block",e.newuser.password=_.password;var t=m.edit_user(e.newuser);null!=e.newuser.picture_url&&""!=e.newuser.picture_url&&B.isMobileDevice()?t.then(function(t){var n=JSON.parse(t.response);y.http_data_response_is_successful(n,"error_container")?(n=e.getObjectDataFromResponse(n),_.save_user_data(n.Name,e.newuser.password,n.Photo,n.ShowLocation,n.Uid,n.Estado,n.Gender,n.InterestedIn),g.saveUser(n.Name,e.newuser.password,n.Photo,n.ShowLocation,n.Uid,n.Estado,n.Gender,n.InterestedIn),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none",e.close_edit_profile_modal(),e.check_user_logged()):(R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none")},function(e){var t="Código: "+e.code;t=t+" Origen: "+e.source,t=t+" Destino: "+e.target,t=t+" http_status: "+e.http_status,t=t+" Body: "+e.body,t=t+" Exception: "+e.exception,y.show_error_message("error_container","Hubo un error en el envío: "+t),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none"},function(t){f(function(){e.uploadProgress=t.loaded/t.total*100,document.getElementById("sent_label").innerHTML="Enviado: "+Math.round(e.uploadProgress)+"%"})}):t.success(function(t){document.getElementById("sent_label").innerHTML="Enviado: 100%",y.http_response_is_successful(t,"error_container")?(_.save_user_data(e.getObjectDataFromResponse(t).Name,e.newuser.password,e.getObjectDataFromResponse(t).Photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),g.saveUser(e.getObjectDataFromResponse(t).Name,e.newuser.password,e.getObjectDataFromResponse(t).Photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form"),e.close_edit_profile_modal(),e.check_user_logged()):(R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none")}).error(function(e,t,n,o){y.show_error_message("error_container",t),document.getElementById("spinner-inside-modal").style.display="none",R.makeAvailableAgain("submit-form")})}else R.makeAvailableAgain("submit-form"),k.show_alert("Sin conexión a internet","Para editar su perfil debe estar conectado a internet")},e.show_login_modal=function(){R.takeIfAvailable("open-modal")&&(e.nonauth=new Array,e.nonauth.user="",e.nonauth.password="",D.checkNoModalIsOpen(),i.fromTemplateUrl("templates/log_in.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){e.hide_special_divs(),D.activeModal=t,R.makeAvailableAgain("open-modal"),document.getElementById("foot_bar").style.display="none",D.activeModal.show()}))},e.login_ok=function(){e.log_in(e.nonauth.user,e.nonauth.password)},e.close_login_modal=function(){document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.show_sign_up_modal=function(){R.takeIfAvailable("open-modal")&&(e.newuser=new Array,e.newuser.email="",e.newuser.password="",e.newuser.fullname="",e.newuser.id_doc="",e.newuser.telephone="",e.newuser.photo="",D.checkNoModalIsOpen(),B.isMobileDevice()?i.fromTemplateUrl("templates/sign_up.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){e.hide_special_divs(),D.activeModal=t,R.makeAvailableAgain("open-modal"),document.getElementById("foot_bar").style.display="none",D.activeModal.show()}):i.fromTemplateUrl("templates/sign_up_desktop.html",{scope:e,hardwareBackButtonClose:!1,animation:"slide-in-up"}).then(function(t){e.hide_special_divs(),D.activeModal=t,R.makeAvailableAgain("open-modal"),document.getElementById("foot_bar").style.display="none",D.activeModal.show()}))},e.close_sign_up_modal=function(){document.getElementById("foot_bar").style.display="block",D.checkNoModalIsOpen()},e.sign_up=function(){if(R.takeIfAvailable("submit-form"))if(I.isOnline()){document.getElementById("spinner-inside-modal").style.display="block";new Array;null!=e.newuser.picture_url&&""!=e.newuser.picture_url&&B.isMobileDevice()?m.create_user(e.newuser).success(function(t,n,o,a){document.getElementById("sent_label").innerHTML="Enviado: 100%",y.http_data_response_is_successful(t,"error_container")?(t=e.getObjectDataFromResponse(t),_.save_user_data(t.name,t.email,e.newuser.password,t.identity_document,t.phone,t.picture_url),_.save_user_data(t.Name,e.newuser.password,t.Photo,t.ShowLocation,t.Uid,t.Estado,t.Gender,t.InterestedIn),g.saveUser(t.Name,password,t.Photo,t.ShowLocation,t.Uid,t.Estado,t.Gender,t.InterestedIn),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none",e.close_edit_profile_modal(),e.check_user_logged()):(R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none")}).error(function(e,t,n,o){y.show_error_message("error_container",t),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none"}):m.create_user(e.newuser).then(function(t){if(y.http_response_is_successful(t,"error_container")){_.save_user_data(e.getObjectDataFromResponse(t).Name,e.newuser.password,e.getObjectDataFromResponse(t).Photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),g.saveUser(e.getObjectDataFromResponse(t).Name,e.newuser.password,e.getObjectDataFromResponse(t).Photo,e.getObjectDataFromResponse(t).ShowLocation,e.getObjectDataFromResponse(t).Uid,e.getObjectDataFromResponse(t).Estado,e.getObjectDataFromResponse(t).Gender,e.getObjectDataFromResponse(t).InterestedIn),R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none",e.close_sign_up_modal();var n=r.alert({title:"Usuario creado con éxito",template:e.getObjectDataFromResponse(t).message});n.then(function(e){}),e.check_user_logged()}else R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none"},function(e){R.makeAvailableAgain("submit-form"),document.getElementById("spinner-inside-modal").style.display="none",y.show_error_message("error_container",e.statusText)})}else R.makeAvailableAgain("submit-form"),k.show_alert("Sin conexión a internet","Para iniciar registrarse debe estar conectado a internet")},e.sign_up_ok=function(){e.sign_up()},e.check_user_logged=function(){var t=_.name;if(null==t){var n=g.getUser();n.then(function(t){null!=t.name&&""!=t.name&&"undefined"!=t.name?e.log_in_background(t.name,t.password):e.set_user_picture(0)})["catch"](function(t){e.set_user_picture(0)})}else null==_.picture_url||""==_.picture_url?e.set_user_picture(0):e.set_user_picture(1)},e.set_offline_user=function(){var t=_.name;if(null==t){var n=g.getUser();n.then(function(t){null!=t.name&&""!=t.name&&"undefined"!=t.name?_.save_user_data(t.name,t.password,t.picture_url,t.show_location):e.set_user_picture(0)})["catch"](function(t){e.set_user_picture(0)})}else null==_.picture_url||""==_.picture_url?e.set_user_picture(0):e.set_user_picture(1)},e.set_user_picture=function(t){document.getElementById("user_picture");0==t?e.user_cached_image="./img/icon-user-anonymous.png":null!=_.picture_url&&""!=_.picture_url?e.user_cached_image=_.picture_url:e.user_cached_image="./img/icon-user-anonymous.png"},e.find_me=function(){e.set_active_option("button-find-me"),e.hide_special_divs();var t={timeout:1e4,enableHighAccuracy:!0};o.getCurrentPosition(t).then(function(t){e.map.center.lat=t.coords.latitude,e.map.center.lng=t.coords.longitude,c.save_new_report_position(t.coords.latitude,t.coords.longitude),I.isOnline()?e.map.center.zoom=18:e.map.center.zoom=16,e.map.markers.now={lat:t.coords.latitude,lng:t.coords.longitude,message:"<p align='center'>Te encuentras aquí <br/> <a ng-click='new_report(1);'>Iniciar reporte en tu posición actual</a></p>",
focus:!0,draggable:!1,getMessageScope:function(){return e}}},function(t){e.openCouncilSelector()})}}]),pmb_im.services.factory("AuthService",["$http","$cordovaFileTransfer","ConfigService","ValidationService",function(e,t,n,o){var a=n.baseURL+"/api/";return{log_in:function(t,n){var o="user="+t+"&password="+n;return e.post(a+"login",o,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sign_out:function(t,n){return e.get(a+"sign_out",{withCredentials:!0,params:{password_sign_in:t,email:n}})},create_user:function(n){if(n.picture_url&&o.isMobileDevice()){var i={fileKey:"photo",withCredentials:!0,params:{user:n.username,password:n.password,email:n.email,gender:n.gender,interested:n.interested,status:n.status,show_location:n.show_location}},r=!0;return t.upload(a+"create_user",n.picture_url,i,r)}if(n.picture_url){var s=new FormData;return s.append("photo",n.picture_url),s.append("user",n.username),s.append("password",n.password),s.append("email",n.email),s.append("gender",n.gender),s.append("interested",n.interested),s.append("status",n.status),s.append("show_location",n.show_location),e.post(a+"create_user",s,{headers:{"Content-Type":void 0},transformRequest:angular.identity})}var l="user="+n.username+"&password="+n.password+"&email="+n.email+"&gender="+n.gender;return l=l+"&interested="+n.interested+"&status="+n.status+"&show_location="+n.show_location,e.post(a+"create_user",l,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},password_recovery:function(t){return e.get(a+"forgot_password",{params:{login_email:t}})},password_change:function(t,n,o,i){var r="email="+t+"&password_sign_in="+n+"&new_password="+o+"&confirm="+i;return e.post(a+"change_password",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},edit_user:function(n){if(n.picture_url&&o.isMobileDevice()){var i={fileKey:"photo",withCredentials:!0,params:{user:n.username,password:n.password,email:n.email,gender:n.gender,interested:n.interested,status:n.status,show_location:n.show_location}},r=!0;return t.upload(a+"edit_profile",n.picture_url,i,r)}var s="user="+n.username+"&password="+n.password+"&email="+n.email+"&gender="+n.gender;if(s=s+"&interested="+n.interested+"&status="+n.status+"&show_location="+n.show_location,n.picture_url){var l=new FormData;return l.append("photo",n.picture_url),l.append("user",n.username),l.append("password",n.password),l.append("email",n.email),l.append("gender",n.gender),l.append("interested",n.interested),l.append("status",n.status),l.append("show_location",n.show_location),e.post(a+"edit_profile",l,{headers:{"Content-Type":void 0},transformRequest:angular.identity})}return e.post(a+"edit_profile",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),pmb_im.services.factory("ConfigService",["$http",function(e){var t={};return t.baseURL="http://tomamosuna.info",ionic.Platform.isWebView()?t.baseURL="http://tomamosuna.info":t.baseURL="/backend",t.AppName="¿Tomamos una?",t.baseCobrand="/cobrands/pormibarrio",t}]),pmb_im.services.factory("ConnectivityService",["$cordovaNetwork",function(e){return{isOnline:function(){return!0},isOffline:function(){return!1}}}]),pmb_im.services.factory("DBService",["$q",function(e){function t(e,t,o,a,i,r,s,l){var c={_id:"user-logged",name:e,password:t,picture_url:o,show_location:a,uid:i,status:r,gender:s,interested:l};n().then(function(e){return c._rev=e._rev,m.put(c)})["catch"](function(e){return m.put(c)})}function n(){return m.get("user-logged")}function o(){m.get("user-logged").then(function(e){return m.remove(e)})}function a(){return m=new PouchDB("tomamosuna_local_db")}function i(e){var t=new Date,n="report_"+t.getFullYear()+(t.getMonth()+1)+t.getDate()+t.getMilliseconds();return e._id=n,m.put(e)}function r(e){return m.put(e)}function s(){return m.get("categories-list")}function l(e){s().then(function(t){return e._rev=t._rev,m.put(e)})["catch"](function(t){return e._id="categories-list",m.put(e)})}function c(e){return m.get(e)}function u(){return m.allDocs({include_docs:!0,attachments:!1,startkey:"report_",endkey:"report_￿"})}function d(e){m.get(e).then(function(e){return m.remove(e)})}function p(e){return m.remove(e)}var m;return{initDB:a,saveUser:t,getUser:n,eraseUser:o,saveReport:i,getReport:c,getAllReports:u,updateReport:r,deleteReport:d,deleteGivenReport:p,getCategories:s,saveCategories:l}}]),pmb_im.services.factory("DrinkService",["$http","ConfigService",function(e,t){var n=t.baseURL+"/api/";return{getAllDrinksAvailable:function(t,o){var a="user="+t+"&password="+o;return e.post(n+"get_possible_drinks",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},getAllInvitationsWithUser:function(t,o,a,i){var r="user="+t+"&password="+o;return r=r+"&uid="+a+"&author_uid="+i,e.post(n+"get_invitations_between_users",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sendDrinkInvitationToUser:function(t,o,a,i,r){var s="user="+i+"&password="+r+"&drink_nid="+t+"&destination_uid="+o+"&author_uid="+a;return e.post(n+"send_drink_invitation",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},sendDrinkInvitationResponse:function(t,o,a,i,r){var s="response="+t+"&user="+o+"&password="+a+"&invitation_nid="+i+"&destination_uid="+r;return e.post(n+"invitation_response",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}}]),pmb_im.services.factory("ErrorService",["$http","$ionicPopup","ValidationService",function(e,t,n){return{http_response_is_successful:function(e,t){var n=document.getElementById(t);return e.data&&"success"==e.data.Status||"success"==e.Status?(n.style.display="none",!0):(e.data?n.innerHTML="<h3>"+e.data.Message+"</h3>":n.innerHTML="<h3>"+e.Message+"</h3>",n.style.display="block",!1)},http_response_is_successful_ajax:function(e){return 0!=e.data.result},http_response_is_successful_popup:function(e){if(0==e.data.result){var n=t.alert({title:"Error",template:e.data.message});return n.then(function(e){return!1}),!1}return!0},http_data_response_is_successful:function(e,t){var n=document.getElementById(t);return"success"!=e.Status?(n.innerHTML="<h3>"+e.Message+"</h3>",n.style.display="block",!1):(n.style.display="none",!0)},http_data_response_is_successful_ajax:function(e){return 0!=e.result},show_error_message:function(e,t){var n=document.getElementById(e);return n.innerHTML="<h3>"+t+"</h3>",n.style.display="block",!1},show_error_message_popup:function(e){var n=t.alert({title:"Error",template:e});return n.then(function(e){return!1}),!1},check_fields:function(e,t){var o="";if(e.forEach(function(e){"notNull"==e.type&&(n.validate_not_empty(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no puede estar vacío.</h3>')),"email"==e.type&&(n.validate_email(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no es una dirección de correo válida.</h3>')),"iddoc_uy"==e.type&&(n.validate_iddoc_uy(e.value)||(o=o+'<h3>- El campo "'+e.name+'" no es una cédula uruguaya válida.</h3>')),"two_words"==e.type&&(n.validate_two_words(e.value)||(o=o+'<h3>- El campo "'+e.name+'" debe contener al menos dos palabras.</h3>')),"equalsTo"==e.type&&(n.validate_equalsTo(e.value,e.secondValue)||(o=o+'<h3>- Los campos "'+e.name+'" no coinciden.</h3>'))}),""==o)return!0;var a=document.getElementById(t);return a.innerHTML=o,a.style.display="block",!1}}}]),pmb_im.services.factory("Loader",["$ionicLoading","$timeout","$ionicPopup",function(e,t,n){var o={showLoading:function(t){t=t||"Loading...",e.show({template:t})},hideLoading:function(){e.hide()},toggleLoadingWithMessage:function(e,n){var o=this;o.showLoading(e),t(function(){o.hideLoading()},n||3e3)},confirmPopup:function(e,t){var o=n.confirm({title:e,template:t});return o},showAlert:function(e,t){var o=n.alert({title:e,template:t});return o}};return o}]),pmb_im.services.factory("LocationsService",[function(){var e={};return e.initial_lat="",e.initial_lng="",e.last_user_lat="",e.last_user_lng="",e.council_modal=null,e.selected_council=null,e.selectCouncil=function(t){e.selected_council=t},e.save_initial_position=function(t){e.initial_lat=t.coords.latitude,e.initial_lng=t.coords.longitude},e.save_last_user_position=function(t,n){e.last_user_lat=t,e.last_user_lng=n},e.savedLocations=[],e}]),pmb_im.services.factory("MapService",["leafletData","$compile",function(e,t){proj4.defs("EPSG:32721","+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs");var n={};return n.goToPlace=function(n,o,a,i){var r={type:"FeatureCollection",crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::32721"}},features:[{type:"Feature",geometry:{type:"Point",coordinates:[o,a]},properties:{nombre:n}}]};e.getMap().then(function(e){var n,o=L.Proj.geoJson(r,{pointToLayer:function(e,o){n=o;var a="<p align='center'>"+e.properties.nombre+" <br/> <a ng-click='new_report_from_latlon("+n.lat+","+n.lng+");'>Iniciar reporte aquí</a></p>",r=t(a)(i);return L.marker(o).bindPopup(r[0])}});o.addTo(e),e.setView(n,18),o.openPopup()})},n.centerMapOnCoords=function(t,n,o){e.getMap().then(function(e){e.setView(new L.LatLng(t,n),o)})},n}]),pmb_im.services.factory("MessageService",["$http","leafletData","ConfigService",function(e,t,n){function o(e){angular.extend(this,e)}var a=(n.baseURL+"/sites/tomamos_una/files/json/online_users_geo.json",n.baseURL+"/api/");return o.getAllMessagesToUser=function(t,n,o,i){var r="user="+t+"&password="+n+"&author_uid="+i+"&uid="+o+"&hash_id="+Math.random();return e.post(a+"get_all_messages_to_user",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.getUserInfo=function(t){return e.get(a+"get_user_info",{cache:!1,params:{uid:t,hash_id:Math.random()}})},o.sendTextMessageToUser=function(t,n,o,i,r){var s="user="+i+"&password="+r+"&text="+t+"&destination_uid="+n+"&author_uid="+o;return e.post(a+"send_text_message",s,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.checkWhoCanTalk=function(t,n){var o="user="+t+"&password="+n;return e.post(a+"check_user_talk",o,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o.canTalkToUsers=new Array,o.current={},o.build=function(e){return new o(e)},o}]),pmb_im.services.factory("ModalService",[function(){var e={};return e.activeModal=null,e.checkNoModalIsOpen=function(){e.activeModal&&(e.activeModal.hide(),e.activeModal.remove())},e}]),pmb_im.services.factory("PinService",["$http","leafletData","ConfigService",function(e,t,n){function o(e){angular.extend(this,e)}var a=n.baseURL+"/sites/tomamos_una/files/json/online_users_geo.json",i=n.baseURL+"/api/";return o.getAll=function(){return e.get(a,{cache:!1,params:{hash_id:Math.random()}})},o.sendUserLocation=function(t,n,o,a){var r="user="+o+"&password="+a+"&lat="+t+"&lon="+n;return e.post(i+"send_user_position",r,{withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}})},o._all=[],o.current={},o.lastPinsResponse=null,o.build=function(e){return new o(e)},o.prototype.setLatLng=function(e){this.lat=e.lat,this.lon=e.lng},o}]),pmb_im.services.factory("PopUpService",["$ionicPopup","ValidationService",function(e,t){return{show_alert:function(t,n){var o=e.alert({title:t,template:n});return o.then(function(e){return!0}),!0},confirmPopup:function(t,n){var o=e.confirm({title:t,template:n});return o},askForOneValuePopUp:function(n,o,a,i,r){$scope=n;var s=e.show({template:i+': <input type="text" id="one_value_popup"><div id="error_container_inside"></div>',title:o,subTitle:a,scope:$scope,buttons:[{text:"Cancelar"},{text:"<b>Enviar</b>",type:"button-positive",onTap:function(e){var n="",o=document.getElementById("one_value_popup").value;if("notNull"==r&&(t.validate_not_empty(o)||(n=n+'<h3>- El campo "'+i+'" no puede estar vacío.</h3>')),"email"==r&&(t.validate_email(o)||(n=n+'<h3>- El campo "'+i+'" no es una dirección de correo válida.</h3>')),"iddoc_uy"==r&&(t.validate_iddoc_uy(o)||(n=n+'<h3>- El campo "'+i+'" no es una cédula uruguaya válida.</h3>')),"two_words"==r&&(t.validate_two_words(o)||(n=n+'<h3>- El campo "'+i+'" debe contener al menos dos palabras.</h3>')),""==n)return o;var a=document.getElementById("error_container_inside");a.innerHTML=n,a.style.display="block",e.preventDefault()}}]});return s}}}]),pmb_im.services.factory("SemaphoreService",[function(){var e={};return e.semaphores=new Array,e.semaphores["open-modal"]="available",e.semaphores["submit-form"]="available",e.semaphores["submit-location"]="available",e.semaphores.can_talk="available",e.takeIfAvailable=function(t){return"available"==e.semaphores[t]&&(e.semaphores[t]="occupied",!0)},e.makeAvailableAgain=function(t){return"occupied"==e.semaphores[t]&&(e.semaphores[t]="available",!0)},e}]),pmb_im.services.factory("locationAPI",["$http","$q","ApiImEndpoint","ApiDataEndpoint","ConfigService","LocationsService",function(e,t,n,o,a,i){var r="ubicacionesRestProd",s={};return s.searchLocationByStr=function(t){var n=a.baseURL+"/ajax/geocode?term="+i.selected_council+","+t;return e.get(n,{method:"GET",params:{}})},s.searchEsquinaByStr=function(t){var n=a.baseURL+"/ajax/geocode?term="+i.selected_council+","+t.calle+","+t.esquina;return e.get(n,{method:"GET",params:{}})},s.getLocationGeom=function(t){for(var o=n.url+"/"+r+s.getParamPathByTipo(t.tipo),a=0;a<t.pathParams.length;a++)o+="/"+t.pathParams[a];return e.get(baseURL).then(function(e){return e.data})},s.getLocationGeomPMB=function(t,n,o){var r=a.baseURL+"/ajax/geocode?term="+i.selected_council+","+t+","+n+","+o;return e.get(r)},s.getParamPathByTipo=function(e){var t={ESQUINA:"/esquina",DIRECCION:"/direccion"};return t[e]},s}]),pmb_im.services.factory("_",[function(){return window._}]),pmb_im.services.factory("UserService",["$http",function(e){var t={};return t.uid=null,t.name=null,t.email=null,t.password=null,t.picture_url="url(./img/icon-user-anonymous.png)",t.show_location=null,t.save_user_data=function(e,n,o,a,i,r,s,l){t.uid=i,t.name=e,t.password=n,t.picture_url=o,t.show_location=a,t.status=r,t.gender=s,t.interested=l},t.erase_user_data=function(){t.name=null,t.email=null,t.password=null,t.identity_document=null,t.phone=null,t.picture_url=null},t.get_user_data=function(){},t.add_photo=function(e){t.picture_url=e},t.isLogged=function(){return null!=t.name&&""!=t.name},t}]),pmb_im.services.factory("ValidationService",["$http","$ionicPopup",function(e,t){return{isMobileDevice:function(){return!!window.cordova},validate_not_empty:function(e){return null!=e&&"undefined"!=e&&""!=e},validate_two_words:function(e){if(null!=e&&"undefined"!=e&&""!=e){var t=e.split(" ").filter(function(e){return""!==e});return t.length>1}return!1},validate_equalsTo:function(e,t){return e==t},validate_email:function(e){if(null!=e&&"undefined"!=e&&""!=e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}return!1},validate_iddoc_uy:function(e){if(null!=e&&"undefined"!=e&&""!=e){e=e.replace(/\D/g,"");var t=e[e.length-1],n=0,o=0;if(e.length<=6)for(o=e.length;o<7;o++)e="0"+e;for(o=0;o<7;o++)n+=parseInt("2987634"[o])*parseInt(e[o])%10;var a;return a=n%10===0?0:10-n%10,t==a}return!1}}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImNvbnRyb2xsZXJzL2Ficy5jdHJsLmpzIiwiY29udHJvbGxlcnMvaW50cm8uY3RybC5qcyIsImNvbnRyb2xsZXJzL21hcC5jdHJsLmpzIiwic2VydmljZXMvYXV0aC5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2NvbmZpZy5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2Nvbm5lY3Rpdml0eS5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2RiLnNlcnZpY2VzLmpzIiwic2VydmljZXMvZHJpbmsuc2VydmljZXMuanMiLCJzZXJ2aWNlcy9lcnJvci5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2xvYWRlci5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL2xvY2F0aW9uc1NlcnZpY2UuanMiLCJzZXJ2aWNlcy9tYXAuc2VydmljZXMuanMiLCJzZXJ2aWNlcy9tZXNzYWdlLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy9tb2RhbFNlcnZpY2UuanMiLCJzZXJ2aWNlcy9waW4uc2VydmljZS5qcyIsInNlcnZpY2VzL3BvcHVwLnNlcnZpY2VzLmpzIiwic2VydmljZXMvc2VtYXBob3JlLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy91YmljYWNpb25lcy5zZXJ2aWNlcy5qcyIsInNlcnZpY2VzL3VuZGVyc2NvcmUuc2VydmljZS5qcyIsInNlcnZpY2VzL3VzZXIuc2VydmljZXMuanMiLCJzZXJ2aWNlcy92YWxpZGF0aW9uLnNlcnZpY2VzLmpzIl0sIm5hbWVzIjpbInBtYl9pbSIsImNvbnRyb2xsZXJzIiwiYW5ndWxhciIsIm1vZHVsZSIsInNlcnZpY2VzIiwiYXBwIiwiY29uc3RhbnQiLCJ1cmwiLCJydW4iLCIkaW9uaWNQbGF0Zm9ybSIsIiRyb290U2NvcGUiLCIkY29yZG92YUtleWJvYXJkIiwiVkVSU0lPTiIsIndpbmRvdyIsInJlYWR5IiwiY29yZG92YSIsInBsdWdpbnMiLCJLZXlib2FyZCIsImhpZGVLZXlib2FyZEFjY2Vzc29yeUJhciIsImlvbmljIiwiUGxhdGZvcm0iLCJpc0Z1bGxTY3JlZW4iLCJTdGF0dXNCYXIiLCJzdHlsZURlZmF1bHQiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRjb21waWxlUHJvdmlkZXIiLCIkaW9uaWNDb25maWdQcm92aWRlciIsImRlYnVnSW5mb0VuYWJsZWQiLCJzdGF0ZSIsImNhY2hlIiwiYWJzdHJhY3QiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJ2aWV3cyIsIm1lbnVDb250ZW50Iiwib3RoZXJ3aXNlIiwiJHNjb3BlIiwiJHN0YXRlIiwiJGNvcmRvdmFHZW9sb2NhdGlvbiIsIiRzdGF0ZVBhcmFtcyIsIiRpb25pY1BvcHVwIiwiTG9jYXRpb25zU2VydmljZSIsIkRCU2VydmljZSIsImRiIiwiaW5pdERCIiwiaW5mbyIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiYmluZCIsImdlb2xvY2F0ZSIsInBvc09wdGlvbnMiLCJ0aW1lb3V0IiwiZW5hYmxlSGlnaEFjY3VyYWN5IiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwicG9zaXRpb24iLCJzYXZlX2luaXRpYWxfcG9zaXRpb24iLCJnbyIsImVyciIsIiRvbiIsImNvdW5jaWxfbW9kYWwiLCJoaWRlIiwicmVtb3ZlIiwiXyIsIiRjb3Jkb3ZhQ2FtZXJhIiwiJGNvbXBpbGUiLCIkaW9uaWNNb2RhbCIsImxlYWZsZXREYXRhIiwiQ29uZmlnU2VydmljZSIsIlBpblNlcnZpY2UiLCJNZXNzYWdlU2VydmljZSIsIkRyaW5rU2VydmljZSIsIkF1dGhTZXJ2aWNlIiwiVXNlclNlcnZpY2UiLCIkdGltZW91dCIsIiRpbnRlcnZhbCIsIiRsb2NhdGlvbiIsIkVycm9yU2VydmljZSIsIiRpb25pY1NsaWRlQm94RGVsZWdhdGUiLCIkaW9uaWNTY3JvbGxEZWxlZ2F0ZSIsIlBvcFVwU2VydmljZSIsIkNvbm5lY3Rpdml0eVNlcnZpY2UiLCIkY29yZG92YUluQXBwQnJvd3NlciIsIk1hcFNlcnZpY2UiLCJNb2RhbFNlcnZpY2UiLCJTZW1hcGhvcmVTZXJ2aWNlIiwiVmFsaWRhdGlvblNlcnZpY2UiLCJvbmxpbmVfdXNlcl9nZW8iLCJvbmxpbmVfdXNlcl9nZW9fYXJyYXkiLCJBcnJheSIsImJhc2VVUkwiLCJBcHBOYW1lIiwidXNlcl9jYWNoZWRfaW1hZ2UiLCJvbmVfdmFsdWVfcG9wdXAiLCJteUludGVydmFscyIsImNoZWNrTm9Nb2RhbElzT3BlbiIsImlzT25saW5lIiwiY2hlY2tfdXNlcl9sb2dnZWQiLCJzZXRfb2ZmbGluZV91c2VyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZGlzcGxheSIsImNyZWF0ZV9vbmxpbmVfbWFwIiwic2VuZFVzZXJMb2NhdGlvbiIsImdldE1hcCIsImluaXRpYWxfbGF0IiwiY2VudGVyTWFwT25Db29yZHMiLCJpbml0aWFsX2xuZyIsIm9wZW5XZWJzaXRlIiwib3B0aW9ucyIsImxvY2F0aW9uIiwiY2xlYXJjYWNoZSIsInRvb2xiYXIiLCJvcGVuIiwiZXZlbnQiLCJtYXAiLCJkZWZhdWx0cyIsInRpbGVMYXllciIsIm1pblpvb20iLCJtYXhab29tIiwiem9vbUNvbnRyb2xQb3NpdGlvbiIsIm1hcmtlcnMiLCJldmVudHMiLCJlbmFibGUiLCJsb2dpYyIsImNlbnRlciIsImxvYWRQaW5zTGF5ZXIiLCJsYXQiLCJsbmciLCJ6b29tIiwib24iLCJoaWRlT2ZmU2NyZWVuUGlucyIsIm5leHQiLCJwcmV2aW91cyIsImJhY2tfdG9fbWFwIiwiaW1hZ2UiLCJhZGRJbWFnZSIsImlzRnJvbUFsYnVtIiwiaXNVc2VyUGhvdG8iLCJpc0NvbW1lbnRQaG90byIsImlzTmV3VXNlclBob3RvIiwic291cmNlIiwiQ2FtZXJhIiwiUGljdHVyZVNvdXJjZVR5cGUiLCJDQU1FUkEiLCJmaXhfb3JpZW50YXRpb24iLCJzYXZlX3RvX2dhbGxlcnkiLCJQSE9UT0xJQlJBUlkiLCJxdWFsaXR5IiwiZGVzdGluYXRpb25UeXBlIiwiRGVzdGluYXRpb25UeXBlIiwiRklMRV9VUkkiLCJzb3VyY2VUeXBlIiwiYWxsb3dFZGl0IiwiY29ycmVjdE9yaWVudGF0aW9uIiwiZW5jb2RpbmdUeXBlIiwiRW5jb2RpbmdUeXBlIiwiSlBFRyIsInBvcG92ZXJPcHRpb25zIiwiQ2FtZXJhUG9wb3Zlck9wdGlvbnMiLCJzYXZlVG9QaG90b0FsYnVtIiwidGFyZ2V0V2lkdGgiLCJ0YXJnZXRIZWlnaHQiLCJnZXRQaWN0dXJlIiwiaW1hZ2VEYXRhIiwib25JbWFnZVN1Y2Nlc3MiLCJmaWxlVVJJIiwiRmlsZVBhdGgiLCJyZXNvbHZlTmF0aXZlUGF0aCIsInJlc3VsdCIsInN0YXJ0c1dpdGgiLCJwcm9maWxlIiwicGljdHVyZV91cmwiLCJjb21tZW50IiwiZmlsZSIsIm5ld3VzZXIiLCJpbWdVUkkiLCJlcnJvciIsImFsZXJ0IiwidXJsRm9ySW1hZ2UiLCJpbWFnZVVSTCIsIm5hbWUiLCJzdWJzdHIiLCJsYXN0SW5kZXhPZiIsImRhdGFEaXJlY3RvcnkiLCJzY3JvbGxNZSIsImFuY2hvcl9pZCIsImhhc2giLCJoYW5kbGUiLCIkZ2V0QnlIYW5kbGUiLCJhbmNob3JTY3JvbGwiLCJzZXRfYWN0aXZlX29wdGlvbiIsImJ1dHRvbmlkIiwiY2xhc3NOYW1lIiwiaGlkZV9zcGVjaWFsX2RpdnMiLCJjbG9zZV9yZXBvcnRfZGV0YWlsX21vZGFsIiwicmVwb3J0X2RldGFpbF9pZCIsImxvY2F0ZSIsImNvb3JkcyIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwibm93IiwibWVzc2FnZSIsImZvY3VzIiwiZHJhZ2dhYmxlIiwiYWRkTWFwQ29udHJvbHMiLCJjaGFuZ2VVc2VyTG9jYXRpb25QaW4iLCJsb24iLCJ1aWQiLCJsYXllciIsIm5ld0xhdExuZyIsIkwiLCJMYXRMbmciLCJzZXRMYXRMbmciLCJtYXBCb3VuZHMiLCJnZXRCb3VuZHMiLCJ1c2Vyc1Zpc2libGUiLCJmb3JFYWNoIiwia2V5Iiwic2hvdWxkQmVWaXNpYmxlIiwiY29udGFpbnMiLCJnZXRMYXRMbmciLCJfbm9ydGhFYXN0IiwiX3NvdXRoV2VzdCIsImFkZExheWVyIiwicHVzaCIsImZlYXR1cmUiLCJyZW1vdmVMYXllciIsInJlbW92ZUFsbFBpbnMiLCJnZXRBbGwiLCJyZXNwb25zZSIsImxhc3RQaW5zUmVzcG9uc2UiLCJyZXBvcnRzQnlTdGF0ZSIsInBpbnNBcnJheSIsImRhdGEiLCJmZWF0dXJlcyIsIm9ubGluZV91c2Vyc19nZW8iLCJwcm9wZXJ0aWVzIiwiZ2VvbWV0cnkiLCJjb29yZGluYXRlcyIsImljb24iLCJJY29uIiwibWFya2VySWNvbiIsInNoYWRvd1VybCIsInNoYWRvd1NpemUiLCJzaGFkb3dBbmNob3IiLCJpY29uVXJsIiwiaWNvblNpemUiLCJpY29uQW5jaG9yIiwicG9wdXBBbmNob3IiLCJtYXJrZXIiLCJVaWQiLCJOYW1lIiwiaW50ZXJlc3RlZCIsIkludGVyZXN0ZWRJbiIsInN0YXR1cyIsIlN0YXR1cyIsImdlbmRlciIsIkdlbmRlciIsImNhblRhbGtUb1VzZXJzIiwibGFzdFVwZGF0ZSIsInRpbWVDb252ZXJ0ZXIiLCJMb2NhdGlvblRpbWVTdGFtcCIsImh0bWwiLCJjb21waWxlZCIsImJpbmRQb3B1cCIsImNoZWNrVGFsa1N0YXR1cyIsInRha2VJZkF2YWlsYWJsZSIsImNoZWNrV2hvQ2FuVGFsayIsInBhc3N3b3JkIiwicmVzcCIsImdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UiLCJtYWtlQXZhaWxhYmxlQWdhaW4iLCJrZXlfcHJlc3MiLCJzdGFnZSIsImtleUNvZGUiLCJjbG9zZSIsInNlbmRfbWVzc2FnZV90byIsImNhblRhbGtUb1VzZXIiLCJjaGF0Iiwib3RoZXJfdXNlciIsIm1lc3NhZ2VzIiwibmV3X3RleHRfbWVzc2FnZSIsImdldFVzZXJJbmZvIiwiUGhvdG8iLCJ1c2VybmFtZSIsImF1dGhvcl91aWQiLCJnZXRBbGxNZXNzYWdlc1RvVXNlciIsInJlc3AyIiwiY2FuY2VsIiwicmVzcDMiLCJkYXRhMiIsIm1uaWQiLCJsZW5ndGgiLCJuaWQiLCJmcm9tVGVtcGxhdGVVcmwiLCJzY29wZSIsImhhcmR3YXJlQmFja0J1dHRvbkNsb3NlIiwiYW5pbWF0aW9uIiwibW9kYWwiLCJhY3RpdmVNb2RhbCIsInNob3ciLCJhbGVydFBvcHVwIiwidGl0bGUiLCJ0ZW1wbGF0ZSIsInJlcyIsImNoZWNrSWZDYW5SZXBseUludml0YXRpb24iLCJpbnZpdGF0aW9uIiwiY2hlY2tJZldhaXRpbmdSZXBseUZyb21JbnZpdGF0aW9uIiwiZ2V0RHJpbmtDb3N0QnlOaWQiLCJhdmFpbGFibGVfZHJpbmtzIiwiZHJpbmsiLCJOaWQiLCJDcmVkaXRzIiwiYWNjZXB0SW52aXRhdGlvbiIsInNlbmRfaW52aXRhdGlvbl9yZXNwb25zZSIsInRhbGsiLCJyZWZ1c2VJbnZpdGF0aW9uIiwiaW5uZXJIVE1MIiwic2VsZWN0ZWRfZHJpbmsiLCJ1c2VyX2NyZWRpdHMiLCJzZW5kRHJpbmtJbnZpdGF0aW9uUmVzcG9uc2UiLCJNZXNzYWdlIiwic2VuZF9pbnZpdGF0aW9uIiwiY29zdCIsImNyZWRpdHMiLCJwYXJzZUZsb2F0Iiwic2VuZERyaW5rSW52aXRhdGlvblRvVXNlciIsIk5ld0NyZWRpdHMiLCJvcGVuSW52aXRhdGlvbnNNb2RhbCIsImludml0YXRpb25zIiwiZGF0YV9yZXNwIiwiZ2V0QWxsRHJpbmtzQXZhaWxhYmxlIiwiRHJpbmtzIiwiVXNlckNyZWRpdHMiLCJnZXRBbGxJbnZpdGF0aW9uc1dpdGhVc2VyIiwiZGF0YTMiLCJjbG9zZV9tZXNzYWdlX21vZGFsIiwiY2xvc2VfaW52aXRhdGlvbl9tb2RhbCIsInNlbmRfbWVzc2FnZV9vayIsInNlbmRUZXh0TWVzc2FnZVRvVXNlciIsImdldE5hbWVGcm9tVWlkIiwiZ2V0TmFtZUZyb21VaWRJbnZpdGF0aW9uIiwiVU5JWF90aW1lc3RhbXAiLCJhIiwiRGF0ZSIsInllYXIiLCJnZXRGdWxsWWVhciIsIm1vbnRoIiwiZ2V0TW9udGgiLCJkYXkiLCJnZXREYXRlIiwiaG91ciIsImdldEhvdXJzIiwibWluIiwiZ2V0TWludXRlcyIsInRpbWUiLCJnZXRTZWNvbmRzIiwibW9kZWwiLCJleHRlcm5hbE1vZGVsIiwic2VsZWN0ZWRJdGVtcyIsInByZXNlbGVjdGVkU2VhcmNoSXRlbXMiLCJjbGlja2VkVmFsdWVNb2RlbCIsInJlbW92ZWRWYWx1ZU1vZGVsIiwiaXRlbXNSZW1vdmVkIiwiY2FsbGJhY2siLCJ1c2VyX29wdGlvbnMiLCJtZW51Iiwic2hvd19hbm9ueW1vdXNfbWVudSIsInNob3dfdXNlcl9tZW51IiwiaGVpZ2h0Iiwid2lkdGgiLCJjcmVhdGVfZmllbGRfYXJyYXkiLCJ0eXBlIiwidmFsdWUiLCJmaWVsZCIsImNyZWF0ZV9maWVsZF9hcnJheV93aXRoX3R3b0ZpZWxkcyIsInNlY29uZFZhbHVlIiwiZml4X2ZiX2ltYWdlX2xpbmsiLCJpbmRleE9mIiwicGFydHMiLCJzcGxpdCIsIm5ld1VybCIsImxvZ19pbiIsInVzZXIiLCJmaWVsZHMiLCJjaGVja19maWVsZHMiLCJodHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWwiLCJwaG90byIsInNhdmVfdXNlcl9kYXRhIiwibm9uYXV0aCIsIlNob3dMb2NhdGlvbiIsIkVzdGFkbyIsInNhdmVVc2VyIiwic2V0X3VzZXJfcGljdHVyZSIsImNsb3NlX2xvZ2luX21vZGFsIiwic2hvd19lcnJvcl9tZXNzYWdlIiwic3RhdHVzVGV4dCIsInNob3dfYWxlcnQiLCJsb2dfaW5fYmFja2dyb3VuZCIsImh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bF9hamF4Iiwic2hvd19sb2NhdGlvbiIsInNhdmVfbGFzdF91c2VyX3Bvc2l0aW9uIiwic2lnbl9vdXQiLCJlcmFzZV91c2VyX2RhdGEiLCJlcmFzZVVzZXIiLCJzaG93X2VkaXRfcHJvZmlsZV9tb2RhbCIsImVtYWlsIiwiYWN0dWFsX3Bob3RvIiwiaXNNb2JpbGVEZXZpY2UiLCJyZWFkVVJMIiwiaW5wdXQiLCJmaWxlcyIsInJlcG9ydCIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJlIiwic3JjIiwidGFyZ2V0IiwicmVhZEFzRGF0YVVSTCIsImNsb3NlX2VkaXRfcHJvZmlsZV9tb2RhbCIsImVkaXRfcHJvZmlsZV9vayIsImVkaXRfcHJvZmlsZSIsImVkaXRfcmVxdWVzdCIsImVkaXRfdXNlciIsIkpTT04iLCJwYXJzZSIsImh0dHBfZGF0YV9yZXNwb25zZV9pc19zdWNjZXNzZnVsIiwiY29kZSIsImh0dHBfc3RhdHVzIiwiYm9keSIsImV4Y2VwdGlvbiIsInByb2dyZXNzIiwidXBsb2FkUHJvZ3Jlc3MiLCJsb2FkZWQiLCJ0b3RhbCIsIk1hdGgiLCJyb3VuZCIsInN1Y2Nlc3MiLCJoZWFkZXJzIiwic2hvd19sb2dpbl9tb2RhbCIsImxvZ2luX29rIiwic2hvd19zaWduX3VwX21vZGFsIiwiZnVsbG5hbWUiLCJpZF9kb2MiLCJ0ZWxlcGhvbmUiLCJjbG9zZV9zaWduX3VwX21vZGFsIiwic2lnbl91cCIsImNyZWF0ZV91c2VyIiwiaWRlbnRpdHlfZG9jdW1lbnQiLCJwaG9uZSIsInNpZ25fdXBfb2siLCJnZXRVc2VyIiwiZG9jIiwiaGFzUGhvdG8iLCJmaW5kX21lIiwic2F2ZV9uZXdfcmVwb3J0X3Bvc2l0aW9uIiwiZ2V0TWVzc2FnZVNjb3BlIiwib3BlbkNvdW5jaWxTZWxlY3RvciIsImZhY3RvcnkiLCIkaHR0cCIsIiRjb3Jkb3ZhRmlsZVRyYW5zZmVyIiwicG9zdCIsIndpdGhDcmVkZW50aWFscyIsIkNvbnRlbnQtVHlwZSIsImdldCIsInBhcmFtcyIsInBhc3N3b3JkX3NpZ25faW4iLCJ1c2VyT2JqIiwiZmlsZUtleSIsInRydXN0QWxsSG9zdHMiLCJ1cGxvYWQiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwidW5kZWZpbmVkIiwidHJhbnNmb3JtUmVxdWVzdCIsImlkZW50aXR5IiwicGFzc3dvcmRfcmVjb3ZlcnkiLCJsb2dpbl9lbWFpbCIsInBhc3N3b3JkX2NoYW5nZSIsIm9sZFBhc3N3b3JkIiwibmV3UGFzc3dvcmQiLCJjb25maXJtUGFzc3dvcmQiLCJDb25maWdPYmoiLCJpc1dlYlZpZXciLCJiYXNlQ29icmFuZCIsIiRjb3Jkb3ZhTmV0d29yayIsImlzT2ZmbGluZSIsIiRxIiwidXNlcl9uYW1lIiwidXNlcl9wYXNzd29yZCIsInVzZXJfcGljdHVyZV91cmwiLCJfaWQiLCJfcmV2IiwiX2RiIiwicHV0IiwiUG91Y2hEQiIsInNhdmVSZXBvcnQiLCJkYXRlIiwibmV3X3JlcG9ydF9pZCIsImdldE1pbGxpc2Vjb25kcyIsInVwZGF0ZVJlcG9ydCIsImdldENhdGVnb3JpZXMiLCJzYXZlQ2F0ZWdvcmllcyIsImNhdGVnb3JpZXMiLCJnZXRSZXBvcnQiLCJyZXBvcnRJZCIsImdldEFsbFJlcG9ydHMiLCJhbGxEb2NzIiwiaW5jbHVkZV9kb2NzIiwiYXR0YWNobWVudHMiLCJzdGFydGtleSIsImVuZGtleSIsImRlbGV0ZVJlcG9ydCIsInJlcG9ydF9pZCIsImRlbGV0ZUdpdmVuUmVwb3J0IiwiZGVzdGluYXRpb25fdWlkIiwiZHJpbmtfbmlkIiwiaW52aXRhdGlvbl9uaWQiLCJqc29uUmVzdWx0IiwiZXJyb3JDb250YWluZXJJZCIsImVycm9yRGl2IiwiaHR0cF9yZXNwb25zZV9pc19zdWNjZXNzZnVsX3BvcHVwIiwiaHR0cF9kYXRhX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfYWpheCIsInNob3dfZXJyb3JfbWVzc2FnZV9wb3B1cCIsImVycm9ycyIsInZhbGlkYXRlX25vdF9lbXB0eSIsInZhbGlkYXRlX2VtYWlsIiwidmFsaWRhdGVfaWRkb2NfdXkiLCJ2YWxpZGF0ZV90d29fd29yZHMiLCJ2YWxpZGF0ZV9lcXVhbHNUbyIsIiRpb25pY0xvYWRpbmciLCJMT0FERVJBUEkiLCJzaG93TG9hZGluZyIsInRleHQiLCJoaWRlTG9hZGluZyIsInRvZ2dsZUxvYWRpbmdXaXRoTWVzc2FnZSIsInNlbGYiLCJ0aGlzIiwiY29uZmlybVBvcHVwIiwiY29uZmlybSIsInNob3dBbGVydCIsIl90aXRsZSIsIl90ZW1wbGF0ZSIsImxvY2F0aW9uc09iaiIsImxhc3RfdXNlcl9sYXQiLCJsYXN0X3VzZXJfbG5nIiwic2VsZWN0ZWRfY291bmNpbCIsInNlbGVjdENvdW5jaWwiLCJjb3VuY2lsTmFtZSIsInNhdmVkTG9jYXRpb25zIiwicHJvajQiLCJkZWZzIiwibWFwU2VydmljZSIsImdvVG9QbGFjZSIsIl9nZW9Kc29uIiwiY3JzIiwibm9tYnJlIiwiX2xhdGxuZyIsIlByb2oiLCJnZW9Kc29uIiwicG9pbnRUb0xheWVyIiwibGF0bG5nIiwiaHRtbFBvcFVwIiwiYWRkVG8iLCJzZXRWaWV3Iiwib3BlblBvcHVwIiwiX2RhdGEiLCJleHRlbmQiLCJhcGlVUkwiLCJyYW5kb20iLCJoYXNoX2lkIiwiY3VycmVudCIsImJ1aWxkIiwibW9kYWxPQkoiLCJQaW4iLCJwaW5zVVJMIiwiX2FsbCIsInByb3RvdHlwZSIsImFsZXJ0X3RpdGxlIiwiYWxlcnRfbWVzc2FnZSIsImFza0Zvck9uZVZhbHVlUG9wVXAiLCJmaWVsZF9uYW1lIiwidmFsaWRhdGlvblR5cGUiLCJteVBvcHVwIiwic3ViVGl0bGUiLCJidXR0b25zIiwib25UYXAiLCJwcmV2ZW50RGVmYXVsdCIsInNlbWFwaG9yZU9iaiIsInNlbWFwaG9yZXMiLCJzZW1hcGhvcmVJZCIsIkFwaUltRW5kcG9pbnQiLCJBcGlEYXRhRW5kcG9pbnQiLCJyZXN0UHJlZmZpeCIsImxvY2F0aW9uQVBJIiwic2VhcmNoTG9jYXRpb25CeVN0ciIsIl9sb2NhdGlvbiIsIm1ldGhvZCIsInNlYXJjaEVzcXVpbmFCeVN0ciIsImNhbGxlIiwiZXNxdWluYSIsImdldExvY2F0aW9uR2VvbSIsImdldFBhcmFtUGF0aEJ5VGlwbyIsInRpcG8iLCJpIiwicGF0aFBhcmFtcyIsImdldExvY2F0aW9uR2VvbVBNQiIsImVzcXVpbmFfbnVtZXJvIiwiX3RpcG8iLCJyZXN0R2VvRGF0YVNlcnZpY2VQYXRoIiwiRVNRVUlOQSIsIkRJUkVDQ0lPTiIsIlVzZXJPYmoiLCJnZXRfdXNlcl9kYXRhIiwiYWRkX3Bob3RvIiwiaXNMb2dnZWQiLCJ2YWx1ZXMiLCJmaWx0ZXIiLCJ2IiwicmUiLCJ0ZXN0IiwicmVwbGFjZSIsImRpZyIsInBhcnNlSW50Il0sIm1hcHBpbmdzIjoiQUFPQSxHQUFJQSxTQUNGQyxZQUFhQyxRQUFR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R0FDeEQsT0FBSUYsR0FBT3RVLE9BQVMsRUFRcEIsT0FBTyxHQUliK08sa0JBQW1CLFNBQVU5SixFQUFNRyxHQUNqQyxNQUFHSCxJQUFPRyxHQU9ad0osZUFBZ0IsU0FBVTNKLEdBQ3RCLEdBQVUsTUFBUEEsR0FBc0IsYUFBUEEsR0FBNkIsSUFBUEEsRUFBVSxDQUNoRCxHQUFJd1AsR0FBSyx3SkFDVCxPQUFPQSxHQUFHQyxLQUFLelAsR0FFZixPQUFPLEdBSWI0SixrQkFBbUIsU0FBVTVKLEdBQzNCLEdBQVUsTUFBUEEsR0FBc0IsYUFBUEEsR0FBNkIsSUFBUEEsRUFBVSxDQUM5Q0EsRUFBUUEsRUFBTTBQLFFBQVEsTUFBTyxHQUM3QixJQUFJQyxHQUFNM1AsRUFBTUEsRUFBTWpGLE9BQVMsR0FDM0JtRCxFQUFJLEVBQU91USxFQUFJLENBQ25CLElBQUd6TyxFQUFNakYsUUFBVSxFQUNqQixJQUFJMFQsRUFBSXpPLEVBQU1qRixPQUFRMFQsRUFBSSxFQUFHQSxJQUMzQnpPLEVBQVEsSUFBTUEsQ0FHbEIsS0FBSXlPLEVBQUksRUFBR0EsRUFBSSxFQUFHQSxJQUNoQnZRLEdBQU0wUixTQUFTLFVBQVVuQixJQUFNbUIsU0FBUzVQLEVBQU15TyxJQUFPLEVBRXZELElBQUl0YixFQU1KLE9BSkVBLEdBREMrSyxFQUFFLEtBQU8sRUFDRCxFQUVBLEdBQUtBLEVBQUksR0FFakJ5UixHQUFPeGMsRUFNWixPQUFPIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIElvbmljIFN0YXJ0ZXIgQXBwXG5cbi8vIGFuZ3VsYXIubW9kdWxlIGlzIGEgZ2xvYmFsIHBsYWNlIGZvciBjcmVhdGluZywgcmVnaXN0ZXJpbmcgYW5kIHJldHJpZXZpbmcgQW5ndWxhciBtb2R1bGVzXG4vLyAncG1iX2ltJyBpcyB0aGUgbmFtZSBvZiB0aGlzIGFuZ3VsYXIgbW9kdWxlIGV4YW1wbGUgKGFsc28gc2V0IGluIGEgPGJvZHk+IGF0dHJpYnV0ZSBpbiBpbmRleC5odG1sKVxuLy8gdGhlIDJuZCBwYXJhbWV0ZXIgaXMgYW4gYXJyYXkgb2YgJ3JlcXVpcmVzJ1xuLy8gJ3N0YXJ0ZXIuc2VydmljZXMnIGlzIGZvdW5kIGluIHNlcnZpY2VzLmpzXG4vLyAnc3RhcnRlci5jb250cm9sbGVycycgaXMgZm91bmQgaW4gY29udHJvbGxlcnMuanNcbnZhciBwbWJfaW0gPSB7XG4gIGNvbnRyb2xsZXJzOiBhbmd1bGFyLm1vZHVsZSgncG1iX2ltLmNvbnRyb2xsZXJzJywgW10pLFxuICBzZXJ2aWNlczogYW5ndWxhci5tb2R1bGUoJ3BtYl9pbS5zZXJ2aWNlcycsIFtdKVxufTtcblxucG1iX2ltLmFwcCA9IGFuZ3VsYXIubW9kdWxlKCdwbWJfaW0nLCBbJ2lvbmljJywnaW9uaWMud2l6YXJkJywnaW9uLWF1dG9jb21wbGV0ZScsJ2xlYWZsZXQtZGlyZWN0aXZlJywgJ3BtYl9pbS5jb250cm9sbGVycycsICdwbWJfaW0uc2VydmljZXMnLCAnbmdDb3Jkb3ZhJ10pXG5cbi5jb25zdGFudCgnQXBpSW1FbmRwb2ludCcsIHtcbiAgdXJsOiAnaHR0cDovL3d3dy5tb250ZXZpZGVvLmd1Yi51eSdcbn0pXG5cbi5jb25zdGFudCgnQXBpRGF0YUVuZHBvaW50Jywge1xuICB1cmw6ICdodHRwOi8vdG9tYW1vc3VuYS5pbmZvJ1xufSlcblxuXG4ucnVuKGZ1bmN0aW9uKCRpb25pY1BsYXRmb3JtLCAkcm9vdFNjb3BlLCAkY29yZG92YUtleWJvYXJkKSB7XG4gICRyb290U2NvcGUuVkVSU0lPTiA9IHdpbmRvdy5WRVJTSU9OO1xuICAkaW9uaWNQbGF0Zm9ybS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAvLyBIaWRlIHRoZSBhY2Nlc3NvcnkgYmFyIGJ5IGRlZmF1bHQgKHJlbW92ZSB0aGlzIHRvIHNob3cgdGhlIGFjY2Vzc29yeSBiYXIgYWJvdmUgdGhlIGtleWJvYXJkXG4gICAgLy8gZm9yIGZvcm0gaW5wdXRzKVxuICAgIGlmICh3aW5kb3cuY29yZG92YSAmJiB3aW5kb3cuY29yZG92YS5wbHVnaW5zLktleWJvYXJkKSB7XG4gICAgICBjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuaGlkZUtleWJvYXJkQWNjZXNzb3J5QmFyKGZhbHNlKTtcbiAgICAgIC8vY29yZG92YS5wbHVnaW5zLktleWJvYXJkLmRpc2FibGVTY3JvbGwoZmFsc2UpO1xuICAgIH1cbiAgICAvLyRjb3Jkb3ZhS2V5Ym9hcmQuaGlkZUFjY2Vzc29yeUJhcihmYWxzZSlcbiAgICAvLyRjb3Jkb3ZhS2V5Ym9hcmQuZGlzYWJsZVNjcm9sbChmYWxzZSlcbiAgICBpb25pYy5QbGF0Zm9ybS5pc0Z1bGxTY3JlZW4gPSB0cnVlO1xuICAgIGlmICh3aW5kb3cuU3RhdHVzQmFyKSB7XG4gICAgICAvLyBvcmcuYXBhY2hlLmNvcmRvdmEuc3RhdHVzYmFyIHJlcXVpcmVkXG4gICAgICBTdGF0dXNCYXIuc3R5bGVEZWZhdWx0KCk7XG4gICAgfVxuICB9KTtcbn0pXG5cbi5jb25maWcoZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGNvbXBpbGVQcm92aWRlciwgJGlvbmljQ29uZmlnUHJvdmlkZXIpIHtcbiAgJGNvbXBpbGVQcm92aWRlci5kZWJ1Z0luZm9FbmFibGVkKGZhbHNlKTtcbiAgLy8kaW9uaWNDb25maWdQcm92aWRlci5zY3JvbGxpbmcuanNTY3JvbGxpbmcodHJ1ZSk7XG5cbiAgLy8gSW9uaWMgdXNlcyBBbmd1bGFyVUkgUm91dGVyIHdoaWNoIHVzZXMgdGhlIGNvbmNlcHQgb2Ygc3RhdGVzXG4gIC8vIExlYXJuIG1vcmUgaGVyZTogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXItdWkvdWktcm91dGVyXG4gIC8vIFNldCB1cCB0aGUgdmFyaW91cyBzdGF0ZXMgd2hpY2ggdGhlIGFwcCBjYW4gYmUgaW4uXG4gIC8vIEVhY2ggc3RhdGUncyBjb250cm9sbGVyIGNhbiBiZSBmb3VuZCBpbiBjb250cm9sbGVycy5qc1xuICAkc3RhdGVQcm92aWRlclxuXG4uc3RhdGUoJ2FwcCcsIHtcbiAgICBjYWNoZTogZmFsc2UsXG4gICAgdXJsOiBcIi9hcHBcIixcbiAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICB0ZW1wbGF0ZVVybDogXCJ0ZW1wbGF0ZXMvbWVudS5odG1sXCIsXG4gICAgY29udHJvbGxlcjogJ0Fic0NvbnRyb2xsZXInXG4gIH0pXG5cbi5zdGF0ZSgnYXBwLm1hcCcsIHtcbiAgICBjYWNoZTogZmFsc2UsXG4gICAgdXJsOiBcIi9tYXBcIixcbiAgICB2aWV3czoge1xuICAgICAgJ21lbnVDb250ZW50JyA6e1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJ0ZW1wbGF0ZXMvbWFwLmh0bWxcIixcbiAgICAgICAgY29udHJvbGxlciA6IFwiTWFwQ29udHJvbGxlclwiXG4gICAgICB9XG4gICAgfVxuICB9KVxuXG4uc3RhdGUoJ2FwcC5pbnRybycsIHtcbiAgY2FjaGU6IGZhbHNlLFxuICB1cmw6IFwiL2ludHJvXCIsXG4gIHZpZXdzOiB7XG4gICAgJ21lbnVDb250ZW50JyA6e1xuICAgICAgdGVtcGxhdGVVcmw6IFwidGVtcGxhdGVzL2ludHJvLmh0bWxcIixcbiAgICAgIGNvbnRyb2xsZXIgOiBcIkludHJvQ3RybFwiXG4gICAgfVxuICB9XG59KVxuXG4vLyBpZiBub25lIG9mIHRoZSBhYm92ZSBzdGF0ZXMgYXJlIG1hdGNoZWQsIHVzZSB0aGlzIGFzIHRoZSBmYWxsYmFja1xuJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL2FwcC9pbnRybycpO1xuXG59KTtcbiIsInBtYl9pbS5jb250cm9sbGVycy5jb250cm9sbGVyKCdBYnNDb250cm9sbGVyJyxcblsnJHNjb3BlJyxcbmZ1bmN0aW9uKCRzY29wZSkge1xuXG59XSk7XG4iLCJwbWJfaW0uY29udHJvbGxlcnMuY29udHJvbGxlcignSW50cm9DdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlJyxcbiAgJyRjb3Jkb3ZhR2VvbG9jYXRpb24nLFxuICAnJHN0YXRlUGFyYW1zJyxcbiAgJyRpb25pY1BsYXRmb3JtJyxcbiAgJyRpb25pY1BvcHVwJyxcbiAgJ0xvY2F0aW9uc1NlcnZpY2UnLFxuICAnREJTZXJ2aWNlJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsICRjb3Jkb3ZhR2VvbG9jYXRpb24sICRzdGF0ZVBhcmFtcywgJGlvbmljUGxhdGZvcm0sICRpb25pY1BvcHVwLCBMb2NhdGlvbnNTZXJ2aWNlLCBEQlNlcnZpY2UpIHtcblxuICB2YXIgZGIgPSBEQlNlcnZpY2UuaW5pdERCKCk7XG4gIGRiLmluZm8oKS50aGVuKGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSkpO1xuXG4gICRzY29wZS5nZW9sb2NhdGUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgdmFyIHBvc09wdGlvbnMgPSB7dGltZW91dDogMzUwMCwgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlfTtcbiAgICAgICRjb3Jkb3ZhR2VvbG9jYXRpb25cbiAgICAgICAgLmdldEN1cnJlbnRQb3NpdGlvbihwb3NPcHRpb25zKVxuICAgICAgICAudGhlbihmdW5jdGlvbihwb3NpdGlvbikge1xuICAgICAgICAgIExvY2F0aW9uc1NlcnZpY2Uuc2F2ZV9pbml0aWFsX3Bvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICAgICAgICAkc3RhdGUuZ28oXCJhcHAubWFwXCIpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAkc3RhdGUuZ28oXCJhcHAubWFwXCIpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAkc2NvcGUuJG9uKCckaW9uaWNWaWV3LmVudGVyJywgZnVuY3Rpb24oKXsgLy9UaGlzIGlzIGZpcmVkIHR3aWNlIGluIGEgcm93XG4gICAgICBpZihMb2NhdGlvbnNTZXJ2aWNlLmNvdW5jaWxfbW9kYWwhPW51bGwpe1xuICAgICAgICBMb2NhdGlvbnNTZXJ2aWNlLmNvdW5jaWxfbW9kYWwuaGlkZSgpO1xuICAgICAgICBMb2NhdGlvbnNTZXJ2aWNlLmNvdW5jaWxfbW9kYWwucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgICAgJHNjb3BlLmdlb2xvY2F0ZSgpO1xuICAgfSk7XG5cbiAgfVxuXSk7XG4iLCJwbWJfaW0uY29udHJvbGxlcnMuY29udHJvbGxlcignTWFwQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ18nLFxuICAnJGNvcmRvdmFDYW1lcmEnLFxuICAnJGNvcmRvdmFHZW9sb2NhdGlvbicsXG4gICckY29tcGlsZScsXG4gICckaW9uaWNNb2RhbCcsXG4gICckaW9uaWNQb3B1cCcsXG4gICdsZWFmbGV0RGF0YScsXG4gICdDb25maWdTZXJ2aWNlJyxcbiAgJ0xvY2F0aW9uc1NlcnZpY2UnLFxuICAnUGluU2VydmljZScsXG4gICdNZXNzYWdlU2VydmljZScsXG4gICdEcmlua1NlcnZpY2UnLFxuICAnQXV0aFNlcnZpY2UnLFxuICAnVXNlclNlcnZpY2UnLFxuICAnREJTZXJ2aWNlJyxcbiAgJyR0aW1lb3V0JyxcbiAgJyRpbnRlcnZhbCcsXG4gICckbG9jYXRpb24nLFxuICAnRXJyb3JTZXJ2aWNlJyxcbiAgJyRpb25pY1NsaWRlQm94RGVsZWdhdGUnLFxuICAnJGlvbmljU2Nyb2xsRGVsZWdhdGUnLFxuICAnUG9wVXBTZXJ2aWNlJyxcbiAgJ0Nvbm5lY3Rpdml0eVNlcnZpY2UnLFxuICAnJGNvcmRvdmFJbkFwcEJyb3dzZXInLFxuICAnTWFwU2VydmljZScsXG4gICdNb2RhbFNlcnZpY2UnLFxuICAnU2VtYXBob3JlU2VydmljZScsXG4gICdWYWxpZGF0aW9uU2VydmljZScsXG4gIGZ1bmN0aW9uKFxuICAgICRzY29wZSxcbiAgICBfLFxuICAgICRjb3Jkb3ZhQ2FtZXJhLFxuICAgICRjb3Jkb3ZhR2VvbG9jYXRpb24sXG4gICAgJGNvbXBpbGUsXG4gICAgJGlvbmljTW9kYWwsXG4gICAgJGlvbmljUG9wdXAsXG4gICAgbGVhZmxldERhdGEsXG4gICAgQ29uZmlnU2VydmljZSxcbiAgICBMb2NhdGlvbnNTZXJ2aWNlLFxuICAgIFBpblNlcnZpY2UsXG4gICAgTWVzc2FnZVNlcnZpY2UsXG4gICAgRHJpbmtTZXJ2aWNlLFxuICAgIEF1dGhTZXJ2aWNlLFxuICAgIFVzZXJTZXJ2aWNlLFxuICAgIERCU2VydmljZSxcbiAgICAkdGltZW91dCxcbiAgICAkaW50ZXJ2YWwsXG4gICAgJGxvY2F0aW9uLFxuICAgIEVycm9yU2VydmljZSxcbiAgICAkaW9uaWNTbGlkZUJveERlbGVnYXRlLFxuICAgICRpb25pY1Njcm9sbERlbGVnYXRlLFxuICAgIFBvcFVwU2VydmljZSxcbiAgICBDb25uZWN0aXZpdHlTZXJ2aWNlLFxuICAgICRjb3Jkb3ZhSW5BcHBCcm93c2VyLFxuICAgIE1hcFNlcnZpY2UsXG4gICAgTW9kYWxTZXJ2aWNlLFxuICAgIFNlbWFwaG9yZVNlcnZpY2UsXG4gICAgVmFsaWRhdGlvblNlcnZpY2VcbiAgKSB7XG5cbiAgICAvKipcbiAgICAgKiBPbmNlIHN0YXRlIGxvYWRlZCwgZ2V0IHB1dCBtYXAgb24gc2NvcGUuXG4gICAgICovXG4gICAgJHNjb3BlLm9ubGluZV91c2VyX2dlbyA9IHt9O1xuICAgICRzY29wZS5vbmxpbmVfdXNlcl9nZW9fYXJyYXkgPSBuZXcgQXJyYXkoKTtcbiAgICAkc2NvcGUuYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTDtcbiAgICAkc2NvcGUuQXBwTmFtZSA9IENvbmZpZ1NlcnZpY2UuQXBwTmFtZTtcbiAgICAkc2NvcGUudXNlcl9jYWNoZWRfaW1hZ2UgPSBcIi4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nXCI7XG4gICAgJHNjb3BlLm9uZV92YWx1ZV9wb3B1cCA9IG51bGw7XG4gICAgJHNjb3BlLm15SW50ZXJ2YWxzID0gbmV3IEFycmF5KCk7XG5cbiAgICAkc2NvcGUuJG9uKFwiJGlvbmljVmlldy5iZWZvcmVFbnRlclwiLCBmdW5jdGlvbigpIHtcbiAgICAgIE1vZGFsU2VydmljZS5jaGVja05vTW9kYWxJc09wZW4oKTtcbiAgICAgIERCU2VydmljZS5pbml0REIoKTtcbiAgICAgIGlmKENvbm5lY3Rpdml0eVNlcnZpY2UuaXNPbmxpbmUoKSl7XG4gICAgICAgICRzY29wZS5jaGVja191c2VyX2xvZ2dlZCgpO1xuICAgICAgfWVsc2V7XG4gICAgICAgICRzY29wZS5zZXRfb2ZmbGluZV91c2VyKCk7XG4gICAgICB9XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBpZihDb25uZWN0aXZpdHlTZXJ2aWNlLmlzT25saW5lKCkpe1xuICAgICAgICAkc2NvcGUuY3JlYXRlX29ubGluZV9tYXAoKTtcbiAgICAgICAgJHNjb3BlLm15SW50ZXJ2YWxzWyd1c2VyTG9jYXRpb24nXT0gJGludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAkc2NvcGUuc2VuZFVzZXJMb2NhdGlvbigpXG4gICAgICAgICAgfSwgMzAwMDApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgJHNjb3BlLiRvbihcIiRpb25pY1ZpZXcuYWZ0ZXJFbnRlclwiLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtYXAgPSBsZWFmbGV0RGF0YS5nZXRNYXAoKTtcbiAgICAgIGlmKExvY2F0aW9uc1NlcnZpY2UuaW5pdGlhbF9sYXQhPVwiXCIpe1xuICAgICAgICBNYXBTZXJ2aWNlLmNlbnRlck1hcE9uQ29vcmRzKExvY2F0aW9uc1NlcnZpY2UuaW5pdGlhbF9sYXQsIExvY2F0aW9uc1NlcnZpY2UuaW5pdGlhbF9sbmcsIDE2KTtcbiAgICAgIH1lbHNle1xuICAgICAgICBNYXBTZXJ2aWNlLmNlbnRlck1hcE9uQ29vcmRzKC0zNC45MDExMTMsIC01Ni4xNjQ1MzEsIDE0KTtcbiAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgJHNjb3BlLm9wZW5XZWJzaXRlID0gZnVuY3Rpb24odXJsKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBsb2NhdGlvbjogJ25vJyxcbiAgICAgICAgICAgICAgICBjbGVhcmNhY2hlOiAneWVzJyxcbiAgICAgICAgICAgICAgICB0b29sYmFyOiAnbm8nXG4gICAgICAgICAgICB9O1xuXG4gICAgICRjb3Jkb3ZhSW5BcHBCcm93c2VyLm9wZW4odXJsLCAnX2JsYW5rJywgb3B0aW9ucylcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAvLyBlcnJvclxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAkc2NvcGUuY3JlYXRlX29ubGluZV9tYXAgPSBmdW5jdGlvbigpe1xuICAgICAgJHNjb3BlLm1hcCA9IHtcbiAgICAgICAgZGVmYXVsdHM6IHtcbiAgICAgICAgICB0aWxlTGF5ZXI6ICdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsXG4gICAgICAgICAgbWluWm9vbTogMTIsXG4gICAgICAgICAgbWF4Wm9vbTogMTgsXG4gICAgICAgICAgem9vbUNvbnRyb2xQb3NpdGlvbjogJ3RvcGxlZnQnLFxuICAgICAgICB9LFxuICAgICAgICBtYXJrZXJzOiB7fSxcbiAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgbWFwOiB7XG4gICAgICAgICAgICBlbmFibGU6IFsnY29udGV4dCddLFxuICAgICAgICAgICAgbG9naWM6ICdlbWl0J1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2VudGVyOiB7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICAkc2NvcGUubG9hZFBpbnNMYXllcigpO1xuICAgICAgJHNjb3BlLm1hcC5jZW50ZXIgPSB7XG4gICAgICAgICAgbGF0OiAtMzQuOTAxMTEzLFxuICAgICAgICAgIGxuZzogLTU2LjE2NDUzMSxcbiAgICAgICAgICB6b29tOiAxNlxuICAgICAgICB9O1xuICAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcbiAgICAgICAgbWFwLm9uKCdtb3ZlZW5kJywgJHNjb3BlLmhpZGVPZmZTY3JlZW5QaW5zKTtcbiAgICAgIH0pO1xuICAgIH07XG5cblxuXG4gICRzY29wZS5uZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZS5uZXh0KCk7XG4gIH07XG5cbiAgJHNjb3BlLnByZXZpb3VzID0gZnVuY3Rpb24oKSB7XG4gICAgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZS5wcmV2aW91cygpO1xuICB9O1xuXG4gICRzY29wZS5iYWNrX3RvX21hcCA9IGZ1bmN0aW9uKGJhY2tfdG9fbWFwKXtcbiAgICBpZihiYWNrX3RvX21hcCl7XG4gICAgICAvL0xvY2F0aW9uc1NlcnZpY2UuaW5pdGlhbF9sYXQgPSAkc2NvcGUucmVwb3J0LmxhdDtcbiAgICAgIC8vTG9jYXRpb25zU2VydmljZS5pbml0aWFsX2xuZyA9ICRzY29wZS5yZXBvcnQubG9uO1xuICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAvLyRzY29wZS5hZGRSZXBvcnRzTGF5ZXIoKTtcbiAgICB9ZWxzZXtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIH1cbiAgfVxuXG5cbiAgJHNjb3BlLmltYWdlID0gbnVsbDtcblxuICAkc2NvcGUuYWRkSW1hZ2UgPSBmdW5jdGlvbihpc0Zyb21BbGJ1bSwgaXNVc2VyUGhvdG8sIGlzQ29tbWVudFBob3RvLCBpc05ld1VzZXJQaG90bykge1xuICAgIC8vYWxlcnQoXCJhZGRJbWFnZVwiKTtcbiAgICAkc2NvcGUuaXNVc2VyUGhvdG8gPSBpc1VzZXJQaG90bztcbiAgICAkc2NvcGUuaXNDb21tZW50UGhvdG8gPSBpc0NvbW1lbnRQaG90bztcbiAgICAkc2NvcGUuaXNOZXdVc2VyUGhvdG8gPSBpc05ld1VzZXJQaG90bztcblxuICAgIHZhciBzb3VyY2UgPSBDYW1lcmEuUGljdHVyZVNvdXJjZVR5cGUuQ0FNRVJBO1xuICAgIHZhciBmaXhfb3JpZW50YXRpb24gPSB0cnVlO1xuICAgIHZhciBzYXZlX3RvX2dhbGxlcnkgPSB0cnVlO1xuICAgIGlmKGlzRnJvbUFsYnVtPT0xKXtcbiAgICAgIHNvdXJjZSA9IENhbWVyYS5QaWN0dXJlU291cmNlVHlwZS5QSE9UT0xJQlJBUlk7XG4gICAgICBmaXhfb3JpZW50YXRpb24gPSBmYWxzZTtcbiAgICAgIHNhdmVfdG9fZ2FsbGVyeSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgcXVhbGl0eTogOTAsXG4gICAgICBkZXN0aW5hdGlvblR5cGU6IENhbWVyYS5EZXN0aW5hdGlvblR5cGUuRklMRV9VUkksXG4gICAgICBzb3VyY2VUeXBlOiBzb3VyY2UsXG4gICAgICBhbGxvd0VkaXQ6IGZhbHNlLFxuICAgICAgY29ycmVjdE9yaWVudGF0aW9uIDogZml4X29yaWVudGF0aW9uLFxuICAgICAgZW5jb2RpbmdUeXBlOiBDYW1lcmEuRW5jb2RpbmdUeXBlLkpQRUcsXG4gICAgICBwb3BvdmVyT3B0aW9uczogQ2FtZXJhUG9wb3Zlck9wdGlvbnMsXG4gICAgICBzYXZlVG9QaG90b0FsYnVtOiBzYXZlX3RvX2dhbGxlcnksXG4gICAgICB0YXJnZXRXaWR0aDogNTAwLFxuICAgICAgdGFyZ2V0SGVpZ2h0OiA1MDBcbiAgICB9O1xuXG5cbiAgICAkY29yZG92YUNhbWVyYS5nZXRQaWN0dXJlKG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24oaW1hZ2VEYXRhKSB7XG4gICAgICBvbkltYWdlU3VjY2VzcyhpbWFnZURhdGEpO1xuXG4gICAgICBmdW5jdGlvbiBvbkltYWdlU3VjY2VzcyhmaWxlVVJJKSB7XG4gICAgICAgIHdpbmRvdy5GaWxlUGF0aC5yZXNvbHZlTmF0aXZlUGF0aChmaWxlVVJJLCBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAvLyBvblN1Y2Nlc3MgY29kZVxuICAgICAgICAgIC8vYWxlcnQocmVzdWx0KTtcbiAgICAgICAgICBmaWxlVVJJID0gJ2ZpbGU6Ly8nICsgcmVzdWx0O1xuICAgICAgICAgIGlmKHJlc3VsdC5zdGFydHNXaXRoKFwiZmlsZTovL1wiKSl7XG4gICAgICAgICAgICBmaWxlVVJJID0gcmVzdWx0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZigkc2NvcGUuaXNVc2VyUGhvdG89PTEpe1xuICAgICAgICAgICAgLy9Vc2VyU2VydmljZS5hZGRfcGhvdG8oZmlsZVVSSSk7XG4gICAgICAgICAgICAkc2NvcGUucHJvZmlsZS5waWN0dXJlX3VybCA9IGZpbGVVUkk7XG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBpZigkc2NvcGUuaXNDb21tZW50UGhvdG89PTEpe1xuICAgICAgICAgICAgICAkc2NvcGUuY29tbWVudC5maWxlID0gZmlsZVVSSTtcbiAgICAgICAgICAgIH1lbHNlIGlmKCRzY29wZS5pc05ld1VzZXJQaG90bz09MSl7XG4gICAgICAgICAgICAgICRzY29wZS5uZXd1c2VyLnBpY3R1cmVfdXJsID0gZmlsZVVSSTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgJHNjb3BlLmltZ1VSSSA9IGZpbGVVUkk7XG4gICAgICAgICAgLy9jcmVhdGVGaWxlRW50cnkoZmlsZVVSSSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgYWxlcnQoXCJFcnJvciByZXNvbHZlTmF0aXZlUGF0aFwiICsgZXJyb3IpO1xuICAgICAgICB9KTtcblxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBjcmVhdGVGaWxlRW50cnkoZmlsZVVSSSkge1xuICAgICAgICB3aW5kb3cucmVzb2x2ZUxvY2FsRmlsZVN5c3RlbVVSTChmaWxlVVJJLCBjb3B5RmlsZSwgZmFpbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIDVcbiAgICAgIGZ1bmN0aW9uIGNvcHlGaWxlKGZpbGVFbnRyeSkge1xuICAgICAgICB2YXIgbmFtZSA9IGZpbGVFbnRyeS5mdWxsUGF0aC5zdWJzdHIoZmlsZUVudHJ5LmZ1bGxQYXRoLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICAgICAgdmFyIG5ld05hbWUgPSBtYWtlaWQoKSArIG5hbWU7XG5cbiAgICAgICAgd2luZG93LnJlc29sdmVMb2NhbEZpbGVTeXN0ZW1VUkwoY29yZG92YS5maWxlLmRhdGFEaXJlY3RvcnksIGZ1bmN0aW9uKGZpbGVTeXN0ZW0yKSB7XG4gICAgICAgICAgICBmaWxlRW50cnkuY29weVRvKFxuICAgICAgICAgICAgICBmaWxlU3lzdGVtMixcbiAgICAgICAgICAgICAgbmV3TmFtZSxcbiAgICAgICAgICAgICAgb25Db3B5U3VjY2VzcyxcbiAgICAgICAgICAgICAgZmFpbFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZhaWwpO1xuICAgICAgfVxuXG4gICAgICAvLyA2XG4gICAgICBmdW5jdGlvbiBvbkNvcHlTdWNjZXNzKGVudHJ5KSB7XG4gICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLmltYWdlID0gZW50cnkubmF0aXZlVVJMO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZmFpbChlcnJvcikge1xuXG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIG1ha2VpZCgpIHtcbiAgICAgICAgdmFyIHRleHQgPSBcIlwiO1xuICAgICAgICB2YXIgcG9zc2libGUgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCI7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgICB0ZXh0ICs9IHBvc3NpYmxlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3NzaWJsZS5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgIH1cblxuICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgLy9jb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xuICB9O1xuXG4gICRzY29wZS51cmxGb3JJbWFnZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpbWFnZVVSTCA9IFwiaHR0cDovL3BsYWNlaG9sZC5pdC8yMDB4MjAwXCI7XG4gICAgaWYgKCRzY29wZS5pbWFnZSkge1xuICAgICAgdmFyIG5hbWUgPSAkc2NvcGUuaW1hZ2Uuc3Vic3RyKCRzY29wZS5pbWFnZS5sYXN0SW5kZXhPZignLycpICsgMSk7XG4gICAgICBpbWFnZVVSTCA9IGNvcmRvdmEuZmlsZS5kYXRhRGlyZWN0b3J5ICsgbmFtZTtcbiAgICB9XG4gICAgLy9jb25zb2xlLmxvZyhcIkltYWdlVVJMID0gXCIgKyBpbWFnZVVSTCk7XG4gICAgcmV0dXJuIGltYWdlVVJMO1xuICB9O1xuXG5cbiAgICAkc2NvcGUuc2Nyb2xsTWUgPSBmdW5jdGlvbihhbmNob3JfaWQpe1xuICAgICAgJGxvY2F0aW9uLmhhc2goYW5jaG9yX2lkKTtcbiAgICAgIHZhciBoYW5kbGUgID0gJGlvbmljU2Nyb2xsRGVsZWdhdGUuJGdldEJ5SGFuZGxlKCdjb250ZW50Jyk7XG4gICAgICBoYW5kbGUuYW5jaG9yU2Nyb2xsKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLnNldF9hY3RpdmVfb3B0aW9uID0gZnVuY3Rpb24oYnV0dG9uaWQpIHtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGJ1dHRvbmlkKS5jbGFzc05hbWUgPSBcIm9wdGlvbi1hY3RpdmVcIjtcbiAgICB9XG5cbiAgICAkc2NvcGUuaGlkZV9zcGVjaWFsX2RpdnMgPSBmdW5jdGlvbigpe1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLW9wdGlvbnMtbWVudVwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgIH1cblxuICAgICRzY29wZS5jbG9zZV9yZXBvcnRfZGV0YWlsX21vZGFsID0gZnVuY3Rpb24oKXtcbiAgICAgIE1vZGFsU2VydmljZS5jaGVja05vTW9kYWxJc09wZW4oKTtcbiAgICAgICRzY29wZS5yZXBvcnRfZGV0YWlsX2lkID0gbnVsbDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIENlbnRlciBtYXAgb24gdXNlcidzIGN1cnJlbnQgcG9zaXRpb25cbiAgICAgKi9cbiAgICAkc2NvcGUubG9jYXRlID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICRjb3Jkb3ZhR2VvbG9jYXRpb25cbiAgICAgICAgLmdldEN1cnJlbnRQb3NpdGlvbigpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgICAgJHNjb3BlLm1hcC5jZW50ZXIubGF0ID0gcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlO1xuICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLmxuZyA9IHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGU7XG4gICAgICAgICAgJHNjb3BlLm1hcC5jZW50ZXIuem9vbSA9IDE1O1xuXG4gICAgICAgICAgJHNjb3BlLm1hcC5tYXJrZXJzLm5vdyA9IHtcbiAgICAgICAgICAgIGxhdDogcG9zaXRpb24uY29vcmRzLmxhdGl0dWRlLFxuICAgICAgICAgICAgbG5nOiBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlLFxuICAgICAgICAgICAgbWVzc2FnZTogXCJZb3UgQXJlIEhlcmVcIixcbiAgICAgICAgICAgIGZvY3VzOiB0cnVlLFxuICAgICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgLy8gZXJyb3JcbiAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiTG9jYXRpb24gZXJyb3IhXCIpO1xuICAgICAgICAgIC8vY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG5cblxuICAgICRzY29wZS5hZGRNYXBDb250cm9scyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwX2Nyb3NzaGFpcicpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwX2Nyb3NzaGFpcl9idXR0b24nKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuXG4gICAgfTtcblxuXG4gICAgJHNjb3BlLmNoYW5nZVVzZXJMb2NhdGlvblBpbiA9IGZ1bmN0aW9uKGxhdCxsb24sdWlkKXtcbiAgICAgIGlmKCRzY29wZS5vbmxpbmVfdXNlcl9nZW9fYXJyYXlbdWlkXSl7XG4gICAgICAgIGxheWVyID0gJHNjb3BlLm9ubGluZV91c2VyX2dlb19hcnJheVt1aWRdO1xuICAgICAgICB2YXIgbmV3TGF0TG5nID0gbmV3IEwuTGF0TG5nKGxhdCwgbG9uKTtcbiAgICAgICAgbGF5ZXIuc2V0TGF0TG5nKG5ld0xhdExuZyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmhpZGVPZmZTY3JlZW5QaW5zID0gZnVuY3Rpb24oKSB7XG4gICAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uKG1hcCkge1xuICAgICAgICB2YXIgbWFwQm91bmRzID0gbWFwLmdldEJvdW5kcygpO1xuICAgICAgICAkc2NvcGUudXNlcnNWaXNpYmxlID0gW107XG4gICAgICAgICAgJHNjb3BlLm9ubGluZV91c2VyX2dlb19hcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyLGtleSl7XG4gICAgICAgICAgICB2YXIgc2hvdWxkQmVWaXNpYmxlID0gbWFwQm91bmRzLmNvbnRhaW5zKGxheWVyLmdldExhdExuZygpKTtcbiAgICAgICAgICAgIG1hcEJvdW5kcy5fbm9ydGhFYXN0LmxhdCA9IG1hcEJvdW5kcy5fbm9ydGhFYXN0LmxhdCArIDAuMDAzO1xuICAgICAgICAgICAgbWFwQm91bmRzLl9ub3J0aEVhc3QubG9uID0gbWFwQm91bmRzLl9ub3J0aEVhc3QubG9uIC0gMC4wMDM7XG4gICAgICAgICAgICBtYXBCb3VuZHMuX3NvdXRoV2VzdC5sYXQgPSBtYXBCb3VuZHMuX3NvdXRoV2VzdC5sYXQgLSAwLjAwMztcbiAgICAgICAgICAgIG1hcEJvdW5kcy5fc291dGhXZXN0LmxvbiA9IG1hcEJvdW5kcy5fc291dGhXZXN0LmxvbiArIDAuMDAzO1xuICAgICAgICAgICAgaWYgKCFzaG91bGRCZVZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzaG91bGRCZVZpc2libGUpIHtcbiAgICAgICAgICAgICAgICBtYXAuYWRkTGF5ZXIobGF5ZXIpO1xuICAgICAgICAgICAgICAgICRzY29wZS51c2Vyc1Zpc2libGUucHVzaChsYXllci5mZWF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLnJlbW92ZUFsbFBpbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XG4gICAgICAgICRzY29wZS51c2Vyc1Zpc2libGUgPSBbXTtcbiAgICAgICAgaWYoJHNjb3BlLm9ubGluZV91c2VyX2dlb19hcnJheSl7XG4gICAgICAgICAgJHNjb3BlLm9ubGluZV91c2VyX2dlb19hcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyLGtleSl7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwicmVtb3ZpbmdcIik7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGxheWVyKTtcbiAgICAgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmxvYWRQaW5zTGF5ZXIgPSBmdW5jdGlvbigpe1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcbiAgICAgICAgICBQaW5TZXJ2aWNlLmdldEFsbCgpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICBpZihQaW5TZXJ2aWNlLmxhc3RQaW5zUmVzcG9uc2U9PW51bGwgfHwgKFBpblNlcnZpY2UubGFzdFBpbnNSZXNwb25zZSAmJiBQaW5TZXJ2aWNlLmxhc3RQaW5zUmVzcG9uc2UhPXJlc3BvbnNlKSl7XG4gICAgICAgICAgICAgIGlmKCRzY29wZS5vbmxpbmVfdXNlcl9nZW9fYXJyYXkpe1xuICAgICAgICAgICAgICAgICRzY29wZS51c2Vyc1Zpc2libGUgPSBbXTtcbiAgICAgICAgICAgICAgICAkc2NvcGUub25saW5lX3VzZXJfZ2VvX2FycmF5LmZvckVhY2goZnVuY3Rpb24obGF5ZXIsa2V5KXtcbiAgICAgICAgICAgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBQaW5TZXJ2aWNlLmxhc3RQaW5zUmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgJHNjb3BlLnJlcG9ydHNCeVN0YXRlID0ge307XG4gICAgICAgICAgICAgIHZhciBwaW5zQXJyYXkgPSByZXNwb25zZS5kYXRhLmZlYXR1cmVzO1xuICAgICAgICAgICAgICAkc2NvcGUub25saW5lX3VzZXJzX2dlbyA9IHJlc3BvbnNlLmRhdGEuZmVhdHVyZXM7XG4gICAgICAgICAgICAgIHBpbnNBcnJheS5mb3JFYWNoKGZ1bmN0aW9uKGZlYXR1cmUpe1xuICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvbiA9IGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXQgPSBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzWzFdO1xuICAgICAgICAgICAgICAgICAgICBpZihsb24mJmxhdCl7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGljb24gPSBmZWF0dXJlLnByb3BlcnRpZXMuSWNvbjtcbiAgICAgICAgICAgICAgICAgICAgICBpZihpY29uPT1cImFub25cIil7XG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uID0gXCIuL2ltZy9pY29uLXVzZXItYW5vbnltb3VzLnBuZ1wiO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VySWNvbiA9IEwuaWNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaGFkb3dVcmw6ICcuL2ltZy9nZW5lcmljX3Bpbl9ncmVlbi5wbmcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93U2l6ZTogICBbMTAwLCAxMzhdLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhZG93QW5jaG9yOiBbNDQsIDEzOF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsOiBpY29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvblNpemU6IFs0NiwgNDZdLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkFuY2hvcjogWzI0LCAxMjBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBBbmNob3I6IFswLCAtMTM4XVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBsYXllciA9IEwubWFya2VyKFtsYXQsIGxvbl0sIHtpY29uOiBtYXJrZXJJY29ufSk7XG4gICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuZmVhdHVyZSA9IGZlYXR1cmU7XG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm9ubGluZV91c2VyX2dlb19hcnJheVtsYXllci5mZWF0dXJlLnByb3BlcnRpZXMuVWlkXSA9IGxheWVyO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1aWQgPSBmZWF0dXJlLnByb3BlcnRpZXMuVWlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBmZWF0dXJlLnByb3BlcnRpZXMuTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnRlcmVzdGVkID0gZmVhdHVyZS5wcm9wZXJ0aWVzLkludGVyZXN0ZWRJbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXMgPSBmZWF0dXJlLnByb3BlcnRpZXMuU3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdlbmRlciA9IGZlYXR1cmUucHJvcGVydGllcy5HZW5kZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2ZlYXR1cmUucHJvcGVydGllcy5DYW50YWxrID0gJHNjb3BlLmNhblRhbGtUb1VzZXIoZmVhdHVyZS5wcm9wZXJ0aWVzLlVpZCwwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmNhblRhbGtUb1VzZXJzW3VpZF09PTA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihVc2VyU2VydmljZS51aWQgJiYgVXNlclNlcnZpY2UudWlkPT11aWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gXCJUw7o6IFwiK25hbWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdFVwZGF0ZSA9ICRzY29wZS50aW1lQ29udmVydGVyKGZlYXR1cmUucHJvcGVydGllcy5Mb2NhdGlvblRpbWVTdGFtcCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gJzxhIGNsYXNzPVwibmFtZV9pbnNpZGVfbWFya2VyX3BvcHVwXCI+PHA+JyArIG5hbWUgKyAnPC9wPic7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArJzxwIGNsYXNzPVwiZ2VuZGVyX2luc2lkZV9tYXJrZXJfcG9wdXBcIj4nK2dlbmRlcisnPC9wPic7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArJzxwPjxpbWcgY2xhc3M9XCJpbWdfaW5zaWRlX21hcmtlcl9wb3B1cFwiIHNyYz1cIicraWNvbisnXCIvPjwvcD4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGh0bWwgKyc8cCBjbGFzcz1cInN0YXR1c19pbnNpZGVfbWFya2VyX3BvcHVwXCI+XCInK3N0YXR1cysnXCI8L3A+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sICsnPHAgY2xhc3M9XCJpbnRlcmVzdGVkX2luc2lkZV9tYXJrZXJfcG9wdXBcIj5JbnRlcmVzYWRAIGVuICcraW50ZXJlc3RlZCsnPC9wPic7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArJzxwIGNsYXNzPVwibGFzdHVwZGF0ZV9pbnNpZGVfbWFya2VyX3BvcHVwXCI+JytsYXN0VXBkYXRlKyc8L3A+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFVc2VyU2VydmljZS51aWQgfHwgVXNlclNlcnZpY2UudWlkIT11aWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaHRtbCArJzxwIGNsYXNzPVwibWVzc2FnZV9pY29uX2luc2lkZV9tYXJrZXJfcG9wdXBcIj48aW1nIG5nLWNsaWNrPVwic2VuZF9tZXNzYWdlX3RvKCcrdWlkKycpO1wiIHNyYz1cIi4vaW1nL21lc3NhZ2VfaWNvbi5wbmdcIiAvPic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sICsnPGltZyBuZy1jbGljaz1cIm9wZW5JbnZpdGF0aW9uc01vZGFsKCcrdWlkKycpO1wiIHNyYz1cIi4vaW1nL2RyaW5rX2ljb24ucG5nXCIgLz48L3A+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgPSBodG1sICsnPC9hPic7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcGlsZWQgPSAkY29tcGlsZShodG1sKSgkc2NvcGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXIuYmluZFBvcHVwKGNvbXBpbGVkWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICRzY29wZS5jaGVja1RhbGtTdGF0dXMoKTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgJHNjb3BlLmhpZGVPZmZTY3JlZW5QaW5zKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNoZWNrVGFsa1N0YXR1cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAkc2NvcGUubXlJbnRlcnZhbHNbJ2NhblRhbGsnXSA9ICRpbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJjYW5fdGFsa1wiKSl7XG4gICAgICAgICAgTWVzc2FnZVNlcnZpY2UuY2hlY2tXaG9DYW5UYWxrKFVzZXJTZXJ2aWNlLm5hbWUsVXNlclNlcnZpY2UucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICAvL1NlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICB2YXIgZGF0YSA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApO1xuICAgICAgICAgICAgaWYoIShkYXRhLlN0YXR1cyAmJiBkYXRhLlN0YXR1cz09XCJlcnJvclwiKSl7XG4gICAgICAgICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbih1aWQpe1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmNhblRhbGtUb1VzZXJzWyd1aWQtJyt1aWRdID0gMTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwiY2FuX3RhbGtcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sIDIwMDApO1xuICAgIH07XG5cbiAgICAkc2NvcGUua2V5X3ByZXNzID0gZnVuY3Rpb24oZXZlbnQsc3RhZ2Upe1xuICAgICAgdmFyIGtleUNvZGUgPSBldmVudC5rZXlDb2RlO1xuICAgICAgaWYoc3RhZ2U9PSdwcml2YXRlX2NoYXQnKXtcbiAgICAgICAgaWYoa2V5Q29kZT09MTMpe1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZihjb3Jkb3ZhPT09bnVsbCl7XG5cbiAgICAgICAgICAgIH1lbHNlIGlmKGNvcmRvdmEmJmNvcmRvdmEucGx1Z2lucy5LZXlib2FyZCl7XG4gICAgICAgICAgICAgIGNvcmRvdmEucGx1Z2lucy5LZXlib2FyZC5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjYXRjaChlcnIpIHtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5zZW5kX21lc3NhZ2VfdG8gPSBmdW5jdGlvbih1aWQpe1xuICAgICAgICBpZihTZW1hcGhvcmVTZXJ2aWNlLnRha2VJZkF2YWlsYWJsZShcIm9wZW4tbW9kYWxcIikpe1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgIGlmKFVzZXJTZXJ2aWNlLnVpZCl7XG4gICAgICAgICAgICBpZighJHNjb3BlLmNhblRhbGtUb1VzZXIodWlkKSl7XG4gICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwib3Blbi1tb2RhbFwiKTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICAgICAgICB0aXRsZTogXCJJbnZpdGEgYWxnbyBkZSB0b21hclwiLFxuICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiRGViZSB0ZW5lciBhbCBtZW5vcyB1bmEgaW52aXRhY2nDs24gYSB1biB0cmFnbyBhY2VwdGFkYSBlbnRyZSB1c3RlZCB5IGVzdGEgcGVyc29uYSBwYXJhIHBvZGVyIGhhYmxhci5cIlxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgYWxlcnRQb3B1cC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgICAgIC8vcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAkc2NvcGUuY2hhdCA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgICAkc2NvcGUuY2hhdC5vdGhlcl91c2VyID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgICAgICRzY29wZS5jaGF0Lm90aGVyX3VzZXIudWlkID0gdWlkO1xuICAgICAgICAgICAgICAkc2NvcGUuY2hhdC5tZXNzYWdlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgICAkc2NvcGUuY2hhdC5uZXdfdGV4dF9tZXNzYWdlID0gXCJcIjtcbiAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2UuZ2V0VXNlckluZm8odWlkKS50aGVuKGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgICAgICAgIGlmKCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlBob3RvKXtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jaGF0Lm90aGVyX3VzZXIucGljdHVyZV91cmwgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5QaG90bztcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jaGF0Lm90aGVyX3VzZXIucGljdHVyZV91cmwgPSBcIi4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5jaGF0Lm90aGVyX3VzZXIudXNlcm5hbWUgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5OYW1lO1xuICAgICAgICAgICAgICAgIHZhciBhdXRob3JfdWlkID0gVXNlclNlcnZpY2UudWlkO1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmdldEFsbE1lc3NhZ2VzVG9Vc2VyKFVzZXJTZXJ2aWNlLm5hbWUsIFVzZXJTZXJ2aWNlLnBhc3N3b3JkLHVpZCxhdXRob3JfdWlkKS50aGVuKGZ1bmN0aW9uKHJlc3AyKXtcbiAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcDIpO1xuICAgICAgICAgICAgICAgICAgaWYoIShkYXRhLlN0YXR1cyAmJiBkYXRhLlN0YXR1cz09XCJlcnJvclwiKSl7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jaGF0Lm1lc3NhZ2VzID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcDIpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLm15SW50ZXJ2YWxzWydwcml2YXRlTWVzc2FnZSddKXtcbiAgICAgICAgICAgICAgICAgICAgJGludGVydmFsLmNhbmNlbCgkc2NvcGUubXlJbnRlcnZhbHNbJ3ByaXZhdGVNZXNzYWdlJ10pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgJHNjb3BlLm15SW50ZXJ2YWxzWydwcml2YXRlTWVzc2FnZSddID0gJGludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmdldEFsbE1lc3NhZ2VzVG9Vc2VyKFVzZXJTZXJ2aWNlLm5hbWUsIFVzZXJTZXJ2aWNlLnBhc3N3b3JkLCRzY29wZS5jaGF0Lm90aGVyX3VzZXIudWlkLFVzZXJTZXJ2aWNlLnVpZCkudGhlbihmdW5jdGlvbihyZXNwMyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YTIgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighKGRhdGEyLlN0YXR1cyAmJiBkYXRhMi5TdGF0dXM9PVwiZXJyb3JcIikpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuY2hhdC5tZXNzYWdlcyA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKGRhdGEyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1uaWQgPSAkc2NvcGUuY2hhdC5tZXNzYWdlc1skc2NvcGUuY2hhdC5tZXNzYWdlcy5sZW5ndGgtMV0ubmlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2Nyb2xsTWUoXCJtZXNzYWdlLVwiK21uaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICAgICAgICAgICRpb25pY01vZGFsLmZyb21UZW1wbGF0ZVVybCgndGVtcGxhdGVzL3ByaXZhdGVfY2hhdC5odG1sJywge1xuICAgICAgICAgICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICAgICAgICAgICAgaGFyZHdhcmVCYWNrQnV0dG9uQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogJ3NsaWRlLWluLXVwJyxcbiAgICAgICAgICAgICAgICAgICAgICAvL2ZvY3VzRmlyc3RJbnB1dDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLW9wdGlvbnMtbWVudVwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsID0gbW9kYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbC5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcIm9wZW4tbW9kYWxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW5pZCA9ICRzY29wZS5jaGF0Lm1lc3NhZ2VzWyRzY29wZS5jaGF0Lm1lc3NhZ2VzLmxlbmd0aC0xXS5uaWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2Nyb2xsTWUoXCJtZXNzYWdlLVwiK21uaWQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJvcGVuLW1vZGFsXCIpO1xuICAgICAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICAgICAgICAgIHRpdGxlOiBcIkluaWNpZSBzZXNpw7NuIG8gY3JlZSB1bmEgbnVldmEgY3VlbnRhXCIsXG4gICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIkRlYmUgZXN0YXIgbG9ndWVhZG8gcGFyYSBwb2RlciBlbnZpYXIgeSByZWNpYmlyIG1lbnNhamVzLlwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgYWxlcnRQb3B1cC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgICAgICAgLy9yZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAvL1NFTUFGT1JPIE9DVVBBRE9cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgJHNjb3BlLmNoZWNrSWZDYW5SZXBseUludml0YXRpb24gPSBmdW5jdGlvbihpbnZpdGF0aW9uKXtcbiAgICAgIGlmKFVzZXJTZXJ2aWNlLnVpZCl7XG4gICAgICAgIGlmKFVzZXJTZXJ2aWNlLnVpZCE9aW52aXRhdGlvbi51aWQpe1xuICAgICAgICAgIGlmKGludml0YXRpb24uc3RhdHVzPT1cIkVudmlhZGFcInx8aW52aXRhdGlvbi5zdGF0dXM9PVwiUmVjaWJpZGFcIil7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAkc2NvcGUuY2hlY2tJZldhaXRpbmdSZXBseUZyb21JbnZpdGF0aW9uID0gZnVuY3Rpb24oaW52aXRhdGlvbil7XG4gICAgICBpZihVc2VyU2VydmljZS51aWQpe1xuICAgICAgICBpZihVc2VyU2VydmljZS51aWQ9PWludml0YXRpb24udWlkKXtcbiAgICAgICAgICBpZihpbnZpdGF0aW9uLnN0YXR1cz09XCJFbnZpYWRhXCJ8fGludml0YXRpb24uc3RhdHVzPT1cIlJlY2liaWRhXCIpe1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgJHNjb3BlLmdldERyaW5rQ29zdEJ5TmlkID0gZnVuY3Rpb24obmlkKXtcbiAgICAgIHZhciByZXN1bHQgPSAwO1xuICAgICAgaWYoJHNjb3BlLmludml0YXRpb24uYXZhaWxhYmxlX2RyaW5rcyl7XG4gICAgICAgICRzY29wZS5pbnZpdGF0aW9uLmF2YWlsYWJsZV9kcmlua3MuZm9yRWFjaChmdW5jdGlvbihkcmluaykge1xuICAgICAgICAgIGlmKGRyaW5rLk5pZD09bmlkKXtcbiAgICAgICAgICAgIHJlc3VsdCA9IGRyaW5rLkNyZWRpdHM7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgJHNjb3BlLmFjY2VwdEludml0YXRpb24gPSBmdW5jdGlvbihuaWQpe1xuICAgICAgJHNjb3BlLnNlbmRfaW52aXRhdGlvbl9yZXNwb25zZShcIkFjZXB0YWRhXCIsbmlkKTtcbiAgICAgICRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIudGFsayA9IHRydWU7XG4gICAgfVxuXG4gICAgJHNjb3BlLnJlZnVzZUludml0YXRpb24gPSBmdW5jdGlvbihuaWQpe1xuICAgICAgJHNjb3BlLnNlbmRfaW52aXRhdGlvbl9yZXNwb25zZShcIlJlY2hhemFkYVwiLG5pZCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNhblRhbGtUb1VzZXIgPSBmdW5jdGlvbih1aWQpe1xuICAgICAgaWYoVXNlclNlcnZpY2UudWlkKXtcbiAgICAgICAgICBpZihNZXNzYWdlU2VydmljZS5jYW5UYWxrVG9Vc2Vyc1sndWlkLScrdWlkXSE9bnVsbCl7XG4gICAgICAgICAgICBpZihNZXNzYWdlU2VydmljZS5jYW5UYWxrVG9Vc2Vyc1sndWlkLScrdWlkXT09MSl7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAkc2NvcGUuc2VuZF9pbnZpdGF0aW9uX3Jlc3BvbnNlID0gZnVuY3Rpb24ocmVzcG9uc2UsbmlkKXtcbiAgICAgIHZhciBlcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXJyb3JfY29udGFpbmVyXCIpO1xuICAgICAgZXJyb3Iuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICBpZihuaWQgPT0gbnVsbCl7XG4gICAgICAgIGVycm9yLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIGVycm9yLmlubmVySFRNTCA9IFwiSHVibyB1biBlcnJvci4gTm8gc2UgZW5jdWVudHJhIGVsIElEIGRlIGludml0YWNpw7NuXCI7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdmFyIGNvc3QgPSAkc2NvcGUuZ2V0RHJpbmtDb3N0QnlOaWQoJHNjb3BlLmludml0YXRpb24uc2VsZWN0ZWRfZHJpbmspO1xuICAgICAgICB2YXIgY3JlZGl0cyA9ICRzY29wZS5pbnZpdGF0aW9uLnVzZXJfY3JlZGl0cztcbiAgICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJzdWJtaXQtZm9ybVwiKSl7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgIERyaW5rU2VydmljZS5zZW5kRHJpbmtJbnZpdGF0aW9uUmVzcG9uc2UocmVzcG9uc2UsVXNlclNlcnZpY2UubmFtZSxVc2VyU2VydmljZS5wYXNzd29yZCxuaWQsVXNlclNlcnZpY2UudWlkKS50aGVuKGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgdmFyIGRhdGEgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKTtcbiAgICAgICAgICAgIGlmKCEoZGF0YS5TdGF0dXMgJiYgZGF0YS5TdGF0dXM9PVwiZXJyb3JcIikpe1xuICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5jYW5UYWxrVG9Vc2Vyc1sndWlkLScrJHNjb3BlLmludml0YXRpb24ub3RoZXJfdXNlci51aWRdID0gbnVsbDtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICBlcnJvci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICBlcnJvci5pbm5lckhUTUwgPSBkYXRhLk1lc3NhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuc2VuZF9pbnZpdGF0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBlcnJvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXJyb3JfY29udGFpbmVyXCIpO1xuICAgICAgaWYoJHNjb3BlLmludml0YXRpb24uc2VsZWN0ZWRfZHJpbmsgPT0gbnVsbCl7XG4gICAgICAgIGVycm9yLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIGVycm9yLmlubmVySFRNTCA9IFwiRGViZSBzZWxlY2Npb25hciB1bmEgYmViaWRhIGEgaW52aXRhclwiO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHZhciBjb3N0ID0gJHNjb3BlLmdldERyaW5rQ29zdEJ5TmlkKCRzY29wZS5pbnZpdGF0aW9uLnNlbGVjdGVkX2RyaW5rKTtcbiAgICAgICAgdmFyIGNyZWRpdHMgPSAkc2NvcGUuaW52aXRhdGlvbi51c2VyX2NyZWRpdHM7XG4gICAgICAgIGlmKHBhcnNlRmxvYXQoY29zdCk+cGFyc2VGbG9hdChjcmVkaXRzKSl7XG4gICAgICAgICAgZXJyb3Iuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICBlcnJvci5pbm5lckhUTUwgPSBcIkNyw6lkaXRvcyBpbnN1ZmljaWVudGVzLiBQYXJhIHBvZGVyIGludml0YXIgZXN0YSBiZWJpZGEgZGViZSBjb21wcmFyIG3DoXMgY3LDqWRpdG9zXCI7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwic3VibWl0LWZvcm1cIikpe1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgRHJpbmtTZXJ2aWNlLnNlbmREcmlua0ludml0YXRpb25Ub1VzZXIoJHNjb3BlLmludml0YXRpb24uc2VsZWN0ZWRfZHJpbmssJHNjb3BlLmludml0YXRpb24ub3RoZXJfdXNlci51aWQsVXNlclNlcnZpY2UudWlkLFVzZXJTZXJ2aWNlLm5hbWUsVXNlclNlcnZpY2UucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICB2YXIgZGF0YSA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApO1xuICAgICAgICAgICAgICBpZighKGRhdGEuU3RhdHVzICYmIGRhdGEuU3RhdHVzPT1cImVycm9yXCIpKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi51c2VyX2NyZWRpdHMgPSBkYXRhLk5ld0NyZWRpdHM7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmludml0YXRpb24uc2VsZWN0ZWRfZHJpbmsgPSBudWxsO1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmNhblRhbGtUb1VzZXJzWyd1aWQtJyskc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVpZF0gPSBudWxsO1xuICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBlcnJvci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgICAgIGVycm9yLmlubmVySFRNTCA9IGRhdGEuTWVzc2FnZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLm9wZW5JbnZpdGF0aW9uc01vZGFsID0gZnVuY3Rpb24odWlkKXtcbiAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwib3Blbi1tb2RhbFwiKSl7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBpZihVc2VyU2VydmljZS51aWQpe1xuICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgJHNjb3BlLmludml0YXRpb24ucmVzcG9uc2UgPSBudWxsO1xuICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVpZCA9IHVpZDtcbiAgICAgICAgICAvL01lc3NhZ2VTZXJ2aWNlLmNhblRhbGtUb1VzZXJzWyd1aWQtJyskc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVpZF0gPSBudWxsO1xuICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLmludml0YXRpb25zID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgJHNjb3BlLmludml0YXRpb24uYXZhaWxhYmxlX2RyaW5rcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLnNlbGVjdGVkX2RyaW5rID0gbnVsbDtcbiAgICAgICAgICBNZXNzYWdlU2VydmljZS5nZXRVc2VySW5mbyh1aWQpLnRoZW4oZnVuY3Rpb24oZGF0YV9yZXNwKXtcbiAgICAgICAgICBpZigkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShkYXRhX3Jlc3ApLlBob3RvKXtcbiAgICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIucGljdHVyZV91cmwgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShkYXRhX3Jlc3ApLlBob3RvO1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgJHNjb3BlLmludml0YXRpb24ub3RoZXJfdXNlci5waWN0dXJlX3VybCA9IFwiLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmdcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgJHNjb3BlLmludml0YXRpb24ub3RoZXJfdXNlci51c2VybmFtZSA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKGRhdGFfcmVzcCkuTmFtZTtcbiAgICAgICAgICAgIERyaW5rU2VydmljZS5nZXRBbGxEcmlua3NBdmFpbGFibGUoVXNlclNlcnZpY2UubmFtZSwgVXNlclNlcnZpY2UucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICAgIHZhciBkYXRhID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCk7XG4gICAgICAgICAgICAgIGlmKCEoZGF0YS5TdGF0dXMgJiYgZGF0YS5TdGF0dXM9PVwiZXJyb3JcIikpe1xuICAgICAgICAgICAgICAgICRzY29wZS5pbnZpdGF0aW9uLmF2YWlsYWJsZV9kcmlua3MgPSBkYXRhLkRyaW5rcztcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi51c2VyX2NyZWRpdHMgPSBkYXRhLlVzZXJDcmVkaXRzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIERyaW5rU2VydmljZS5nZXRBbGxJbnZpdGF0aW9uc1dpdGhVc2VyKFVzZXJTZXJ2aWNlLm5hbWUsIFVzZXJTZXJ2aWNlLnBhc3N3b3JkLCRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIudWlkLFVzZXJTZXJ2aWNlLnVpZCkudGhlbihmdW5jdGlvbihyZXNwMil7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEyID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcDIpO1xuICAgICAgICAgICAgICAgIGlmKCEoZGF0YTIuU3RhdHVzICYmIGRhdGEyLlN0YXR1cz09XCJlcnJvclwiKSl7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUuaW52aXRhdGlvbi5pbnZpdGF0aW9ucyA9IGRhdGEyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZigkc2NvcGUubXlJbnRlcnZhbHNbJ2RyaW5rSW52aXRhdGlvbiddKXtcbiAgICAgICAgICAgICAgICAgICRpbnRlcnZhbC5jYW5jZWwoJHNjb3BlLm15SW50ZXJ2YWxzWydkcmlua0ludml0YXRpb24nXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5teUludGVydmFsc1snZHJpbmtJbnZpdGF0aW9uJ10gPSAkaW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBEcmlua1NlcnZpY2UuZ2V0QWxsSW52aXRhdGlvbnNXaXRoVXNlcihVc2VyU2VydmljZS5uYW1lLCBVc2VyU2VydmljZS5wYXNzd29yZCwkc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVpZCxVc2VyU2VydmljZS51aWQpLnRoZW4oZnVuY3Rpb24ocmVzcDMpe1xuICAgICAgICAgICAgICAgICAgdmFyIGRhdGEzID0gJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcDMpO1xuICAgICAgICAgICAgICAgICAgaWYoIShkYXRhMy5TdGF0dXMgJiYgZGF0YTMuU3RhdHVzPT1cImVycm9yXCIpKXtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludml0YXRpb24uaW52aXRhdGlvbnMgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShkYXRhMyk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0sIDUwMDApO1xuICAgICAgICAgICAgICAgICRpb25pY01vZGFsLmZyb21UZW1wbGF0ZVVybCgndGVtcGxhdGVzL2RyaW5rX2ludml0YXRpb24uaHRtbCcsIHtcbiAgICAgICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICAgICAgICBoYXJkd2FyZUJhY2tCdXR0b25DbG9zZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCcsXG4gICAgICAgICAgICAgICAgICAvL2ZvY3VzRmlyc3RJbnB1dDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obW9kYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLW9wdGlvbnMtbWVudVwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbCA9IG1vZGFsO1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJvcGVuLW1vZGFsXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwib3Blbi1tb2RhbFwiKTtcbiAgICAgICAgICB2YXIgYWxlcnRQb3B1cCA9ICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgICAgICAgIHRpdGxlOiBcIkluaWNpZSBzZXNpw7NuIG8gY3JlZSB1bmEgbnVldmEgY3VlbnRhXCIsXG4gICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCJEZWJlIGVzdGFyIGxvZ3VlYWRvIHBhcmEgcG9kZXIgZW52aWFyIHkgcmVjaWJpciBpbnZpdGFjaW9uZXMuXCJcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAvL3JldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1lbHNle1xuICAgICAgICAvL1NFTUFGT1JPIE9DVVBBRE9cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuY2xvc2VfbWVzc2FnZV9tb2RhbCA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZigkc2NvcGUubXlJbnRlcnZhbHNbJ3ByaXZhdGVNZXNzYWdlJ10pe1xuICAgICAgICAkaW50ZXJ2YWwuY2FuY2VsKCRzY29wZS5teUludGVydmFsc1sncHJpdmF0ZU1lc3NhZ2UnXSk7XG4gICAgICB9XG4gICAgICBpZigkc2NvcGUubXlJbnRlcnZhbHNbJ2RyaW5rSW52aXRhdGlvbiddKXtcbiAgICAgICAgJGludGVydmFsLmNhbmNlbCgkc2NvcGUubXlJbnRlcnZhbHNbJ2RyaW5rSW52aXRhdGlvbiddKTtcbiAgICAgIH1cbiAgICAgIC8vQ2FyZ2FyIGVsIG1vZGFsIGNvbiBsYSBpbmZvIGRlbCB1c3VhcmlvIGxvZ3VlYWRvIHkgY29uIGVsIHN1Ym1pdCBhIHVwZGF0ZV91c2VyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZvb3RfYmFyXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNsb3NlX2ludml0YXRpb25fbW9kYWwgPSBmdW5jdGlvbigpe1xuICAgICAgaWYoJHNjb3BlLm15SW50ZXJ2YWxzWydwcml2YXRlTWVzc2FnZSddKXtcbiAgICAgICAgJGludGVydmFsLmNhbmNlbCgkc2NvcGUubXlJbnRlcnZhbHNbJ3ByaXZhdGVNZXNzYWdlJ10pO1xuICAgICAgfVxuICAgICAgaWYoJHNjb3BlLm15SW50ZXJ2YWxzWydkcmlua0ludml0YXRpb24nXSl7XG4gICAgICAgICRpbnRlcnZhbC5jYW5jZWwoJHNjb3BlLm15SW50ZXJ2YWxzWydkcmlua0ludml0YXRpb24nXSk7XG4gICAgICB9XG4gICAgICAvL0NhcmdhciBlbCBtb2RhbCBjb24gbGEgaW5mbyBkZWwgdXN1YXJpbyBsb2d1ZWFkbyB5IGNvbiBlbCBzdWJtaXQgYSB1cGRhdGVfdXNlclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgIH1cblxuICAgICRzY29wZS5zZW5kX21lc3NhZ2Vfb2sgPSBmdW5jdGlvbigpe1xuICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJzdWJtaXQtZm9ybVwiKSl7XG4gICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBpZigkc2NvcGUuY2hhdC5uZXdfdGV4dF9tZXNzYWdlKXtcbiAgICAgICAgICBNZXNzYWdlU2VydmljZS5zZW5kVGV4dE1lc3NhZ2VUb1VzZXIoJHNjb3BlLmNoYXQubmV3X3RleHRfbWVzc2FnZSwkc2NvcGUuY2hhdC5vdGhlcl91c2VyLnVpZCxVc2VyU2VydmljZS51aWQsVXNlclNlcnZpY2UubmFtZSxVc2VyU2VydmljZS5wYXNzd29yZCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWVzc2FnZV90ZXh0X2FyZWFcIikuaW5uZXJIVE1MPVwiXCI7XG4gICAgICAgICAgICAkc2NvcGUuY2hhdC5uZXdfdGV4dF9tZXNzYWdlID0gXCJcIjtcbiAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmdldEFsbE1lc3NhZ2VzVG9Vc2VyKFVzZXJTZXJ2aWNlLm5hbWUsIFVzZXJTZXJ2aWNlLnBhc3N3b3JkLCRzY29wZS5jaGF0Lm90aGVyX3VzZXIudWlkLFVzZXJTZXJ2aWNlLnVpZCkudGhlbihmdW5jdGlvbihyZXNwMil7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNoYXQubWVzc2FnZXMgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwMik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmdldE5hbWVGcm9tVWlkID1mdW5jdGlvbih1aWQpe1xuICAgICAgaWYoVXNlclNlcnZpY2UudWlkPT11aWQpe1xuICAgICAgICByZXR1cm4gVXNlclNlcnZpY2UubmFtZTtcbiAgICAgIH1lbHNle1xuICAgICAgICBpZigkc2NvcGUuY2hhdC5vdGhlcl91c2VyLnVpZD09dWlkKXtcbiAgICAgICAgICByZXR1cm4gJHNjb3BlLmNoYXQub3RoZXJfdXNlci51c2VybmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5nZXROYW1lRnJvbVVpZEludml0YXRpb24gPWZ1bmN0aW9uKHVpZCl7XG4gICAgICBpZihVc2VyU2VydmljZS51aWQ9PXVpZCl7XG4gICAgICAgIHJldHVybiBVc2VyU2VydmljZS5uYW1lO1xuICAgICAgfWVsc2V7XG4gICAgICAgIGlmKCRzY29wZS5pbnZpdGF0aW9uLm90aGVyX3VzZXIudWlkPT11aWQpe1xuICAgICAgICAgIHJldHVybiAkc2NvcGUuaW52aXRhdGlvbi5vdGhlcl91c2VyLnVzZXJuYW1lO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLnRpbWVDb252ZXJ0ZXIgPSBmdW5jdGlvbihVTklYX3RpbWVzdGFtcCl7XG4gICAgICB2YXIgYSA9IG5ldyBEYXRlKFVOSVhfdGltZXN0YW1wICogMTAwMCk7XG4gICAgICB2YXIgbW9udGhzID0gWydFbmVybycsJ0ZlYnJlcm8nLCdNYXJ6bycsJ0FicmlsJywnTWF5bycsJ0p1bmlvJywnSnVsaW8nLCdBZ29zdG8nLCdTZXRpZW1icmUnLCdPY3R1YnJlJywnTm92aWVtYnJlJywnRGljaWVtYnJlJ107XG4gICAgICB2YXIgeWVhciA9IGEuZ2V0RnVsbFllYXIoKTtcbiAgICAgIC8vdmFyIG1vbnRoID0gbW9udGhzW2EuZ2V0TW9udGgoKV07XG4gICAgICB2YXIgbW9udGggPSBhLmdldE1vbnRoKCk7XG4gICAgICBpZihtb250aDwxMCl7XG4gICAgICAgIG1vbnRoID0gXCIwXCIrbW9udGg7XG4gICAgICB9XG4gICAgICB2YXIgZGF5ID0gYS5nZXREYXRlKCk7XG4gICAgICBpZihkYXk8MTApe1xuICAgICAgICBkYXkgPSBcIjBcIitkYXk7XG4gICAgICB9XG4gICAgICB2YXIgaG91ciA9IGEuZ2V0SG91cnMoKTtcbiAgICAgIGlmKGhvdXI8MTApe1xuICAgICAgICBob3VyID0gXCIwXCIraG91cjtcbiAgICAgIH1cbiAgICAgIHZhciBtaW4gPSBhLmdldE1pbnV0ZXMoKTtcbiAgICAgIGlmKG1pbjwxMCl7XG4gICAgICAgIG1pbiA9IFwiMFwiK21pbjtcbiAgICAgIH1cbiAgICAgIHZhciBzZWMgPSBhLmdldFNlY29uZHMoKTtcbiAgICAgIHZhciB0aW1lID0gZGF5ICsgJy8nICsgbW9udGggKyAnLycgKyB5ZWFyICsgJyAnICsgaG91ciArICc6JyArIG1pbjtcbiAgICAgIHJldHVybiB0aW1lO1xuICAgIH1cblxuXG5cbiAgICAvLyBTdWdnZXN0aW9uXG4gICAgJHNjb3BlLm1vZGVsID0gW107XG4gICAgJHNjb3BlLmV4dGVybmFsTW9kZWwgPSBbXTtcbiAgICAkc2NvcGUuc2VsZWN0ZWRJdGVtcyA9IFtdO1xuICAgICRzY29wZS5wcmVzZWxlY3RlZFNlYXJjaEl0ZW1zID0gW107XG4gICAgJHNjb3BlLmNsaWNrZWRWYWx1ZU1vZGVsID0gXCJcIjtcbiAgICAkc2NvcGUucmVtb3ZlZFZhbHVlTW9kZWwgPSBcIlwiO1xuXG5cbiAgICAkc2NvcGUuaXRlbXNSZW1vdmVkID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICRzY29wZS5yZW1vdmVkVmFsdWVNb2RlbCA9IGNhbGxiYWNrO1xuICAgIH07XG5cbiAgICAkc2NvcGUudXNlcl9vcHRpb25zID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLW9wdGlvbnMtbWVudVwiKTtcbiAgICAgIGlmKG1lbnUuc3R5bGUuZGlzcGxheT09XCJibG9ja1wiKXtcbiAgICAgICAgbWVudS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhVc2VyU2VydmljZS5uYW1lKTtcbiAgICAgICAgdmFyIG5hbWUgPSBVc2VyU2VydmljZS5uYW1lO1xuICAgICAgICBpZihuYW1lPT1udWxsKXtcbiAgICAgICAgICAvL05vIGVzdGEgbG9ndWVhZG9cbiAgICAgICAgICAkc2NvcGUuc2hvd19hbm9ueW1vdXNfbWVudSgpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAvL0VzdMOhIGxvZ3VlYWRvXG4gICAgICAgICAgJHNjb3BlLnNob3dfdXNlcl9tZW51KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuc2hvd19hbm9ueW1vdXNfbWVudSA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgbWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlci1vcHRpb25zLW1lbnVcIik7XG4gICAgICB2YXIgaHRtbCA9IFwiPGRpdiBpZD0nYXV0aF9vcHRpb25zJz48ZGl2IGNsYXNzPSdub25hdXRoLWxpbmsnIG5nLWNsaWNrPSdzaG93X2xvZ2luX21vZGFsKCknPkluaWNpYXIgc2VzacOzbjwvZGl2PlwiO1xuICAgICAgaHRtbCA9IGh0bWwgKyBcIjxkaXYgY2xhc3M9J25vbmF1dGgtbGluaycgbmctY2xpY2s9J3Nob3dfc2lnbl91cF9tb2RhbCgpJz5SZWdpc3RyYXJzZTwvZGl2PjwvZGl2PlwiO1xuICAgICAgbWVudS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgJGNvbXBpbGUobWVudSkoJHNjb3BlKTsgLy88LS0tLSByZWNvbXBpbGF0aW9uXG4gICAgICBtZW51LnN0eWxlLmhlaWdodCA9ICcxMjBweCc7XG4gICAgICBtZW51LnN0eWxlLndpZHRoID0gJzE1MHB4JztcbiAgICAgIG1lbnUuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICB9XG5cbiAgICAkc2NvcGUuc2hvd191c2VyX21lbnUgPSBmdW5jdGlvbigpe1xuICAgICAgdmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXItb3B0aW9ucy1tZW51XCIpO1xuICAgICAgdmFyIGh0bWwgPSBVc2VyU2VydmljZS5uYW1lICsgXCI8ZGl2IGlkPSdhdXRoX29wdGlvbnMnPjxkaXYgY2xhc3M9J3VzZXItbG9nZ2VkLWxpbmsnIG5nLWNsaWNrPSdzaG93X2VkaXRfcHJvZmlsZV9tb2RhbCgpJz5NaSBwZXJmaWw8L2Rpdj5cIjtcbiAgICAgIC8vaHRtbCA9IGh0bWwgKyBcIjxkaXYgY2xhc3M9J3VzZXItbG9nZ2VkLWxpbmsnIG5nLWNsaWNrPSdjaGFuZ2VfcGFzc3dvcmQoKSc+Q2FtYmlhciBjb250cmFzZcOxYTwvZGl2PlwiO1xuICAgICAgaHRtbCA9IGh0bWwgKyBcIjxkaXYgY2xhc3M9J3VzZXItbG9nZ2VkLWxpbmsnIG5nLWNsaWNrPSdzaWduX291dCgpJz5DZXJyYXIgc2VzacOzbjwvZGl2PjwvZGl2PlwiO1xuICAgICAgbWVudS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgJGNvbXBpbGUobWVudSkoJHNjb3BlKTsgLy88LS0tLSByZWNvbXBpbGF0aW9uXG4gICAgICBtZW51LnN0eWxlLmhlaWdodCA9ICcyMjBweCc7XG4gICAgICBtZW51LnN0eWxlLndpZHRoID0gJzIwMHB4JztcbiAgICAgIG1lbnUuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheSA9IGZ1bmN0aW9uKG5hbWUsdHlwZSx2YWx1ZSl7XG4gICAgICB2YXIgZmllbGQgPSBuZXcgQXJyYXkoKTtcbiAgICAgIGZpZWxkLm5hbWUgPSBuYW1lO1xuICAgICAgZmllbGQudHlwZSA9IHR5cGU7XG4gICAgICBmaWVsZC52YWx1ZSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIGZpZWxkO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5X3dpdGhfdHdvRmllbGRzID0gZnVuY3Rpb24obmFtZSx0eXBlLHZhbHVlLHNlY29uZFZhbHVlKXtcbiAgICAgIHZhciBmaWVsZCA9IG5ldyBBcnJheSgpO1xuICAgICAgZmllbGQubmFtZSA9IG5hbWU7XG4gICAgICBmaWVsZC50eXBlID0gdHlwZTtcbiAgICAgIGZpZWxkLnZhbHVlID0gdmFsdWU7XG4gICAgICBmaWVsZC5zZWNvbmRWYWx1ZSA9IHNlY29uZFZhbHVlO1xuICAgICAgcmV0dXJuIGZpZWxkO1xuICAgIH07XG5cbiAgICAkc2NvcGUuZml4X2ZiX2ltYWdlX2xpbmsgPSBmdW5jdGlvbih1cmwpe1xuICAgICAgaWYodXJsLmluZGV4T2YoXCJodHRwOi8vZ3JhcGguZmFjZWJvb2suY29tXCIpID49IDApe1xuICAgICAgICB2YXIgcGFydHMgPSB1cmwuc3BsaXQoXCJodHRwOi8vZ3JhcGguZmFjZWJvb2suY29tXCIpO1xuICAgICAgICB2YXIgbmV3VXJsID0gXCJodHRwOi8vZ3JhcGguZmFjZWJvb2suY29tXCIrcGFydHNbMV07XG4gICAgICAgIHJldHVybiBuZXdVcmw7XG4gICAgICB9XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH07XG5cbiAgICAkc2NvcGUubG9nX2luID0gZnVuY3Rpb24odXNlciwgcGFzc3dvcmQpe1xuICAgICAgaWYoU2VtYXBob3JlU2VydmljZS50YWtlSWZBdmFpbGFibGUoXCJzdWJtaXQtZm9ybVwiKSl7XG4gICAgICAgIGlmKENvbm5lY3Rpdml0eVNlcnZpY2UuaXNPbmxpbmUoKSl7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAgIHZhciBmaWVsZHMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiVXN1YXJpb1wiLFwibm90TnVsbFwiLHVzZXIpKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiQ29udHJhc2XDsWFcIixcIm5vdE51bGxcIixwYXNzd29yZCkpO1xuICAgICAgICAgIGlmKEVycm9yU2VydmljZS5jaGVja19maWVsZHMoZmllbGRzLFwiZXJyb3JfY29udGFpbmVyXCIpKXtcbiAgICAgICAgICAgIEF1dGhTZXJ2aWNlLmxvZ19pbih1c2VyLHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICAgICAgaWYoRXJyb3JTZXJ2aWNlLmh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bChyZXNwLFwiZXJyb3JfY29udGFpbmVyXCIpKXtcbiAgICAgICAgICAgICAgICBwaG90byA9ICRzY29wZS5maXhfZmJfaW1hZ2VfbGluaygkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5QaG90byk7XG4gICAgICAgICAgICAgICAgaWYocGhvdG89PVwiYW5vblwiKXtcbiAgICAgICAgICAgICAgICAgIHBob3RvPVwidXJsKC4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nKVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBVc2VyU2VydmljZS5zYXZlX3VzZXJfZGF0YSgkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5OYW1lLCAkc2NvcGUubm9uYXV0aC5wYXNzd29yZCwgcGhvdG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlNob3dMb2NhdGlvbiwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuVWlkLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5Fc3RhZG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkdlbmRlciwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICAgICAgICBEQlNlcnZpY2Uuc2F2ZVVzZXIoJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuTmFtZSwkc2NvcGUubm9uYXV0aC5wYXNzd29yZCxwaG90bywkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5TaG93TG9jYXRpb24sJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuVWlkLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkVzdGFkbywgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuR2VuZGVyLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5JbnRlcmVzdGVkSW4pO1xuICAgICAgICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDEpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlX2xvZ2luX21vZGFsKCk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnNlbmRVc2VyTG9jYXRpb24oKTtcbiAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgIC8vYWxlcnQoXCJFcnJvciBlbiBzaWduX2luXCIpO1xuICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgRXJyb3JTZXJ2aWNlLnNob3dfZXJyb3JfbWVzc2FnZShcImVycm9yX2NvbnRhaW5lclwiLHJlc3Auc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICBQb3BVcFNlcnZpY2Uuc2hvd19hbGVydChcIlNpbiBjb25leGnDs24gYSBpbnRlcm5ldFwiLFwiUGFyYSBpbmljaWFyIHNlc2nDs24gZGViZSBlc3RhciBjb25lY3RhZG8gYSBpbnRlcm5ldFwiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICRzY29wZS5sb2dfaW5fYmFja2dyb3VuZCA9IGZ1bmN0aW9uKHVzZXIsIHBhc3N3b3JkKXtcbiAgICAgIEF1dGhTZXJ2aWNlLmxvZ19pbih1c2VyLHBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgaWYoRXJyb3JTZXJ2aWNlLmh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bF9hamF4KHJlc3ApKXtcbiAgICAgICAgICBwaG90byA9ICRzY29wZS5maXhfZmJfaW1hZ2VfbGluaygkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5QaG90byk7XG4gICAgICAgICAgaWYocGhvdG89PVwiYW5vblwiKXtcbiAgICAgICAgICAgIHBob3RvPVwidXJsKC4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nKVwiO1xuICAgICAgICAgIH1cbiAgICAgICAgICBVc2VyU2VydmljZS5zYXZlX3VzZXJfZGF0YSgkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5OYW1lLCBwYXNzd29yZCwgcGhvdG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlNob3dMb2NhdGlvbiwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuVWlkLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5Fc3RhZG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkdlbmRlciwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICBEQlNlcnZpY2Uuc2F2ZVVzZXIoJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuTmFtZSxwYXNzd29yZCxwaG90bywkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5TaG93TG9jYXRpb24sJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuVWlkLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkVzdGFkbywgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuR2VuZGVyLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5JbnRlcmVzdGVkSW4pO1xuXG4gICAgICAgICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMSk7XG4gICAgICAgICAgJHNjb3BlLnNlbmRVc2VyTG9jYXRpb24oKTtcbiAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgfSwgZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKGVycik7XG4gICAgICAgIC8vRXJyb3JTZXJ2aWNlLnNob3dfZXJyb3JfbWVzc2FnZV9wb3B1cChyZXNwLnN0YXR1c1RleHQpO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgICRzY29wZS5zZW5kVXNlckxvY2F0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwic3VibWl0LWxvY2F0aW9uXCIpKXtcbiAgICAgICAgaWYoVXNlclNlcnZpY2Uuc2hvd19sb2NhdGlvbj09MSl7XG4gICAgICAgICAgdmFyIHBvc09wdGlvbnMgPSB7dGltZW91dDogMTAwMDAsIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZX07XG4gICAgICAgICAgJGNvcmRvdmFHZW9sb2NhdGlvblxuICAgICAgICAgICAgLmdldEN1cnJlbnRQb3NpdGlvbihwb3NPcHRpb25zKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICAgIFBpblNlcnZpY2Uuc2VuZFVzZXJMb2NhdGlvbihwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUscG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSxVc2VyU2VydmljZS5uYW1lLFVzZXJTZXJ2aWNlLnBhc3N3b3JkKS50aGVuKGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgICAgICAgICBpZihFcnJvclNlcnZpY2UuaHR0cF9yZXNwb25zZV9pc19zdWNjZXNzZnVsX2FqYXgocmVzcCkpe1xuICAgICAgICAgICAgICAgICAgTG9jYXRpb25zU2VydmljZS5zYXZlX2xhc3RfdXNlcl9wb3NpdGlvbihwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUscG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUubG9hZFBpbnNMYXllcigpO1xuICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtbG9jYXRpb25cIik7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWxvY2F0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1sb2NhdGlvblwiKTtcbiAgICAgICAgICAgICAgJHNjb3BlLmxvYWRQaW5zTGF5ZXIoKTtcbiAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWxvY2F0aW9uXCIpO1xuICAgICAgICAgICRzY29wZS5sb2FkUGluc0xheWVyKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgJHNjb3BlLnNpZ25fb3V0ID0gZnVuY3Rpb24oKXtcbiAgICAgIFVzZXJTZXJ2aWNlLmVyYXNlX3VzZXJfZGF0YSgpO1xuICAgICAgREJTZXJ2aWNlLmVyYXNlVXNlcigpO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDApO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1c2VyLW9wdGlvbnMtbWVudVwiKS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO1xuICAgIH1cblxuICAgICRzY29wZS5zaG93X2VkaXRfcHJvZmlsZV9tb2RhbCA9IGZ1bmN0aW9uKCl7XG4gICAgICAvL0NhcmdhciBlbCBtb2RhbCBjb24gbGEgaW5mbyBkZWwgdXN1YXJpbyBsb2d1ZWFkbyB5IGNvbiBlbCBzdWJtaXQgYSBlZGl0X3Byb2ZpbGVfb2tcbiAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwib3Blbi1tb2RhbFwiKSl7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICAkc2NvcGUubmV3dXNlciA9IG5ldyBBcnJheSgpO1xuICAgICAgICAkc2NvcGUubmV3dXNlci5lbWFpbCA9IFVzZXJTZXJ2aWNlLmVtYWlsO1xuICAgICAgICAkc2NvcGUubmV3dXNlci5nZW5kZXIgPSBVc2VyU2VydmljZS5nZW5kZXI7XG4gICAgICAgICRzY29wZS5uZXd1c2VyLnVzZXJuYW1lID0gVXNlclNlcnZpY2UubmFtZTtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIuaW50ZXJlc3RlZCA9IFVzZXJTZXJ2aWNlLmludGVyZXN0ZWQ7XG4gICAgICAgICRzY29wZS5uZXd1c2VyLnN0YXR1cyA9IFVzZXJTZXJ2aWNlLnN0YXR1cztcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIuc2hvd19sb2NhdGlvbiA9IFVzZXJTZXJ2aWNlLnNob3dfbG9jYXRpb247XG4gICAgICAgICRzY29wZS5hY3R1YWxfcGhvdG8gPSBVc2VyU2VydmljZS5waWN0dXJlX3VybDtcbiAgICAgICAgaWYoJHNjb3BlLmFjdHVhbF9waG90byE9bnVsbCl7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICRzY29wZS5hY3R1YWxfcGhvdG8gPSBcIi4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYoJHNjb3BlLmFjdHVhbF9waG90bz09XCJ1cmwoLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmcpXCIpe1xuICAgICAgICAgICRzY29wZS5hY3R1YWxfcGhvdG8gPSBcIi4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nXCI7XG4gICAgICAgIH1cbiAgICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgICAgICAgIGlmKFZhbGlkYXRpb25TZXJ2aWNlLmlzTW9iaWxlRGV2aWNlKCkpe1xuICAgICAgICAgICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCd0ZW1wbGF0ZXMvZWRpdF9wcm9maWxlX3dpdGhfcGhvdG8uaHRtbCcsIHtcbiAgICAgICAgICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICAgICAgICAgIGhhcmR3YXJlQmFja0J1dHRvbkNsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCcsXG4gICAgICAgICAgICAgICAgLy9mb2N1c0ZpcnN0SW5wdXQ6IHRydWVcbiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihtb2RhbCkge1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlci1vcHRpb25zLW1lbnVcIikuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbCA9IG1vZGFsO1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJvcGVuLW1vZGFsXCIpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICRpb25pY01vZGFsLmZyb21UZW1wbGF0ZVVybCgndGVtcGxhdGVzL2VkaXRfcHJvZmlsZV93aXRoX3Bob3RvX2Rlc2t0b3AuaHRtbCcsIHtcbiAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgICAgaGFyZHdhcmVCYWNrQnV0dG9uQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCcsXG4gICAgICAgICAgICAgIC8vZm9jdXNGaXJzdElucHV0OiB0cnVlXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVzZXItb3B0aW9ucy1tZW51XCIpLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7XG4gICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsID0gbW9kYWw7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsLnNob3coKTtcbiAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcIm9wZW4tbW9kYWxcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgICRzY29wZS5yZWFkVVJMID0gZnVuY3Rpb24gKGlucHV0LHR5cGUpIHtcbiAgICAgIGlmIChpbnB1dC5maWxlcyAmJiBpbnB1dC5maWxlc1swXSkge1xuICAgICAgICBpZih0eXBlPT0xKXtcbiAgICAgICAgICAkc2NvcGUubmV3dXNlci5waWN0dXJlX3VybCA9IGlucHV0LmZpbGVzWzBdO1xuICAgICAgICAgICAgfWVsc2UgaWYgKHR5cGU9PTIpe1xuICAgICAgICAgICRzY29wZS5jb21tZW50LnBob3RvID0gaW5wdXQuZmlsZXNbMF07XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICRzY29wZS5yZXBvcnQuZmlsZSA9IGlucHV0LmZpbGVzWzBdO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibXlJbWFnZVwiKS5zcmMgPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW5wdXQuZmlsZXNbMF0pO1xuICAgIH1cblxuICAgIH1cblxuICAgICRzY29wZS5jbG9zZV9lZGl0X3Byb2ZpbGVfbW9kYWwgPSBmdW5jdGlvbigpe1xuICAgICAgLy9DYXJnYXIgZWwgbW9kYWwgY29uIGxhIGluZm8gZGVsIHVzdWFyaW8gbG9ndWVhZG8geSBjb24gZWwgc3VibWl0IGEgdXBkYXRlX3VzZXJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIE1vZGFsU2VydmljZS5jaGVja05vTW9kYWxJc09wZW4oKTtcbiAgICB9XG5cbiAgICAkc2NvcGUuZWRpdF9wcm9maWxlX29rID0gZnVuY3Rpb24oKXtcbiAgICAgICRzY29wZS5lZGl0X3Byb2ZpbGUoKTtcbiAgICB9XG5cbiAgICAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZSA9IGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgIGlmKHJlc3BvbnNlLmRhdGEpe1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmVkaXRfcHJvZmlsZSA9IGZ1bmN0aW9uKCl7XG4gICAgICBpZihTZW1hcGhvcmVTZXJ2aWNlLnRha2VJZkF2YWlsYWJsZShcInN1Ym1pdC1mb3JtXCIpKXtcbiAgICAgICAgaWYoQ29ubmVjdGl2aXR5U2VydmljZS5pc09ubGluZSgpKXtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgLyp2YXIgZmllbGRzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIkNvcnJlbyBlbGVjdHLDs25pY29cIixcImVtYWlsXCIsbmV3X2VtYWlsKSk7XG4gICAgICAgICAgLy9maWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiQ29udHJhc2XDsWFcIixcIm5vdE51bGxcIixwYXNzd29yZCkpO1xuICAgICAgICAgIGZpZWxkcy5wdXNoKCRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXkoXCJDw6lkdWxhIGRlIElkZW50aWRhZFwiLFwiaWRkb2NfdXlcIixpZF9kb2MpKTtcbiAgICAgICAgICBmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiTm9tYnJlIHkgYXBlbGxpZG9cIixcInR3b193b3Jkc1wiLGZ1bGxuYW1lKSk7Ki9cbiAgICAgICAgICAvKmlmKEVycm9yU2VydmljZS5jaGVja19maWVsZHMoZmllbGRzLFwiZXJyb3JfY29udGFpbmVyXCIpKXsqL1xuICAgICAgICAgICRzY29wZS5uZXd1c2VyLnBhc3N3b3JkID0gVXNlclNlcnZpY2UucGFzc3dvcmQ7XG4gICAgICAgICAgICB2YXIgZWRpdF9yZXF1ZXN0ID0gQXV0aFNlcnZpY2UuZWRpdF91c2VyKCRzY29wZS5uZXd1c2VyKTtcbiAgICAgICAgICAgIGlmKCRzY29wZS5uZXd1c2VyLnBpY3R1cmVfdXJsPT1udWxsIHx8ICRzY29wZS5uZXd1c2VyLnBpY3R1cmVfdXJsPT1cIlwiIHx8ICFWYWxpZGF0aW9uU2VydmljZS5pc01vYmlsZURldmljZSgpKXtcbiAgICAgICAgICAgICAgZWRpdF9yZXF1ZXN0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZW50X2xhYmVsXCIpLmlubmVySFRNTCA9IFwiRW52aWFkbzogMTAwJVwiO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocmVzcCk7XG4gICAgICAgICAgICAgICAgaWYoRXJyb3JTZXJ2aWNlLmh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bChyZXNwLFwiZXJyb3JfY29udGFpbmVyXCIpKXtcbiAgICAgICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLnNhdmVfdXNlcl9kYXRhKCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLk5hbWUsICRzY29wZS5uZXd1c2VyLnBhc3N3b3JkLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5QaG90bywgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuU2hvd0xvY2F0aW9uLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5VaWQsICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkVzdGFkbywgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuR2VuZGVyLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5JbnRlcmVzdGVkSW4pO1xuICAgICAgICAgICAgICAgICAgREJTZXJ2aWNlLnNhdmVVc2VyKCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLk5hbWUsJHNjb3BlLm5ld3VzZXIucGFzc3dvcmQsJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuUGhvdG8sJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuU2hvd0xvY2F0aW9uLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlVpZCwkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5Fc3RhZG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkdlbmRlciwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jbG9zZV9lZGl0X3Byb2ZpbGVfbW9kYWwoKTtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jaGVja191c2VyX2xvZ2dlZCgpO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycyxjb25maWcpe1xuICAgICAgICAgICAgICAgIEVycm9yU2VydmljZS5zaG93X2Vycm9yX21lc3NhZ2UoXCJlcnJvcl9jb250YWluZXJcIixzdGF0dXMpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgZWRpdF9yZXF1ZXN0LnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHJlc3VsdC5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgaWYoRXJyb3JTZXJ2aWNlLmh0dHBfZGF0YV9yZXNwb25zZV9pc19zdWNjZXNzZnVsKGRhdGEsXCJlcnJvcl9jb250YWluZXJcIikpe1xuICAgICAgICAgICAgICAgICAgZGF0YSA9ICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgVXNlclNlcnZpY2Uuc2F2ZV91c2VyX2RhdGEoZGF0YS5OYW1lLCAkc2NvcGUubmV3dXNlci5wYXNzd29yZCwgZGF0YS5QaG90bywgZGF0YS5TaG93TG9jYXRpb24sIGRhdGEuVWlkLCBkYXRhLkVzdGFkbywgZGF0YS5HZW5kZXIsIGRhdGEuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICAgICAgICAgIERCU2VydmljZS5zYXZlVXNlcihkYXRhLk5hbWUsJHNjb3BlLm5ld3VzZXIucGFzc3dvcmQsZGF0YS5QaG90byxkYXRhLlNob3dMb2NhdGlvbixkYXRhLlVpZCxkYXRhLkVzdGFkbywgZGF0YS5HZW5kZXIsIGRhdGEuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jbG9zZV9lZGl0X3Byb2ZpbGVfbW9kYWwoKTtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jaGVja191c2VyX2xvZ2dlZCgpO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWxlcnQgPSBcIkPDs2RpZ286IFwiICsgZXJyb3IuY29kZTtcbiAgICAgICAgICAgICAgICBhbGVydCA9IGFsZXJ0ICsgXCIgT3JpZ2VuOiBcIiArIGVycm9yLnNvdXJjZTtcbiAgICAgICAgICAgICAgICBhbGVydCA9IGFsZXJ0ICsgXCIgRGVzdGlubzogXCIgKyBlcnJvci50YXJnZXQ7XG4gICAgICAgICAgICAgICAgYWxlcnQgPSBhbGVydCArIFwiIGh0dHBfc3RhdHVzOiBcIiArIGVycm9yLmh0dHBfc3RhdHVzO1xuICAgICAgICAgICAgICAgIGFsZXJ0ID0gYWxlcnQgKyBcIiBCb2R5OiBcIiArIGVycm9yLmJvZHk7XG4gICAgICAgICAgICAgICAgYWxlcnQgPSBhbGVydCArIFwiIEV4Y2VwdGlvbjogXCIgKyBlcnJvci5leGNlcHRpb247XG4gICAgICAgICAgICAgICAgRXJyb3JTZXJ2aWNlLnNob3dfZXJyb3JfbWVzc2FnZShcImVycm9yX2NvbnRhaW5lclwiLFwiSHVibyB1biBlcnJvciBlbiBlbCBlbnbDrW86IFwiICsgYWxlcnQpO1xuICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHByb2dyZXNzKSB7XG4gICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwbG9hZFByb2dyZXNzID0gKHByb2dyZXNzLmxvYWRlZCAvIHByb2dyZXNzLnRvdGFsKSAqIDEwMDtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZW50X2xhYmVsXCIpLmlubmVySFRNTCA9IFwiRW52aWFkbzogXCIgKyBNYXRoLnJvdW5kKCRzY29wZS51cGxvYWRQcm9ncmVzcykgKyBcIiVcIjtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAvKn1lbHNle1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgfSovXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgUG9wVXBTZXJ2aWNlLnNob3dfYWxlcnQoXCJTaW4gY29uZXhpw7NuIGEgaW50ZXJuZXRcIixcIlBhcmEgZWRpdGFyIHN1IHBlcmZpbCBkZWJlIGVzdGFyIGNvbmVjdGFkbyBhIGludGVybmV0XCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG5cbiAgICAkc2NvcGUuc2hvd19sb2dpbl9tb2RhbCA9IGZ1bmN0aW9uKCl7XG4gICAgICAvL0NhcmdhciBlbCBtb2RhbCBjb24gZWwgZm9ybSBkZSBsb2dpbiB5IGFoaSBsbGFtYSBhbCBzaWduX2luXG4gICAgICBpZihTZW1hcGhvcmVTZXJ2aWNlLnRha2VJZkF2YWlsYWJsZShcIm9wZW4tbW9kYWxcIikpe1xuICAgICAgICAkc2NvcGUubm9uYXV0aCA9IG5ldyBBcnJheSgpO1xuICAgICAgICAkc2NvcGUubm9uYXV0aC51c2VyID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLm5vbmF1dGgucGFzc3dvcmQgPSBcIlwiO1xuICAgICAgICBNb2RhbFNlcnZpY2UuY2hlY2tOb01vZGFsSXNPcGVuKCk7XG4gICAgICAgICRpb25pY01vZGFsLmZyb21UZW1wbGF0ZVVybCgndGVtcGxhdGVzL2xvZ19pbi5odG1sJywge1xuICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgIGhhcmR3YXJlQmFja0J1dHRvbkNsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgIGFuaW1hdGlvbjogJ3NsaWRlLWluLXVwJyxcbiAgICAgICAgICAgIC8vZm9jdXNGaXJzdElucHV0OiB0cnVlXG4gICAgICAgICAgfSkudGhlbihmdW5jdGlvbihtb2RhbCkge1xuICAgICAgICAgICAgICAkc2NvcGUuaGlkZV9zcGVjaWFsX2RpdnMoKTtcbiAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsID0gbW9kYWw7XG4gICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwib3Blbi1tb2RhbFwiKTtcbiAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbC5zaG93KCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmxvZ2luX29rID0gZnVuY3Rpb24oKXtcbiAgICAgICRzY29wZS5sb2dfaW4oJHNjb3BlLm5vbmF1dGgudXNlciwkc2NvcGUubm9uYXV0aC5wYXNzd29yZCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNsb3NlX2xvZ2luX21vZGFsID0gZnVuY3Rpb24oKXtcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgIE1vZGFsU2VydmljZS5jaGVja05vTW9kYWxJc09wZW4oKTtcbiAgICB9XG5cblxuXG4gICAgJHNjb3BlLnNob3dfc2lnbl91cF9tb2RhbCA9IGZ1bmN0aW9uKCl7XG4gICAgICAvL2NhcmdhciBlbCBtb2RhbCBjb24gZWwgZm9ybSBkZSBzaWduX3VwIHkgZGUgYWhpIGxsYW1hciBhbCBzaWduX3VwXG4gICAgICBpZihTZW1hcGhvcmVTZXJ2aWNlLnRha2VJZkF2YWlsYWJsZShcIm9wZW4tbW9kYWxcIikpe1xuICAgICAgICAkc2NvcGUubmV3dXNlciA9IG5ldyBBcnJheSgpO1xuICAgICAgICAkc2NvcGUubmV3dXNlci5lbWFpbCA9IFwiXCI7XG4gICAgICAgICRzY29wZS5uZXd1c2VyLnBhc3N3b3JkID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLm5ld3VzZXIuZnVsbG5hbWUgPSBcIlwiO1xuICAgICAgICAkc2NvcGUubmV3dXNlci5pZF9kb2MgPSBcIlwiO1xuICAgICAgICAkc2NvcGUubmV3dXNlci50ZWxlcGhvbmUgPSBcIlwiO1xuICAgICAgICAkc2NvcGUubmV3dXNlci5waG90byA9IFwiXCI7XG4gICAgICAgIE1vZGFsU2VydmljZS5jaGVja05vTW9kYWxJc09wZW4oKTtcbiAgICAgICAgaWYoVmFsaWRhdGlvblNlcnZpY2UuaXNNb2JpbGVEZXZpY2UoKSl7XG4gICAgICAgICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCd0ZW1wbGF0ZXMvc2lnbl91cC5odG1sJywge1xuICAgICAgICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICAgICAgICBoYXJkd2FyZUJhY2tCdXR0b25DbG9zZTogZmFsc2UsXG4gICAgICAgICAgICAgIGFuaW1hdGlvbjogJ3NsaWRlLWluLXVwJyxcbiAgICAgICAgICAgICAgLy9mb2N1c0ZpcnN0SW5wdXQ6IHRydWVcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obW9kYWwpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaGlkZV9zcGVjaWFsX2RpdnMoKTtcbiAgICAgICAgICAgICAgICBNb2RhbFNlcnZpY2UuYWN0aXZlTW9kYWwgPSBtb2RhbDtcbiAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcIm9wZW4tbW9kYWxcIik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsLnNob3coKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwoJ3RlbXBsYXRlcy9zaWduX3VwX2Rlc2t0b3AuaHRtbCcsIHtcbiAgICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgICAgaGFyZHdhcmVCYWNrQnV0dG9uQ2xvc2U6IGZhbHNlLFxuICAgICAgICAgICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCcsXG4gICAgICAgICAgICAgIC8vZm9jdXNGaXJzdElucHV0OiB0cnVlXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmhpZGVfc3BlY2lhbF9kaXZzKCk7XG4gICAgICAgICAgICAgICAgTW9kYWxTZXJ2aWNlLmFjdGl2ZU1vZGFsID0gbW9kYWw7XG4gICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJvcGVuLW1vZGFsXCIpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdF9iYXJcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIE1vZGFsU2VydmljZS5hY3RpdmVNb2RhbC5zaG93KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICB9XG4gICAgfVxuXG4gICAgJHNjb3BlLmNsb3NlX3NpZ25fdXBfbW9kYWwgPSBmdW5jdGlvbigpe1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmb290X2JhclwiKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgTW9kYWxTZXJ2aWNlLmNoZWNrTm9Nb2RhbElzT3BlbigpO1xuICAgIH1cblxuICAgICRzY29wZS5zaWduX3VwID0gZnVuY3Rpb24oKXtcbiAgICAgIGlmKFNlbWFwaG9yZVNlcnZpY2UudGFrZUlmQXZhaWxhYmxlKFwic3VibWl0LWZvcm1cIikpe1xuICAgICAgICBpZihDb25uZWN0aXZpdHlTZXJ2aWNlLmlzT25saW5lKCkpe1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICB2YXIgZmllbGRzID0gbmV3IEFycmF5KCk7XG4gICAgICAgICAgLypmaWVsZHMucHVzaCgkc2NvcGUuY3JlYXRlX2ZpZWxkX2FycmF5KFwiQ29ycmVvIGVsZWN0csOzbmljb1wiLFwiZW1haWxcIiwkc2NvcGUubmV3dXNlci5lbWFpbCkpO1xuICAgICAgICAgIGZpZWxkcy5wdXNoKCRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXkoXCJDb250cmFzZcOxYVwiLFwibm90TnVsbFwiLCRzY29wZS5uZXd1c2VyLnBhc3N3b3JkKSk7XG4gICAgICAgICAgZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIlVzdWFyaW9cIixcIm5vdE51bGxcIiwkc2NvcGUubmV3dXNlci51c2VybmFtZSkpO1xuICAgICAgICAgIGZpZWxkcy5wdXNoKCRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXkoXCJHw6luZXJvXCIsXCJub3ROdWxsXCIsJHNjb3BlLm5ld3VzZXIuZ2VuZGVyKSk7XG4gICAgICAgICAgZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIkludGVyZXNhZG8gZW5cIixcIm5vdE51bGxcIiwkc2NvcGUubmV3dXNlci5pbnRlcmVzdGVkKSk7XG4gICAgICAgICAgZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheShcIkVzdGFkb1wiLFwibm90TnVsbFwiLCRzY29wZS5uZXd1c2VyLnN0YXR1cykpO1xuICAgICAgICAgIGZpZWxkcy5wdXNoKCRzY29wZS5jcmVhdGVfZmllbGRfYXJyYXkoXCJNb3N0cmFyIHViaWNhY2nDs25cIixcIm5vdE51bGxcIiwkc2NvcGUubmV3dXNlci5zaG93X2xvY2F0aW9uKSk7XG4gICAgICAgICAgZmllbGRzLnB1c2goJHNjb3BlLmNyZWF0ZV9maWVsZF9hcnJheV93aXRoX3R3b0ZpZWxkcyhcIidDb250cmFzZcOxYScgeSAnQ29uZmlybWFyIGNvbnRyYXNlw7FhJ1wiLFwiZXF1YWxzVG9cIiwkc2NvcGUubmV3dXNlci5wYXNzd29yZCwgJHNjb3BlLm5ld3VzZXIucmVwYXNzd29yZCkpOyovXG4gICAgICAgICAgLy9pZihFcnJvclNlcnZpY2UuY2hlY2tfZmllbGRzKGZpZWxkcyxcImVycm9yX2NvbnRhaW5lclwiKSl7XG4gICAgICAgICAgICBpZigkc2NvcGUubmV3dXNlci5waWN0dXJlX3VybCE9bnVsbCAmJiAkc2NvcGUubmV3dXNlci5waWN0dXJlX3VybCE9XCJcIiAmJiBWYWxpZGF0aW9uU2VydmljZS5pc01vYmlsZURldmljZSgpKXtcbiAgICAgICAgICAgICAgQXV0aFNlcnZpY2UuY3JlYXRlX3VzZXIoJHNjb3BlLm5ld3VzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSwgc3RhdHVzLCBoZWFkZXJzLGNvbmZpZyl7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzZW50X2xhYmVsXCIpLmlubmVySFRNTCA9IFwiRW52aWFkbzogMTAwJVwiO1xuICAgICAgICAgICAgICAgIGlmKEVycm9yU2VydmljZS5odHRwX2RhdGFfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bChkYXRhLFwiZXJyb3JfY29udGFpbmVyXCIpKXtcbiAgICAgICAgICAgICAgICAgIGRhdGEgPSAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLnNhdmVfdXNlcl9kYXRhKGRhdGEubmFtZSwgZGF0YS5lbWFpbCwgJHNjb3BlLm5ld3VzZXIucGFzc3dvcmQsIGRhdGEuaWRlbnRpdHlfZG9jdW1lbnQsIGRhdGEucGhvbmUsIGRhdGEucGljdHVyZV91cmwpO1xuICAgICAgICAgICAgICAgICAgVXNlclNlcnZpY2Uuc2F2ZV91c2VyX2RhdGEoZGF0YS5OYW1lLCAkc2NvcGUubmV3dXNlci5wYXNzd29yZCwgZGF0YS5QaG90bywgZGF0YS5TaG93TG9jYXRpb24sIGRhdGEuVWlkLCBkYXRhLkVzdGFkbywgZGF0YS5HZW5kZXIsIGRhdGEuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICAgICAgICAgIERCU2VydmljZS5zYXZlVXNlcihkYXRhLk5hbWUscGFzc3dvcmQsZGF0YS5QaG90byxkYXRhLlNob3dMb2NhdGlvbixkYXRhLlVpZCxkYXRhLkVzdGFkbywgZGF0YS5HZW5kZXIsIGRhdGEuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jbG9zZV9lZGl0X3Byb2ZpbGVfbW9kYWwoKTtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jaGVja191c2VyX2xvZ2dlZCgpO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycyxjb25maWcpe1xuICAgICAgICAgICAgICAgIEVycm9yU2VydmljZS5zaG93X2Vycm9yX21lc3NhZ2UoXCJlcnJvcl9jb250YWluZXJcIixzdGF0dXMpO1xuICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBBdXRoU2VydmljZS5jcmVhdGVfdXNlcigkc2NvcGUubmV3dXNlcikudGhlbihmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgICAgICAgICAgaWYoRXJyb3JTZXJ2aWNlLmh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bChyZXNwLFwiZXJyb3JfY29udGFpbmVyXCIpKXtcbiAgICAgICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLnNhdmVfdXNlcl9kYXRhKCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLk5hbWUsICRzY29wZS5uZXd1c2VyLnBhc3N3b3JkLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5QaG90bywgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuU2hvd0xvY2F0aW9uLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5VaWQsICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkVzdGFkbywgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuR2VuZGVyLCAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5JbnRlcmVzdGVkSW4pO1xuICAgICAgICAgICAgICAgICAgREJTZXJ2aWNlLnNhdmVVc2VyKCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLk5hbWUsJHNjb3BlLm5ld3VzZXIucGFzc3dvcmQsJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuUGhvdG8sJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuU2hvd0xvY2F0aW9uLCRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLlVpZCwkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5Fc3RhZG8sICRzY29wZS5nZXRPYmplY3REYXRhRnJvbVJlc3BvbnNlKHJlc3ApLkdlbmRlciwgJHNjb3BlLmdldE9iamVjdERhdGFGcm9tUmVzcG9uc2UocmVzcCkuSW50ZXJlc3RlZEluKTtcbiAgICAgICAgICAgICAgICAgIC8vJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMSk7XG4gICAgICAgICAgICAgICAgICBTZW1hcGhvcmVTZXJ2aWNlLm1ha2VBdmFpbGFibGVBZ2FpbihcInN1Ym1pdC1mb3JtXCIpO1xuICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUuY2xvc2Vfc2lnbl91cF9tb2RhbCgpO1xuICAgICAgICAgICAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICAgICAgICAgICAgdGl0bGU6IFwiVXN1YXJpbyBjcmVhZG8gY29uIMOpeGl0b1wiLFxuICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAkc2NvcGUuZ2V0T2JqZWN0RGF0YUZyb21SZXNwb25zZShyZXNwKS5tZXNzYWdlXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIGFsZXJ0UG9wdXAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9yZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5jaGVja191c2VyX2xvZ2dlZCgpO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3Bpbm5lci1pbnNpZGUtbW9kYWxcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgICAgIFNlbWFwaG9yZVNlcnZpY2UubWFrZUF2YWlsYWJsZUFnYWluKFwic3VibWl0LWZvcm1cIik7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzcGlubmVyLWluc2lkZS1tb2RhbFwiKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgRXJyb3JTZXJ2aWNlLnNob3dfZXJyb3JfbWVzc2FnZShcImVycm9yX2NvbnRhaW5lclwiLHJlc3Auc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIC8qfWVsc2V7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNwaW5uZXItaW5zaWRlLW1vZGFsXCIpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICB9Ki9cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgU2VtYXBob3JlU2VydmljZS5tYWtlQXZhaWxhYmxlQWdhaW4oXCJzdWJtaXQtZm9ybVwiKTtcbiAgICAgICAgICBQb3BVcFNlcnZpY2Uuc2hvd19hbGVydChcIlNpbiBjb25leGnDs24gYSBpbnRlcm5ldFwiLFwiUGFyYSBpbmljaWFyIHJlZ2lzdHJhcnNlIGRlYmUgZXN0YXIgY29uZWN0YWRvIGEgaW50ZXJuZXRcIik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuc2lnbl91cF9vayA9IGZ1bmN0aW9uKCl7XG4gICAgICAvL2NvbnNvbGUubG9nKCRzY29wZS5uZXd1c2VyKTtcbiAgICAgICRzY29wZS5zaWduX3VwKCk7XG4gICAgfVxuXG4gICAgJHNjb3BlLmNoZWNrX3VzZXJfbG9nZ2VkID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciBuYW1lID0gVXNlclNlcnZpY2UubmFtZTtcbiAgICAgIGlmKG5hbWU9PW51bGwpe1xuICAgICAgICAgIC8vU2kgSGF5IHVuIHVzdWFyaW8gZ3VhcmRhZG9cbiAgICAgICAgICB2YXIgdXNlciA9IERCU2VydmljZS5nZXRVc2VyKCk7XG4gICAgICAgICAgdXNlci50aGVuKGZ1bmN0aW9uIChkb2MpIHtcbiAgICAgICAgICAgIGlmKGRvYy5uYW1lIT1udWxsICYmIGRvYy5uYW1lIT1cIlwiICYmIGRvYy5uYW1lIT1cInVuZGVmaW5lZFwiKXtcbiAgICAgICAgICAgICAgJHNjb3BlLmxvZ19pbl9iYWNrZ3JvdW5kKGRvYy5uYW1lLCBkb2MucGFzc3dvcmQpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDApO1xuICAgICAgICAgIH0pO1xuICAgICAgfWVsc2V7XG4gICAgICAgIC8vRXN0w6EgbG9ndWVhZG9cbiAgICAgICAgaWYoVXNlclNlcnZpY2UucGljdHVyZV91cmw9PW51bGwgfHwgVXNlclNlcnZpY2UucGljdHVyZV91cmw9PVwiXCIpe1xuICAgICAgICAgIC8vRWwgdXN1YXJpbyBubyB0aWVuZSBmb3RvIGRlZmluaWRhXG4gICAgICAgICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIC8vRWwgdXN1YXJpbyB0aWVuZSBmb3RvXG4gICAgICAgICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUuc2V0X29mZmxpbmVfdXNlciA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgbmFtZSA9IFVzZXJTZXJ2aWNlLm5hbWU7XG4gICAgICBpZihuYW1lPT1udWxsKXtcbiAgICAgICAgICAvL1NpIEhheSB1biB1c3VhcmlvIGd1YXJkYWRvXG4gICAgICAgICAgdmFyIHVzZXIgPSBEQlNlcnZpY2UuZ2V0VXNlcigpO1xuICAgICAgICAgIHVzZXIudGhlbihmdW5jdGlvbiAoZG9jKSB7XG4gICAgICAgICAgICBpZihkb2MubmFtZSE9bnVsbCAmJiBkb2MubmFtZSE9XCJcIiAmJiBkb2MubmFtZSE9XCJ1bmRlZmluZWRcIil7XG4gICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLnNhdmVfdXNlcl9kYXRhKGRvYy5uYW1lLCBkb2MucGFzc3dvcmQsIGRvYy5waWN0dXJlX3VybCwgZG9jLnNob3dfbG9jYXRpb24pO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICRzY29wZS5zZXRfdXNlcl9waWN0dXJlKDApO1xuICAgICAgICAgIH0pO1xuICAgICAgfWVsc2V7XG4gICAgICAgIC8vRXN0w6EgbG9ndWVhZG9cbiAgICAgICAgaWYoVXNlclNlcnZpY2UucGljdHVyZV91cmw9PW51bGwgfHwgVXNlclNlcnZpY2UucGljdHVyZV91cmw9PVwiXCIpe1xuICAgICAgICAgIC8vRWwgdXN1YXJpbyBubyB0aWVuZSBmb3RvIGRlZmluaWRhXG4gICAgICAgICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIC8vRWwgdXN1YXJpbyB0aWVuZSBmb3RvXG4gICAgICAgICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUoMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgJHNjb3BlLnNldF91c2VyX3BpY3R1cmUgPSBmdW5jdGlvbihoYXNQaG90byl7XG4gICAgICB2YXIgcGljdHVyZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidXNlcl9waWN0dXJlXCIpO1xuICAgICAgaWYoaGFzUGhvdG89PTApe1xuICAgICAgICAvL3BpY3R1cmUuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmcpXCI7XG4gICAgICAgICRzY29wZS51c2VyX2NhY2hlZF9pbWFnZT1cIi4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nXCI7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgaWYoVXNlclNlcnZpY2UucGljdHVyZV91cmwhPW51bGwgJiYgVXNlclNlcnZpY2UucGljdHVyZV91cmwhPVwiXCIpe1xuICAgICAgICAgIC8vYWxlcnQoVXNlclNlcnZpY2UucGljdHVyZV91cmwpO1xuICAgICAgICAgICRzY29wZS51c2VyX2NhY2hlZF9pbWFnZT1Vc2VyU2VydmljZS5waWN0dXJlX3VybDtcbiAgICAgICAgICAvL3BpY3R1cmUuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBVc2VyU2VydmljZS5waWN0dXJlX3VybCArIFwiKVwiO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAvL3BpY3R1cmUuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmcpXCI7XG4gICAgICAgICAgJHNjb3BlLnVzZXJfY2FjaGVkX2ltYWdlPVwiLi9pbWcvaWNvbi11c2VyLWFub255bW91cy5wbmdcIjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfVxuXG4gICAgJHNjb3BlLmZpbmRfbWUgPSBmdW5jdGlvbigpe1xuICAgICAgICAkc2NvcGUuc2V0X2FjdGl2ZV9vcHRpb24oXCJidXR0b24tZmluZC1tZVwiKTtcbiAgICAgICAgJHNjb3BlLmhpZGVfc3BlY2lhbF9kaXZzKCk7XG4gICAgICAgIHZhciBwb3NPcHRpb25zID0ge3RpbWVvdXQ6IDEwMDAwLCBlbmFibGVIaWdoQWNjdXJhY3k6IHRydWV9O1xuICAgICAgICAkY29yZG92YUdlb2xvY2F0aW9uXG4gICAgICAgICAgLmdldEN1cnJlbnRQb3NpdGlvbihwb3NPcHRpb25zKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLmxhdCAgPSBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1hcC5jZW50ZXIubG5nID0gcG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZTtcbiAgICAgICAgICAgICAgICBMb2NhdGlvbnNTZXJ2aWNlLnNhdmVfbmV3X3JlcG9ydF9wb3NpdGlvbihwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUscG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICAgICAgaWYoQ29ubmVjdGl2aXR5U2VydmljZS5pc09ubGluZSgpKXtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLnpvb20gPSAxODtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5tYXAuY2VudGVyLnpvb20gPSAxNjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1hcC5tYXJrZXJzLm5vdyA9IHtcbiAgICAgICAgICAgICAgICAgIGxhdDpwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgICBsbmc6cG9zaXRpb24uY29vcmRzLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiPHAgYWxpZ249J2NlbnRlcic+VGUgZW5jdWVudHJhcyBhcXXDrSA8YnIvPiA8YSBuZy1jbGljaz0nbmV3X3JlcG9ydCgxKTsnPkluaWNpYXIgcmVwb3J0ZSBlbiB0dSBwb3NpY2nDs24gYWN0dWFsPC9hPjwvcD5cIixcbiAgICAgICAgICAgICAgICAgIGZvY3VzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgIGdldE1lc3NhZ2VTY29wZTogZnVuY3Rpb24oKSB7IHJldHVybiAkc2NvcGU7IH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8vJHNjb3BlLm1hcC5tYXJrZXJzLm5vdy5vcGVuUG9wdXAoKTtcbiAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgLy8gZXJyb3JcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiTG9jYXRpb24gZXJyb3IhXCIpO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAvL0Vycm9yU2VydmljZS5zaG93X2Vycm9yX21lc3NhZ2VfcG9wdXAoXCJObyBoZW1vcyBwb2RpZG8gZ2VvbG9jYWxpemFybG8uIMK/VGFsIHZleiBvbHZpZMOzIGhhYmlsaXRhciBsb3Mgc2VydmljaW9zIGRlIGxvY2FsaXphY2nDs24gZW4gc3UgZGlzcG9zaXRpdm8/XCIpXG4gICAgICAgICAgICAgICAgJHNjb3BlLm9wZW5Db3VuY2lsU2VsZWN0b3IoKTtcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICB9O1xuXG4gIH1cblxuXSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnQXV0aFNlcnZpY2UnLCBbJyRodHRwJywgJyRjb3Jkb3ZhRmlsZVRyYW5zZmVyJywgJ0NvbmZpZ1NlcnZpY2UnLCdWYWxpZGF0aW9uU2VydmljZScsIGZ1bmN0aW9uKCRodHRwLCAkY29yZG92YUZpbGVUcmFuc2ZlciwgQ29uZmlnU2VydmljZSwgVmFsaWRhdGlvblNlcnZpY2UpIHtcblxuICB2YXIgYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL2FwaS9cIjtcblxuICByZXR1cm4ge1xuICAgIGxvZ19pbjogZnVuY3Rpb24gKHVzZXIscGFzc3dvcmQpIHtcbiAgICAgICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXIrJyZwYXNzd29yZD0nK3Bhc3N3b3JkO1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2xvZ2luJywgYm9keSx7d2l0aENyZWRlbnRpYWxzOiB0cnVlLCBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICAgIH0sXG5cbiAgICBzaWduX291dDogZnVuY3Rpb24gKHBhc3N3b3JkLCBlbWFpbCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldChiYXNlVVJMICsgXCJzaWduX291dFwiLCB7IHdpdGhDcmVkZW50aWFsczogdHJ1ZSwgcGFyYW1zOiB7IHBhc3N3b3JkX3NpZ25faW46IHBhc3N3b3JkLCBlbWFpbDogZW1haWwgfSB9KTtcbiAgICB9LFxuXG4gICAgY3JlYXRlX3VzZXI6IGZ1bmN0aW9uICh1c2VyT2JqKSB7XG4gICAgICBpZih1c2VyT2JqLnBpY3R1cmVfdXJsICYmIFZhbGlkYXRpb25TZXJ2aWNlLmlzTW9iaWxlRGV2aWNlKCkpe1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgIGZpbGVLZXk6IFwicGhvdG9cIixcbiAgICAgICAgIC8vZmlsZU5hbWU6IGZpbGVuYW1lLFxuICAgICAgICAgLy9jaHVua2VkTW9kZTogZmFsc2UsXG4gICAgICAgICAvL21pbWVUeXBlOiBcImltYWdlL2pwZ1wiLFxuICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgcGFyYW1zIDogeyAgdXNlcjogdXNlck9iai51c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB1c2VyT2JqLnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXJPYmouZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICBnZW5kZXI6IHVzZXJPYmouZ2VuZGVyLFxuICAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3RlZDogdXNlck9iai5pbnRlcmVzdGVkLFxuICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB1c2VyT2JqLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgIHNob3dfbG9jYXRpb246IHVzZXJPYmouc2hvd19sb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciB0cnVzdEFsbEhvc3RzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuICRjb3Jkb3ZhRmlsZVRyYW5zZmVyLnVwbG9hZChiYXNlVVJMICsgXCJjcmVhdGVfdXNlclwiLCB1c2VyT2JqLnBpY3R1cmVfdXJsLCBvcHRpb25zLCB0cnVzdEFsbEhvc3RzKTtcbiAgICAgIH1lbHNle1xuICAgICAgICBpZih1c2VyT2JqLnBpY3R1cmVfdXJsKXtcbiAgICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJwaG90b1wiLCB1c2VyT2JqLnBpY3R1cmVfdXJsKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJ1c2VyXCIsIHVzZXJPYmoudXNlcm5hbWUpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInBhc3N3b3JkXCIsIHVzZXJPYmoucGFzc3dvcmQpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcImVtYWlsXCIsIHVzZXJPYmouZW1haWwpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcImdlbmRlclwiLCB1c2VyT2JqLmdlbmRlcik7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwiaW50ZXJlc3RlZFwiLCB1c2VyT2JqLmludGVyZXN0ZWQpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInN0YXR1c1wiLCB1c2VyT2JqLnN0YXR1cyk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwic2hvd19sb2NhdGlvblwiLCB1c2VyT2JqLnNob3dfbG9jYXRpb24pO1xuICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnY3JlYXRlX3VzZXInLCBmb3JtRGF0YSwge1xuICAgICAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiB1bmRlZmluZWQgfSxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eVxuICAgICAgICAgIH0pO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlck9iai51c2VybmFtZSsnJnBhc3N3b3JkPScrdXNlck9iai5wYXNzd29yZCsnJmVtYWlsPScrdXNlck9iai5lbWFpbCsnJmdlbmRlcj0nK3VzZXJPYmouZ2VuZGVyO1xuICAgICAgICAgIGJvZHkgPSBib2R5ICsnJmludGVyZXN0ZWQ9Jyt1c2VyT2JqLmludGVyZXN0ZWQrJyZzdGF0dXM9Jyt1c2VyT2JqLnN0YXR1cysnJnNob3dfbG9jYXRpb249Jyt1c2VyT2JqLnNob3dfbG9jYXRpb247XG4gICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdjcmVhdGVfdXNlcicsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfSxcblxuICAgIHBhc3N3b3JkX3JlY292ZXJ5OiBmdW5jdGlvbiAoZW1haWwpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoYmFzZVVSTCArIFwiZm9yZ290X3Bhc3N3b3JkXCIsIHsgcGFyYW1zOiB7IGxvZ2luX2VtYWlsOiBlbWFpbH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcGFzc3dvcmRfY2hhbmdlOiBmdW5jdGlvbiAoZW1haWwsb2xkUGFzc3dvcmQsbmV3UGFzc3dvcmQsY29uZmlybVBhc3N3b3JkKSB7XG5cbiAgICAgIHZhciBib2R5ID0gJ2VtYWlsPScrZW1haWwrJyZwYXNzd29yZF9zaWduX2luPScrb2xkUGFzc3dvcmQrJyZuZXdfcGFzc3dvcmQ9JytuZXdQYXNzd29yZCsnJmNvbmZpcm09Jytjb25maXJtUGFzc3dvcmQ7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2NoYW5nZV9wYXNzd29yZCcsIGJvZHkse2hlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG5cbiAgICB9LFxuXG5cbiAgICBlZGl0X3VzZXI6IGZ1bmN0aW9uICh1c2VyT2JqKSB7XG4gICAgICBpZih1c2VyT2JqLnBpY3R1cmVfdXJsICYmIFZhbGlkYXRpb25TZXJ2aWNlLmlzTW9iaWxlRGV2aWNlKCkpe1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgIGZpbGVLZXk6IFwicGhvdG9cIixcbiAgICAgICAgIC8vZmlsZU5hbWU6IGZpbGVuYW1lLFxuICAgICAgICAgLy9jaHVua2VkTW9kZTogZmFsc2UsXG4gICAgICAgICAvL21pbWVUeXBlOiBcImltYWdlL2pwZ1wiLFxuICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLFxuICAgICAgICAgcGFyYW1zIDogeyAgdXNlcjogdXNlck9iai51c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB1c2VyT2JqLnBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXJPYmouZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICBnZW5kZXI6IHVzZXJPYmouZ2VuZGVyLFxuICAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3RlZDogdXNlck9iai5pbnRlcmVzdGVkLFxuICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiB1c2VyT2JqLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgIHNob3dfbG9jYXRpb246IHVzZXJPYmouc2hvd19sb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHZhciB0cnVzdEFsbEhvc3RzID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuICRjb3Jkb3ZhRmlsZVRyYW5zZmVyLnVwbG9hZChiYXNlVVJMICsgXCJlZGl0X3Byb2ZpbGVcIiwgdXNlck9iai5waWN0dXJlX3VybCwgb3B0aW9ucywgdHJ1c3RBbGxIb3N0cyk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgdmFyIGJvZHkgPSAndXNlcj0nK3VzZXJPYmoudXNlcm5hbWUrJyZwYXNzd29yZD0nK3VzZXJPYmoucGFzc3dvcmQrJyZlbWFpbD0nK3VzZXJPYmouZW1haWwrJyZnZW5kZXI9Jyt1c2VyT2JqLmdlbmRlcjtcbiAgICAgICAgYm9keSA9IGJvZHkgKycmaW50ZXJlc3RlZD0nK3VzZXJPYmouaW50ZXJlc3RlZCsnJnN0YXR1cz0nK3VzZXJPYmouc3RhdHVzKycmc2hvd19sb2NhdGlvbj0nK3VzZXJPYmouc2hvd19sb2NhdGlvbjtcbiAgICAgICAgaWYodXNlck9iai5waWN0dXJlX3VybCl7XG4gICAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwicGhvdG9cIiwgdXNlck9iai5waWN0dXJlX3VybCk7XG4gICAgICAgIFx0Zm9ybURhdGEuYXBwZW5kKFwidXNlclwiLCB1c2VyT2JqLnVzZXJuYW1lKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJwYXNzd29yZFwiLCB1c2VyT2JqLnBhc3N3b3JkKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJlbWFpbFwiLCB1c2VyT2JqLmVtYWlsKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJnZW5kZXJcIiwgdXNlck9iai5nZW5kZXIpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcImludGVyZXN0ZWRcIiwgdXNlck9iai5pbnRlcmVzdGVkKTtcbiAgICAgICAgXHRmb3JtRGF0YS5hcHBlbmQoXCJzdGF0dXNcIiwgdXNlck9iai5zdGF0dXMpO1xuICAgICAgICBcdGZvcm1EYXRhLmFwcGVuZChcInNob3dfbG9jYXRpb25cIiwgdXNlck9iai5zaG93X2xvY2F0aW9uKTtcbiAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2VkaXRfcHJvZmlsZScsIGZvcm1EYXRhLCB7XG4gICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZCB9LFxuICAgICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBhbmd1bGFyLmlkZW50aXR5XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnZWRpdF9wcm9maWxlJywgYm9keSx7d2l0aENyZWRlbnRpYWxzOiB0cnVlLCBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gIH07XG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnQ29uZmlnU2VydmljZScsIFsnJGh0dHAnLCBmdW5jdGlvbigkaHR0cCkge1xuXG4gIHZhciBDb25maWdPYmogPSB7fTtcbiAgLy9Db25maWdPYmouYmFzZVVSTCA9IFwiaHR0cHM6Ly9wbWJkZXYuZGV2ZWxvcG1lbnQuZGF0YXV5Lm9yZ1wiO1xuICBDb25maWdPYmouYmFzZVVSTCA9IFwiaHR0cDovL3RvbWFtb3N1bmEuaW5mb1wiO1xuICBpZihpb25pYy5QbGF0Zm9ybS5pc1dlYlZpZXcoKSl7XG4gICAgQ29uZmlnT2JqLmJhc2VVUkwgPSBcImh0dHA6Ly90b21hbW9zdW5hLmluZm9cIjtcbiAgfSBlbHNlIHtcbiAgICBDb25maWdPYmouYmFzZVVSTCA9IFwiL2JhY2tlbmRcIjtcbiAgfVxuICBDb25maWdPYmouQXBwTmFtZSA9IFwiwr9Ub21hbW9zIHVuYT9cIjtcblxuICBDb25maWdPYmouYmFzZUNvYnJhbmQgPSBcIi9jb2JyYW5kcy9wb3JtaWJhcnJpb1wiO1xuXG4gIHJldHVybiBDb25maWdPYmo7XG5cbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdDb25uZWN0aXZpdHlTZXJ2aWNlJywgWyckY29yZG92YU5ldHdvcmsnLCBmdW5jdGlvbigkY29yZG92YU5ldHdvcmspe1xuXG4gIHJldHVybiB7XG4gICAgaXNPbmxpbmU6IGZ1bmN0aW9uKCl7XG4gICAgICAvKmlmKGlvbmljLlBsYXRmb3JtLmlzV2ViVmlldygpKXtcbiAgICAgICAgcmV0dXJuICRjb3Jkb3ZhTmV0d29yay5pc09ubGluZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5vbkxpbmU7XG4gICAgICAgIC8vcmV0dXJuIGZhbHNlO1xuICAgICAgfSovXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIGlzT2ZmbGluZTogZnVuY3Rpb24oKXtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIC8qaWYoaW9uaWMuUGxhdGZvcm0uaXNXZWJWaWV3KCkpe1xuICAgICAgICByZXR1cm4gISRjb3Jkb3ZhTmV0d29yay5pc09ubGluZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICFuYXZpZ2F0b3Iub25MaW5lO1xuICAgICAgfSovXG4gICAgfVxuICB9XG59XSlcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdEQlNlcnZpY2UnLCBbJyRxJywgZnVuY3Rpb24oJHEpIHtcbiAgIHZhciBfZGI7XG5cbiAgIHJldHVybiB7XG4gICAgICAgaW5pdERCOiBpbml0REIsXG4gICAgICAgc2F2ZVVzZXI6IHNhdmVVc2VyLFxuICAgICAgIGdldFVzZXI6IGdldFVzZXIsXG4gICAgICAgZXJhc2VVc2VyOiBlcmFzZVVzZXIsXG4gICAgICAgc2F2ZVJlcG9ydDogc2F2ZVJlcG9ydCxcbiAgICAgICBnZXRSZXBvcnQ6IGdldFJlcG9ydCxcbiAgICAgICBnZXRBbGxSZXBvcnRzOiBnZXRBbGxSZXBvcnRzLFxuICAgICAgIHVwZGF0ZVJlcG9ydDogdXBkYXRlUmVwb3J0LFxuICAgICAgIGRlbGV0ZVJlcG9ydDogZGVsZXRlUmVwb3J0LFxuICAgICAgIGRlbGV0ZUdpdmVuUmVwb3J0OiBkZWxldGVHaXZlblJlcG9ydCxcbiAgICAgICBnZXRDYXRlZ29yaWVzOiBnZXRDYXRlZ29yaWVzLFxuICAgICAgIHNhdmVDYXRlZ29yaWVzOiBzYXZlQ2F0ZWdvcmllc1xuICAgfTtcblxuICAgZnVuY3Rpb24gc2F2ZVVzZXIodXNlcl9uYW1lLCB1c2VyX3Bhc3N3b3JkLCB1c2VyX3BpY3R1cmVfdXJsLHNob3dfbG9jYXRpb24sIHVpZCwgc3RhdHVzLCBnZW5kZXIsIGludGVyZXN0ZWQpIHtcbiAgICAgICAgIHZhciB1c2VyID0ge1xuICAgICAgICAgICAgX2lkOiAndXNlci1sb2dnZWQnLFxuICAgICAgICAgICAgbmFtZTogdXNlcl9uYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmQ6IHVzZXJfcGFzc3dvcmQsXG4gICAgICAgICAgICBwaWN0dXJlX3VybDogdXNlcl9waWN0dXJlX3VybCxcbiAgICAgICAgICAgIHNob3dfbG9jYXRpb246IHNob3dfbG9jYXRpb24sXG4gICAgICAgICAgICB1aWQ6IHVpZCxcbiAgICAgICAgICAgIHN0YXR1czogc3RhdHVzLFxuICAgICAgICAgICAgZ2VuZGVyOiBnZW5kZXIsXG4gICAgICAgICAgICBpbnRlcmVzdGVkOiBpbnRlcmVzdGVkXG4gICAgICAgICB9O1xuICAgICAgICAgZ2V0VXNlcigpLnRoZW4oZnVuY3Rpb24gKGRvYykge1xuICAgICAgICAgICB1c2VyLl9yZXYgPSBkb2MuX3JldjtcbiAgICAgICAgICAgcmV0dXJuIF9kYi5wdXQodXNlcik7XG4gICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgIHJldHVybiBfZGIucHV0KHVzZXIpO1xuICAgICAgICAgfSlcbiAgIH07XG5cbiAgZnVuY3Rpb24gZ2V0VXNlcigpIHtcbiAgICAgcmV0dXJuIF9kYi5nZXQoJ3VzZXItbG9nZ2VkJyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gZXJhc2VVc2VyKCkge1xuICAgIF9kYi5nZXQoJ3VzZXItbG9nZ2VkJykudGhlbihmdW5jdGlvbihkb2MpIHtcbiAgICAgIHJldHVybiBfZGIucmVtb3ZlKGRvYyk7XG4gICAgfSk7XG4gIH1cblxuICAgZnVuY3Rpb24gaW5pdERCKCkge1xuICAgICAgIC8vIENyZWF0ZXMgdGhlIGRhdGFiYXNlIG9yIG9wZW5zIGlmIGl0IGFscmVhZHkgZXhpc3RzXG4gICAgICAgX2RiID0gbmV3IFBvdWNoREIoJ3RvbWFtb3N1bmFfbG9jYWxfZGInKTtcbiAgICAgICByZXR1cm4gX2RiO1xuICAgfTtcblxuICAgZnVuY3Rpb24gc2F2ZVJlcG9ydChyZXBvcnQpIHtcbiAgICAgIC8vbmV3X3JlcG9ydF9pZCA9IFwicmVwb3J0X1wiICsgcG91Y2hDb2xsYXRlLnRvSW5kZXhhYmxlU3RyaW5nKFtyZXBvcnRdKTtcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgIHZhciBuZXdfcmVwb3J0X2lkID0gXCJyZXBvcnRfXCIgKyBkYXRlLmdldEZ1bGxZZWFyKCkgKyAoZGF0ZS5nZXRNb250aCgpICsgMSkgKyBkYXRlLmdldERhdGUoKSArIGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gICAgICByZXBvcnQuX2lkID0gbmV3X3JlcG9ydF9pZDtcbiAgICAgIHJldHVybiBfZGIucHV0KHJlcG9ydCk7XG4gICB9O1xuXG4gICBmdW5jdGlvbiB1cGRhdGVSZXBvcnQocmVwb3J0KSB7XG4gICAgIHJldHVybiBfZGIucHV0KHJlcG9ydCk7XG4gIH07XG5cbiAgIGZ1bmN0aW9uIGdldENhdGVnb3JpZXMoKSB7XG4gICAgIHJldHVybiBfZGIuZ2V0KCdjYXRlZ29yaWVzLWxpc3QnKTtcbiAgIH07XG5cbiAgIGZ1bmN0aW9uIHNhdmVDYXRlZ29yaWVzKGNhdGVnb3JpZXMpIHtcbiAgICAgZ2V0Q2F0ZWdvcmllcygpLnRoZW4oZnVuY3Rpb24gKGRvYykge1xuICAgICAgIGNhdGVnb3JpZXMuX3JldiA9IGRvYy5fcmV2O1xuICAgICAgIHJldHVybiBfZGIucHV0KGNhdGVnb3JpZXMpO1xuICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgY2F0ZWdvcmllcy5faWQgPSBcImNhdGVnb3JpZXMtbGlzdFwiO1xuICAgICAgIHJldHVybiBfZGIucHV0KGNhdGVnb3JpZXMpO1xuICAgICB9KVxuICAgfTtcblxuICBmdW5jdGlvbiBnZXRSZXBvcnQocmVwb3J0SWQpIHtcbiAgICAgcmV0dXJuIF9kYi5nZXQocmVwb3J0SWQpO1xuICB9O1xuXG4gICBmdW5jdGlvbiBnZXRBbGxSZXBvcnRzKCkge1xuICAgICByZXR1cm4gX2RiLmFsbERvY3Moe1xuICAgICAgaW5jbHVkZV9kb2NzOiB0cnVlLFxuICAgICAgYXR0YWNobWVudHM6IGZhbHNlLFxuICAgICAgc3RhcnRrZXk6ICdyZXBvcnRfJyxcbiAgICAgIGVuZGtleTogJ3JlcG9ydF9cXHVmZmZmJ1xuICAgICB9KTsvKi50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgIC8vIGhhbmRsZSByZXN1bHRcbiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pOyovXG4gIH07XG5cbiAgZnVuY3Rpb24gZGVsZXRlUmVwb3J0KHJlcG9ydF9pZCkge1xuICAgIF9kYi5nZXQocmVwb3J0X2lkKS50aGVuKGZ1bmN0aW9uKGRvYykge1xuICAgICAgcmV0dXJuIF9kYi5yZW1vdmUoZG9jKTtcbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBkZWxldGVHaXZlblJlcG9ydChyZXBvcnQpIHtcbiAgICByZXR1cm4gX2RiLnJlbW92ZShyZXBvcnQpO1xuICB9O1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnRHJpbmtTZXJ2aWNlJywgWyckaHR0cCcsICdDb25maWdTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsIENvbmZpZ1NlcnZpY2UpIHtcblxuICB2YXIgYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL2FwaS9cIjtcblxuICByZXR1cm4ge1xuICAgIGdldEFsbERyaW5rc0F2YWlsYWJsZTogZnVuY3Rpb24gKHVzZXJuYW1lLHBhc3N3b3JkKSB7XG4gICAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkO1xuICAgICAgLy9ib2R5ID0gYm9keSArJyZpbnRlcmVzdGVkPScrdXNlck9iai5pbnRlcmVzdGVkKycmc3RhdHVzPScrdXNlck9iai5zdGF0dXMrJyZzaG93X2xvY2F0aW9uPScrdXNlck9iai5zaG93X2xvY2F0aW9uO1xuICAgICAgcmV0dXJuICRodHRwLnBvc3QoYmFzZVVSTCArICdnZXRfcG9zc2libGVfZHJpbmtzJywgYm9keSx7aGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICB9LFxuXG4gICAgZ2V0QWxsSW52aXRhdGlvbnNXaXRoVXNlcjogZnVuY3Rpb24gKHVzZXJuYW1lLHBhc3N3b3JkLGRlc3RpbmF0aW9uX3VpZCxhdXRob3JfdWlkKSB7XG4gICAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkO1xuICAgICAgYm9keSA9IGJvZHkgKycmdWlkPScrZGVzdGluYXRpb25fdWlkKycmYXV0aG9yX3VpZD0nK2F1dGhvcl91aWQ7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2dldF9pbnZpdGF0aW9uc19iZXR3ZWVuX3VzZXJzJywgYm9keSx7aGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgICB9LFxuXG4gICAgc2VuZERyaW5rSW52aXRhdGlvblRvVXNlcjogZnVuY3Rpb24oZHJpbmtfbmlkLGRlc3RpbmF0aW9uX3VpZCxhdXRob3JfdWlkLHVzZXJuYW1lLHBhc3N3b3JkKXtcbiAgICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQrJyZkcmlua19uaWQ9Jytkcmlua19uaWQrJyZkZXN0aW5hdGlvbl91aWQ9JytkZXN0aW5hdGlvbl91aWQrJyZhdXRob3JfdWlkPScrYXV0aG9yX3VpZDtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KGJhc2VVUkwgKyAnc2VuZF9kcmlua19pbnZpdGF0aW9uJywgYm9keSx7d2l0aENyZWRlbnRpYWxzOiB0cnVlLCBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuICAgIH0sXG5cbiAgICBzZW5kRHJpbmtJbnZpdGF0aW9uUmVzcG9uc2U6IGZ1bmN0aW9uKHJlc3BvbnNlLHVzZXJuYW1lLHBhc3N3b3JkLGludml0YXRpb25fbmlkLGRlc3RpbmF0aW9uX3VpZCl7XG4gICAgICB2YXIgYm9keSA9ICdyZXNwb25zZT0nK3Jlc3BvbnNlKycmdXNlcj0nK3VzZXJuYW1lKycmcGFzc3dvcmQ9JytwYXNzd29yZCsnJmludml0YXRpb25fbmlkPScraW52aXRhdGlvbl9uaWQrJyZkZXN0aW5hdGlvbl91aWQ9JytkZXN0aW5hdGlvbl91aWQ7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChiYXNlVVJMICsgJ2ludml0YXRpb25fcmVzcG9uc2UnLCBib2R5LHt3aXRoQ3JlZGVudGlhbHM6IHRydWUsIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCd9fSk7XG4gICAgfVxuXG4gIH07XG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnRXJyb3JTZXJ2aWNlJywgWyckaHR0cCcsJyRpb25pY1BvcHVwJywgJ1ZhbGlkYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsJGlvbmljUG9wdXAsVmFsaWRhdGlvblNlcnZpY2UpIHtcblxuICByZXR1cm4ge1xuICAgIGh0dHBfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bDogZnVuY3Rpb24gKGpzb25SZXN1bHQsIGVycm9yQ29udGFpbmVySWQpIHtcbiAgICAgIHZhciBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yQ29udGFpbmVySWQpO1xuICAgICAgaWYoanNvblJlc3VsdC5kYXRhICYmIGpzb25SZXN1bHQuZGF0YS5TdGF0dXM9PVwic3VjY2Vzc1wiIHx8IGpzb25SZXN1bHQuU3RhdHVzPT1cInN1Y2Nlc3NcIil7XG4gICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgaWYoanNvblJlc3VsdC5kYXRhKXtcbiAgICAgICAgICBlcnJvckRpdi5pbm5lckhUTUw9XCI8aDM+XCIgKyBqc29uUmVzdWx0LmRhdGEuTWVzc2FnZSArIFwiPC9oMz5cIjtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgZXJyb3JEaXYuaW5uZXJIVE1MPVwiPGgzPlwiICsganNvblJlc3VsdC5NZXNzYWdlICsgXCI8L2gzPlwiO1xuICAgICAgICB9XG4gICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaHR0cF9yZXNwb25zZV9pc19zdWNjZXNzZnVsX2FqYXg6IGZ1bmN0aW9uIChqc29uUmVzdWx0KSB7XG4gICAgICBpZihqc29uUmVzdWx0LmRhdGEucmVzdWx0PT0wKXtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBodHRwX3Jlc3BvbnNlX2lzX3N1Y2Nlc3NmdWxfcG9wdXA6IGZ1bmN0aW9uIChqc29uUmVzdWx0KSB7XG4gICAgICBpZihqc29uUmVzdWx0LmRhdGEucmVzdWx0PT0wKXtcbiAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICB0aXRsZTogXCJFcnJvclwiLFxuICAgICAgICAgdGVtcGxhdGU6IGpzb25SZXN1bHQuZGF0YS5tZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgICBhbGVydFBvcHVwLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBodHRwX2RhdGFfcmVzcG9uc2VfaXNfc3VjY2Vzc2Z1bDogZnVuY3Rpb24gKGRhdGEsIGVycm9yQ29udGFpbmVySWQpIHtcbiAgICAgIHZhciBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yQ29udGFpbmVySWQpO1xuICAgICAgaWYoZGF0YS5TdGF0dXMhPSdzdWNjZXNzJyl7XG4gICAgICAgIGVycm9yRGl2LmlubmVySFRNTD1cIjxoMz5cIiArIGRhdGEuTWVzc2FnZSArIFwiPC9oMz5cIjtcbiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIGVycm9yRGl2LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGh0dHBfZGF0YV9yZXNwb25zZV9pc19zdWNjZXNzZnVsX2FqYXg6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBpZihkYXRhLnJlc3VsdD09MCl7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc2hvd19lcnJvcl9tZXNzYWdlOiBmdW5jdGlvbiAoZXJyb3JDb250YWluZXJJZCwgbWVzc2FnZSkge1xuICAgICAgICB2YXIgZXJyb3JEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlcnJvckNvbnRhaW5lcklkKTtcbiAgICAgICAgZXJyb3JEaXYuaW5uZXJIVE1MPVwiPGgzPlwiICsgbWVzc2FnZSArIFwiPC9oMz5cIjtcbiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICBzaG93X2Vycm9yX21lc3NhZ2VfcG9wdXA6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIHZhciBhbGVydFBvcHVwID0gJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICAgdGl0bGU6IFwiRXJyb3JcIixcbiAgICAgICAgIHRlbXBsYXRlOiBtZXNzYWdlXG4gICAgICAgIH0pO1xuICAgICAgICBhbGVydFBvcHVwLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICBjaGVja19maWVsZHM6IGZ1bmN0aW9uIChmaWVsZHMsIGVycm9yQ29udGFpbmVySWQpIHtcbiAgICAgIHZhciBlcnJvcnMgPSBcIlwiO1xuICAgICAgZmllbGRzLmZvckVhY2goZnVuY3Rpb24oZmllbGQpIHtcbiAgICAgICAgaWYoZmllbGQudHlwZT09XCJub3ROdWxsXCIpe1xuICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9ub3RfZW1wdHkoZmllbGQudmFsdWUpKXtcbiAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZC5uYW1lICsgJ1wiIG5vIHB1ZWRlIGVzdGFyIHZhY8Otby48L2gzPic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGZpZWxkLnR5cGU9PVwiZW1haWxcIil7XG4gICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX2VtYWlsKGZpZWxkLnZhbHVlKSl7XG4gICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gRWwgY2FtcG8gXCInICsgZmllbGQubmFtZSArICdcIiBubyBlcyB1bmEgZGlyZWNjacOzbiBkZSBjb3JyZW8gdsOhbGlkYS48L2gzPic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmKGZpZWxkLnR5cGU9PVwiaWRkb2NfdXlcIil7XG4gICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX2lkZG9jX3V5KGZpZWxkLnZhbHVlKSl7XG4gICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gRWwgY2FtcG8gXCInICsgZmllbGQubmFtZSArICdcIiBubyBlcyB1bmEgY8OpZHVsYSB1cnVndWF5YSB2w6FsaWRhLjwvaDM+JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYoZmllbGQudHlwZT09XCJ0d29fd29yZHNcIil7XG4gICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX3R3b193b3JkcyhmaWVsZC52YWx1ZSkpe1xuICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkLm5hbWUgKyAnXCIgZGViZSBjb250ZW5lciBhbCBtZW5vcyBkb3MgcGFsYWJyYXMuPC9oMz4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihmaWVsZC50eXBlPT1cImVxdWFsc1RvXCIpe1xuICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9lcXVhbHNUbyhmaWVsZC52YWx1ZSwgZmllbGQuc2Vjb25kVmFsdWUpKXtcbiAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBMb3MgY2FtcG9zIFwiJyArIGZpZWxkLm5hbWUgKyAnXCIgbm8gY29pbmNpZGVuLjwvaDM+JztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYoZXJyb3JzID09XCJcIil7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfWVsc2V7XG4gICAgICAgIHZhciBlcnJvckRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yQ29udGFpbmVySWQpO1xuICAgICAgICBlcnJvckRpdi5pbm5lckhUTUw9IGVycm9ycztcbiAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuXG4gIH07XG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnTG9hZGVyJywgWyckaW9uaWNMb2FkaW5nJywgJyR0aW1lb3V0JywnJGlvbmljUG9wdXAnLGZ1bmN0aW9uKCRpb25pY0xvYWRpbmcsJHRpbWVvdXQsJGlvbmljUG9wdXApIHtcblxuICB2YXIgTE9BREVSQVBJID0ge1xuXG4gICAgc2hvd0xvYWRpbmc6IGZ1bmN0aW9uKHRleHQpIHtcbiAgICAgIHRleHQgPSB0ZXh0IHx8ICdMb2FkaW5nLi4uJztcbiAgICAgICRpb25pY0xvYWRpbmcuc2hvdyh7XG4gICAgICAgIHRlbXBsYXRlOiB0ZXh0XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgaGlkZUxvYWRpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgfSxcblxuICAgIHRvZ2dsZUxvYWRpbmdXaXRoTWVzc2FnZTogZnVuY3Rpb24odGV4dCwgdGltZW91dCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICBzZWxmLnNob3dMb2FkaW5nKHRleHQpO1xuXG4gICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5oaWRlTG9hZGluZygpO1xuICAgICAgfSwgdGltZW91dCB8fCAzMDAwKTtcbiAgICB9LFxuXG4gICAgY29uZmlybVBvcHVwOmZ1bmN0aW9uKHRpdGxlLHRleHQpe1xuICAgICAgdmFyIGNvbmZpcm1Qb3B1cCA9ICRpb25pY1BvcHVwLmNvbmZpcm0oe1xuICAgICB0aXRsZTogdGl0bGUsXG4gICAgIHRlbXBsYXRlOiB0ZXh0XG4gICB9KTtcbiAgIHJldHVybiBjb25maXJtUG9wdXA7XG4gfSxcblxuXG4gICAgc2hvd0FsZXJ0OmZ1bmN0aW9uKF90aXRsZSxfdGVtcGxhdGUpIHtcbiAgICAgIHZhciBhbGVydFBvcHVwID0gJGlvbmljUG9wdXAuYWxlcnQoe1xuICAgICAgICB0aXRsZTogX3RpdGxlLFxuICAgICAgICB0ZW1wbGF0ZTogX3RlbXBsYXRlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBhbGVydFBvcHVwO1xuIH1cblxuICB9O1xuICByZXR1cm4gTE9BREVSQVBJO1xufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ0xvY2F0aW9uc1NlcnZpY2UnLCBbIGZ1bmN0aW9uKCkge1xuXG4gIHZhciBsb2NhdGlvbnNPYmogPSB7fTtcbiAgbG9jYXRpb25zT2JqLmluaXRpYWxfbGF0ID0gXCJcIjtcbiAgbG9jYXRpb25zT2JqLmluaXRpYWxfbG5nID0gXCJcIjtcbiAgbG9jYXRpb25zT2JqLmxhc3RfdXNlcl9sYXQgPSBcIlwiO1xuICBsb2NhdGlvbnNPYmoubGFzdF91c2VyX2xuZyA9IFwiXCI7XG4gIGxvY2F0aW9uc09iai5jb3VuY2lsX21vZGFsID0gbnVsbDtcbiAgbG9jYXRpb25zT2JqLnNlbGVjdGVkX2NvdW5jaWwgPSBudWxsO1xuXG4gIGxvY2F0aW9uc09iai5zZWxlY3RDb3VuY2lsID0gZnVuY3Rpb24oY291bmNpbE5hbWUpIHtcbiAgICBsb2NhdGlvbnNPYmouc2VsZWN0ZWRfY291bmNpbCA9ICBjb3VuY2lsTmFtZTtcbiAgfVxuXG4gIGxvY2F0aW9uc09iai5zYXZlX2luaXRpYWxfcG9zaXRpb24gPSBmdW5jdGlvbihwb3NpdGlvbikge1xuICAgIGxvY2F0aW9uc09iai5pbml0aWFsX2xhdCA9ICBwb3NpdGlvbi5jb29yZHMubGF0aXR1ZGU7XG4gICAgbG9jYXRpb25zT2JqLmluaXRpYWxfbG5nID0gIHBvc2l0aW9uLmNvb3Jkcy5sb25naXR1ZGU7XG4gIH1cblxuICBsb2NhdGlvbnNPYmouc2F2ZV9sYXN0X3VzZXJfcG9zaXRpb24gPSBmdW5jdGlvbihsYXQsbG5nKXtcbiAgICBsb2NhdGlvbnNPYmoubGFzdF91c2VyX2xhdCA9IGxhdDtcbiAgICBsb2NhdGlvbnNPYmoubGFzdF91c2VyX2xuZyA9IGxuZztcbiAgfVxuXG4gIGxvY2F0aW9uc09iai5zYXZlZExvY2F0aW9ucyA9IFtdO1xuXG4gIHJldHVybiBsb2NhdGlvbnNPYmo7XG5cbn1dKTtcbiIsIiAvL3BtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdNYXBTZXJ2aWNlJywgWyBmdW5jdGlvbigpIHtcbiBwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnTWFwU2VydmljZScsIFsnbGVhZmxldERhdGEnLCAnJGNvbXBpbGUnLCBmdW5jdGlvbihsZWFmbGV0RGF0YSwgJGNvbXBpbGUpIHtcblxuICAgLy9EZWZpbmljaW9uIGRlIGxhIHByb3llY2NjaW9uIFVUTSAyMSBzXG4gICBwcm9qNC5kZWZzKCdFUFNHOjMyNzIxJywgJytwcm9qPXV0bSArem9uZT0yMSArc291dGggK2VsbHBzPVdHUzg0ICtkYXR1bT1XR1M4NCArdW5pdHM9bSArbm9fZGVmcycpO1xuXG5cbiAgIHZhciBtYXBTZXJ2aWNlID0ge307XG5cbiAgIG1hcFNlcnZpY2UuZ29Ub1BsYWNlID0gZnVuY3Rpb24obmFtZSxsYXQsbG9uLHNjb3BlKSB7XG4gICAgdmFyIF9nZW9Kc29uID0ge1xuICAgICAgICAgICAgICBcInR5cGVcIjogXCJGZWF0dXJlQ29sbGVjdGlvblwiLFxuICAgICAgICAgICAgICBcImNyc1wiOiB7IFwidHlwZVwiOiBcIm5hbWVcIixcbiAgICAgICAgICAgICAgICAgICAgICBcInByb3BlcnRpZXNcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJuYW1lXCI6ICd1cm46b2djOmRlZjpjcnM6RVBTRzo6MzI3MjEnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIFwiZmVhdHVyZXNcIjogW1xuICAgICAgICAgICAgICAgIHsgXCJ0eXBlXCI6IFwiRmVhdHVyZVwiLFxuICAgICAgICAgICAgICAgIFwiZ2VvbWV0cnlcIjp7XG4gICAgICAgICAgICAgICAgICAgICAgIFwidHlwZVwiOlwiUG9pbnRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgXCJjb29yZGluYXRlc1wiOltsYXQsbG9uXVxuICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJwcm9wZXJ0aWVzXCI6e1xuICAgICAgICAgICAgICAgICAgICAgIFwibm9tYnJlXCI6IG5hbWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfTtcbiAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcbiAgICAgIHZhciBfbGF0bG5nO1xuICAgICAgIHZhciBsYXllciA9IEwuUHJvai5nZW9Kc29uKF9nZW9Kc29uLCB7XG4gICAgICAgICAncG9pbnRUb0xheWVyJzogZnVuY3Rpb24oZmVhdHVyZSwgbGF0bG5nKSB7XG4gICAgICAgICAgIF9sYXRsbmcgPSBsYXRsbmc7XG4gICAgICAgICAgIHZhciBodG1sUG9wVXAgPSBcIjxwIGFsaWduPSdjZW50ZXInPlwiK2ZlYXR1cmUucHJvcGVydGllcy5ub21icmUrXCIgPGJyLz4gPGEgbmctY2xpY2s9J25ld19yZXBvcnRfZnJvbV9sYXRsb24oXCIrX2xhdGxuZy5sYXQrXCIsXCIrX2xhdGxuZy5sbmcrXCIpOyc+SW5pY2lhciByZXBvcnRlIGFxdcOtPC9hPjwvcD5cIjtcbiAgICAgICAgICAgdmFyIGNvbXBpbGVkID0gJGNvbXBpbGUoaHRtbFBvcFVwKShzY29wZSk7XG4gICAgICAgICAgIHJldHVybiBMLm1hcmtlcihsYXRsbmcpLmJpbmRQb3B1cChjb21waWxlZFswXSk7XG4gICAgICAgICB9XG4gICAgICAgfSk7XG5cbiAgICAgICBsYXllci5hZGRUbyhtYXApO1xuICAgICAgIG1hcC5zZXRWaWV3KF9sYXRsbmcsIDE4KTtcbiAgICAgICBsYXllci5vcGVuUG9wdXAoKTtcbiAgICAgfSk7XG4gICB9O1xuXG4gIG1hcFNlcnZpY2UuY2VudGVyTWFwT25Db29yZHMgPSBmdW5jdGlvbihsYXQsbG5nLHpvb20pIHtcbiAgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcbiAgICAgICAgbWFwLnNldFZpZXcobmV3IEwuTGF0TG5nKGxhdCwgbG5nKSx6b29tKTtcbiAgICAgICB9KTtcbiAgICAgfVxuXG4gICByZXR1cm4gbWFwU2VydmljZTtcblxuIH1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdNZXNzYWdlU2VydmljZScsIFsnJGh0dHAnLCAnbGVhZmxldERhdGEnLCdDb25maWdTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsIGxlYWZsZXREYXRhLCBDb25maWdTZXJ2aWNlKSB7XG5cbiAgdmFyIHBpbnNVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9zaXRlcy90b21hbW9zX3VuYS9maWxlcy9qc29uL29ubGluZV91c2Vyc19nZW8uanNvblwiO1xuICB2YXIgYXBpVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYXBpL1wiXG4vKipcbiAgICogQ29uc3RydWN0b3IsIHdpdGggY2xhc3MgbmFtZVxuICAgKi9cbiAgZnVuY3Rpb24gTWVzc2FnZShfZGF0YSkge1xuICAgIGFuZ3VsYXIuZXh0ZW5kKHRoaXMsIF9kYXRhKTtcbiAgfVxuXG5cbiAgTWVzc2FnZS5nZXRBbGxNZXNzYWdlc1RvVXNlciA9IGZ1bmN0aW9uKHVzZXJuYW1lLHBhc3N3b3JkLHVpZCxhdXRob3JfdWlkKXtcbiAgICB2YXIgYm9keSA9ICd1c2VyPScrdXNlcm5hbWUrJyZwYXNzd29yZD0nK3Bhc3N3b3JkKycmYXV0aG9yX3VpZD0nK2F1dGhvcl91aWQrJyZ1aWQ9Jyt1aWQrJyZoYXNoX2lkPScrTWF0aC5yYW5kb20oKTtcbiAgICByZXR1cm4gJGh0dHAucG9zdChhcGlVUkwgKyAnZ2V0X2FsbF9tZXNzYWdlc190b191c2VyJywgYm9keSx7aGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgfVxuXG4gIE1lc3NhZ2UuZ2V0VXNlckluZm8gPSBmdW5jdGlvbih1aWQpe1xuICAgIHJldHVybiAkaHR0cC5nZXQoYXBpVVJMICsgJ2dldF91c2VyX2luZm8nLCB7Y2FjaGU6IGZhbHNlLCBwYXJhbXM6IHt1aWQ6dWlkLCBoYXNoX2lkOk1hdGgucmFuZG9tKCl9fSk7XG4gIH1cblxuICBNZXNzYWdlLnNlbmRUZXh0TWVzc2FnZVRvVXNlciA9IGZ1bmN0aW9uKHRleHQsZGVzdGluYXRpb25fdWlkLGF1dGhvcl91aWQsdXNlcm5hbWUscGFzc3dvcmQpe1xuICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQrJyZ0ZXh0PScrdGV4dCsnJmRlc3RpbmF0aW9uX3VpZD0nK2Rlc3RpbmF0aW9uX3VpZCsnJmF1dGhvcl91aWQ9JythdXRob3JfdWlkO1xuICAgIHJldHVybiAkaHR0cC5wb3N0KGFwaVVSTCArICdzZW5kX3RleHRfbWVzc2FnZScsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgfVxuXG4gIE1lc3NhZ2UuY2hlY2tXaG9DYW5UYWxrID0gZnVuY3Rpb24odXNlcm5hbWUscGFzc3dvcmQpe1xuICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQ7XG4gICAgcmV0dXJuICRodHRwLnBvc3QoYXBpVVJMICsgJ2NoZWNrX3VzZXJfdGFsaycsIGJvZHkse3dpdGhDcmVkZW50aWFsczogdHJ1ZSwgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ319KTtcbiAgfVxuXG5cbiAgICBNZXNzYWdlLmNhblRhbGtUb1VzZXJzID0gbmV3IEFycmF5KCk7XG4gICAgTWVzc2FnZS5jdXJyZW50ID0ge307XG5cblxuICAgIC8qKlxuICAgICAqIFN0YXRpYyBtZXRob2QsIGFzc2lnbmVkIHRvIGNsYXNzXG4gICAgICogSW5zdGFuY2UgKCd0aGlzJykgaXMgbm90IGF2YWlsYWJsZSBpbiBzdGF0aWMgY29udGV4dFxuICAgICAqL1xuICAgIE1lc3NhZ2UuYnVpbGQgPSBmdW5jdGlvbihfZGF0YSkge1xuXG4gICAgICByZXR1cm4gbmV3IE1lc3NhZ2UoXG4gICAgICAgIF9kYXRhXG4gICAgICApO1xuICAgIH07XG5cblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb25cbiAgICAgKi9cbiAgICByZXR1cm4gTWVzc2FnZTtcblxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ01vZGFsU2VydmljZScsIFsgZnVuY3Rpb24oKSB7XG5cbiAgdmFyIG1vZGFsT0JKID0ge307XG4gIG1vZGFsT0JKLmFjdGl2ZU1vZGFsID0gbnVsbDtcblxuICBtb2RhbE9CSi5jaGVja05vTW9kYWxJc09wZW4gPSBmdW5jdGlvbigpIHtcbiAgICBpZihtb2RhbE9CSi5hY3RpdmVNb2RhbCl7XG4gICAgICBtb2RhbE9CSi5hY3RpdmVNb2RhbC5oaWRlKCk7XG4gICAgICBtb2RhbE9CSi5hY3RpdmVNb2RhbC5yZW1vdmUoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbW9kYWxPQko7XG5cbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdQaW5TZXJ2aWNlJywgWyckaHR0cCcsICdsZWFmbGV0RGF0YScsJ0NvbmZpZ1NlcnZpY2UnLCBmdW5jdGlvbigkaHR0cCwgbGVhZmxldERhdGEsIENvbmZpZ1NlcnZpY2UpIHtcblxuICB2YXIgcGluc1VSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL3NpdGVzL3RvbWFtb3NfdW5hL2ZpbGVzL2pzb24vb25saW5lX3VzZXJzX2dlby5qc29uXCI7XG4gIHZhciBhcGlVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hcGkvXCJcbi8qKlxuICAgKiBDb25zdHJ1Y3Rvciwgd2l0aCBjbGFzcyBuYW1lXG4gICAqL1xuICBmdW5jdGlvbiBQaW4oX2RhdGEpIHtcbiAgICBhbmd1bGFyLmV4dGVuZCh0aGlzLCBfZGF0YSk7XG4gIH1cblxuXG4gIFBpbi5nZXRBbGwgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiAkaHR0cC5nZXQocGluc1VSTCwge2NhY2hlOiBmYWxzZSwgcGFyYW1zOiB7aGFzaF9pZDpNYXRoLnJhbmRvbSgpfX0pO1xuICB9XG5cbiAgUGluLnNlbmRVc2VyTG9jYXRpb24gPSBmdW5jdGlvbihsYXRpdHVkZSxsb25naXR1ZGUsdXNlcm5hbWUscGFzc3dvcmQpe1xuICAgIHZhciBib2R5ID0gJ3VzZXI9Jyt1c2VybmFtZSsnJnBhc3N3b3JkPScrcGFzc3dvcmQrJyZsYXQ9JytsYXRpdHVkZSsnJmxvbj0nK2xvbmdpdHVkZTtcbiAgICByZXR1cm4gJGh0dHAucG9zdChhcGlVUkwgKyAnc2VuZF91c2VyX3Bvc2l0aW9uJywgYm9keSx7d2l0aENyZWRlbnRpYWxzOiB0cnVlLCBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfX0pO1xuXG4gIH1cblxuXG4gICAgUGluLl9hbGwgPSBbXTtcbiAgICBQaW4uY3VycmVudCA9IHt9O1xuICAgIFBpbi5sYXN0UGluc1Jlc3BvbnNlID0gbnVsbDtcblxuXG5cblxuICAgIC8qKlxuICAgICAqIFN0YXRpYyBtZXRob2QsIGFzc2lnbmVkIHRvIGNsYXNzXG4gICAgICogSW5zdGFuY2UgKCd0aGlzJykgaXMgbm90IGF2YWlsYWJsZSBpbiBzdGF0aWMgY29udGV4dFxuICAgICAqL1xuICAgIFBpbi5idWlsZCA9IGZ1bmN0aW9uKF9kYXRhKSB7XG5cbiAgICAgIHJldHVybiBuZXcgUGluKFxuICAgICAgICBfZGF0YVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgUGluLnByb3RvdHlwZS5zZXRMYXRMbmcgPSBmdW5jdGlvbiAobGF0bG5nKSB7XG5cbiAgICAgIHRoaXMubGF0ID0gbGF0bG5nLmxhdDtcbiAgICAgIHRoaXMubG9uID0gbGF0bG5nLmxuZztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvblxuICAgICAqL1xuICAgIHJldHVybiBQaW47XG5cbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdQb3BVcFNlcnZpY2UnLCBbJyRpb25pY1BvcHVwJywnVmFsaWRhdGlvblNlcnZpY2UnLCBmdW5jdGlvbigkaW9uaWNQb3B1cCxWYWxpZGF0aW9uU2VydmljZSkge1xuXG4gIHJldHVybiB7XG4gICAgc2hvd19hbGVydDogZnVuY3Rpb24gKGFsZXJ0X3RpdGxlLGFsZXJ0X21lc3NhZ2UpIHtcbiAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICB0aXRsZTogYWxlcnRfdGl0bGUsXG4gICAgICAgICB0ZW1wbGF0ZTogYWxlcnRfbWVzc2FnZVxuICAgICAgICB9KTtcbiAgICAgICAgYWxlcnRQb3B1cC50aGVuKGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuICAgY29uZmlybVBvcHVwOiBmdW5jdGlvbih0aXRsZSx0ZXh0KXtcbiAgICAgdmFyIGNvbmZpcm1Qb3B1cCA9ICRpb25pY1BvcHVwLmNvbmZpcm0oe1xuICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGV4dFxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgcmV0dXJuIGNvbmZpcm1Qb3B1cDtcbiAgIH0sXG5cbiAgIGFza0Zvck9uZVZhbHVlUG9wVXA6IGZ1bmN0aW9uKHNjb3BlLHRpdGxlLHRleHQsZmllbGRfbmFtZSx2YWxpZGF0aW9uVHlwZSl7XG4gICAgICAkc2NvcGUgPSBzY29wZTtcbiAgICAgIHZhciBteVBvcHVwID0gJGlvbmljUG9wdXAuc2hvdyh7XG4gICAgICB0ZW1wbGF0ZTogZmllbGRfbmFtZSArICc6IDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwib25lX3ZhbHVlX3BvcHVwXCI+PGRpdiBpZD1cImVycm9yX2NvbnRhaW5lcl9pbnNpZGVcIj48L2Rpdj4nLFxuICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgc3ViVGl0bGU6IHRleHQsXG4gICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgYnV0dG9uczogW1xuICAgICAgICB7IHRleHQ6ICdDYW5jZWxhcicgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRleHQ6ICc8Yj5FbnZpYXI8L2I+JyxcbiAgICAgICAgICB0eXBlOiAnYnV0dG9uLXBvc2l0aXZlJyxcbiAgICAgICAgICBvblRhcDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIGVycm9ycyA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9uZV92YWx1ZV9wb3B1cFwiKS52YWx1ZTtcbiAgICAgICAgICAgIGlmKHZhbGlkYXRpb25UeXBlPT1cIm5vdE51bGxcIil7XG4gICAgICAgICAgICAgIGlmKCFWYWxpZGF0aW9uU2VydmljZS52YWxpZGF0ZV9ub3RfZW1wdHkodmFsdWUpKXtcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgKyAnPGgzPi0gRWwgY2FtcG8gXCInICsgZmllbGRfbmFtZSArICdcIiBubyBwdWVkZSBlc3RhciB2YWPDrW8uPC9oMz4nO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih2YWxpZGF0aW9uVHlwZT09XCJlbWFpbFwiKXtcbiAgICAgICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX2VtYWlsKHZhbHVlKSl7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkX25hbWUgKyAnXCIgbm8gZXMgdW5hIGRpcmVjY2nDs24gZGUgY29ycmVvIHbDoWxpZGEuPC9oMz4nO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih2YWxpZGF0aW9uVHlwZT09XCJpZGRvY191eVwiKXtcbiAgICAgICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX2lkZG9jX3V5KHZhbHVlKSl7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzICsgJzxoMz4tIEVsIGNhbXBvIFwiJyArIGZpZWxkX25hbWUgKyAnXCIgbm8gZXMgdW5hIGPDqWR1bGEgdXJ1Z3VheWEgdsOhbGlkYS48L2gzPic7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHZhbGlkYXRpb25UeXBlPT1cInR3b193b3Jkc1wiKXtcbiAgICAgICAgICAgICAgaWYoIVZhbGlkYXRpb25TZXJ2aWNlLnZhbGlkYXRlX3R3b193b3Jkcyh2YWx1ZSkpe1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyArICc8aDM+LSBFbCBjYW1wbyBcIicgKyBmaWVsZF9uYW1lICsgJ1wiIGRlYmUgY29udGVuZXIgYWwgbWVub3MgZG9zIHBhbGFicmFzLjwvaDM+JztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoZXJyb3JzIT1cIlwiKXtcbiAgICAgICAgICAgICAgdmFyIGVycm9yRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlcnJvcl9jb250YWluZXJfaW5zaWRlXCIpO1xuICAgICAgICAgICAgICBlcnJvckRpdi5pbm5lckhUTUw9IGVycm9ycztcbiAgICAgICAgICAgICAgZXJyb3JEaXYuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgLy9kb24ndCBhbGxvdyB0aGUgdXNlciB0byBjbG9zZSB1bmxlc3MgaGUgZW50ZXJzIHdpZmkgcGFzc3dvcmRcbiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pO1xuICAgIHJldHVybiBteVBvcHVwO1xuICAgfVxuXG5cbiAgfTtcbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdTZW1hcGhvcmVTZXJ2aWNlJywgW2Z1bmN0aW9uKCkge1xuXG4gIHZhciBzZW1hcGhvcmVPYmogPSB7fTtcbiAgc2VtYXBob3JlT2JqLnNlbWFwaG9yZXMgPSBuZXcgQXJyYXkoKTtcbiAgc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbJ29wZW4tbW9kYWwnXSA9IFwiYXZhaWxhYmxlXCI7XG4gIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzWydzdWJtaXQtZm9ybSddID0gXCJhdmFpbGFibGVcIjtcbiAgc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbJ3N1Ym1pdC1sb2NhdGlvbiddID0gXCJhdmFpbGFibGVcIjtcbiAgc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbJ2Nhbl90YWxrJ10gPSBcImF2YWlsYWJsZVwiO1xuXG5cblxuXG4gIHNlbWFwaG9yZU9iai50YWtlSWZBdmFpbGFibGUgPSBmdW5jdGlvbihzZW1hcGhvcmVJZCkge1xuICAgIC8vY29uc29sZS5sb2coc2VtYXBob3JlSWQgKyBcIjpcIiArIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzW3NlbWFwaG9yZUlkXSk7XG4gICAgaWYoc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbc2VtYXBob3JlSWRdPT1cImF2YWlsYWJsZVwiKXtcbiAgICAgICAgc2VtYXBob3JlT2JqLnNlbWFwaG9yZXNbc2VtYXBob3JlSWRdID0gXCJvY2N1cGllZFwiO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9ZWxzZXtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBzZW1hcGhvcmVPYmoubWFrZUF2YWlsYWJsZUFnYWluID0gZnVuY3Rpb24oc2VtYXBob3JlSWQpIHtcbiAgICBpZihzZW1hcGhvcmVPYmouc2VtYXBob3Jlc1tzZW1hcGhvcmVJZF09PVwib2NjdXBpZWRcIil7XG4gICAgICAgIHNlbWFwaG9yZU9iai5zZW1hcGhvcmVzW3NlbWFwaG9yZUlkXSA9IFwiYXZhaWxhYmxlXCI7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1lbHNle1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzZW1hcGhvcmVPYmo7XG5cbn1dKTtcbiIsInBtYl9pbS5zZXJ2aWNlcy5mYWN0b3J5KCdsb2NhdGlvbkFQSScsIFsnJGh0dHAnLCAnJHEnLCAnQXBpSW1FbmRwb2ludCcsICdBcGlEYXRhRW5kcG9pbnQnLCAnQ29uZmlnU2VydmljZScsICdMb2NhdGlvbnNTZXJ2aWNlJywgZnVuY3Rpb24oJGh0dHAsICRxLCBBcGlJbUVuZHBvaW50LCBBcGlEYXRhRW5kcG9pbnQsIENvbmZpZ1NlcnZpY2UsIExvY2F0aW9uc1NlcnZpY2UpIHtcblxuICB2YXIgcmVzdFByZWZmaXggPSBcInViaWNhY2lvbmVzUmVzdFByb2RcIjtcblxuXG4gIHZhciBsb2NhdGlvbkFQSSA9IHt9O1xuXG4gIGxvY2F0aW9uQVBJLnNlYXJjaExvY2F0aW9uQnlTdHIgPSBmdW5jdGlvbihfbG9jYXRpb24pIHtcbiAgICAvKnJldHVybiAkaHR0cC5nZXQoQXBpSW1FbmRwb2ludC51cmwgKyAnLycgKyByZXN0UHJlZmZpeCArICcvY2FsbGVzJywge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHBhcmFtczoge1xuICAgICAgICBub21icmU6IF9sb2NhdGlvblxuICAgICAgfVxuICAgIH0pOyovXG4gICAgdmFyIGJhc2VVUkwgPSBDb25maWdTZXJ2aWNlLmJhc2VVUkwgKyBcIi9hamF4L2dlb2NvZGU/dGVybT1cIiArIExvY2F0aW9uc1NlcnZpY2Uuc2VsZWN0ZWRfY291bmNpbCArIFwiLFwiICsgX2xvY2F0aW9uO1xuICAgIHJldHVybiAkaHR0cC5nZXQoYmFzZVVSTCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHBhcmFtczoge31cbiAgICB9KTtcbiAgfTtcblxuXG4gIGxvY2F0aW9uQVBJLnNlYXJjaEVzcXVpbmFCeVN0ciA9IGZ1bmN0aW9uKF9sb2NhdGlvbikge1xuICAgIC8vY29uc29sZS5sb2coXCJzZWFyY2hFc3F1aW5hQnlTdHIgPSBcIiArIEpTT04uc3RyaW5naWZ5KF9sb2NhdGlvbikpO1xuICAgIC8vcmV0dXJuICRodHRwLmdldChBcGlJbUVuZHBvaW50LnVybCArICcvJyArIHJlc3RQcmVmZml4ICsgJy9lc3F1aW5hLycgKyBfbG9jYXRpb24uY2FsbGUgKyAnLycgKyBfbG9jYXRpb24uZXNxdWluYSwge1xuICAgICAgLypyZXR1cm4gJGh0dHAuZ2V0KEFwaUltRW5kcG9pbnQudXJsICsgJy8nICsgcmVzdFByZWZmaXggKyAnL2NydWNlcy8nICsgX2xvY2F0aW9uLmNhbGxlICsgJy8nLFxuICAgICAge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBub21icmU6IF9sb2NhdGlvbi5lc3F1aW5hXG4gICAgICAgIH1cbiAgICAgIH0pOyovXG5cbiAgICAgIHZhciBiYXNlVVJMID0gQ29uZmlnU2VydmljZS5iYXNlVVJMICsgXCIvYWpheC9nZW9jb2RlP3Rlcm09XCIgKyBMb2NhdGlvbnNTZXJ2aWNlLnNlbGVjdGVkX2NvdW5jaWwgKyBcIixcIlxuICAgICAgICAgICAgICAgICAgICArIF9sb2NhdGlvbi5jYWxsZSArIFwiLFwiICsgX2xvY2F0aW9uLmVzcXVpbmE7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KGJhc2VVUkwsIHtcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgcGFyYW1zOiB7fVxuICAgICAgfSk7XG4gIH07XG5cbiAgbG9jYXRpb25BUEkuZ2V0TG9jYXRpb25HZW9tID0gZnVuY3Rpb24oX2xvY2F0aW9uKSB7XG4gICAgdmFyIHVybCA9IEFwaUltRW5kcG9pbnQudXJsICsgJy8nICsgcmVzdFByZWZmaXggKyBsb2NhdGlvbkFQSS5nZXRQYXJhbVBhdGhCeVRpcG8oX2xvY2F0aW9uLnRpcG8pO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX2xvY2F0aW9uLnBhdGhQYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHVybCArPSAnLycgKyBfbG9jYXRpb24ucGF0aFBhcmFtc1tpXTtcbiAgICB9XG4gICAgcmV0dXJuICRodHRwLmdldChiYXNlVVJMKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgIH0pO1xuICB9O1xuXG4gIGxvY2F0aW9uQVBJLmdldExvY2F0aW9uR2VvbVBNQiA9IGZ1bmN0aW9uKGNhbGxlLGVzcXVpbmFfbnVtZXJvLHRpcG8pIHtcbiAgICB2YXIgYmFzZVVSTCA9IENvbmZpZ1NlcnZpY2UuYmFzZVVSTCArIFwiL2FqYXgvZ2VvY29kZT90ZXJtPVwiICsgTG9jYXRpb25zU2VydmljZS5zZWxlY3RlZF9jb3VuY2lsICsgXCIsXCJcbiAgICAgICAgICAgICAgKyBjYWxsZSArIFwiLFwiICsgZXNxdWluYV9udW1lcm8gKyBcIixcIiArIHRpcG87XG5cbiAgICByZXR1cm4gJGh0dHAuZ2V0KGJhc2VVUkwpO1xuXG4gIH07XG5cbiAgbG9jYXRpb25BUEkuZ2V0UGFyYW1QYXRoQnlUaXBvID0gZnVuY3Rpb24oX3RpcG8pIHtcblxuICAgIHZhciByZXN0R2VvRGF0YVNlcnZpY2VQYXRoID0ge1xuICAgICAgJ0VTUVVJTkEnOlwiL2VzcXVpbmFcIixcbiAgICAgICdESVJFQ0NJT04nOlwiL2RpcmVjY2lvblwiXG4gICAgfTtcblxuICAgIHJldHVybiByZXN0R2VvRGF0YVNlcnZpY2VQYXRoW190aXBvXTtcblxuXG4gIH07XG5cbiAgcmV0dXJuIGxvY2F0aW9uQVBJO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnXycsIFtmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHdpbmRvdy5fOyAvL1VuZGVyc2NvcmUgbXVzdCBhbHJlYWR5IGJlIGxvYWRlZCBvbiB0aGUgcGFnZVxufV0pO1xuIiwicG1iX2ltLnNlcnZpY2VzLmZhY3RvcnkoJ1VzZXJTZXJ2aWNlJywgWyckaHR0cCcsIGZ1bmN0aW9uKCRodHRwKSB7XG5cbiAgLy92YXIgYmFzZVVSTCA9IFwiaHR0cDovL3BtYnV5LmRldmVsb3BtZW50LmRhdGF1eS5vcmcvYXV0aC9hamF4L1wiO1xuICB2YXIgVXNlck9iaiA9IHt9O1xuICBVc2VyT2JqLnVpZCA9IG51bGw7XG4gIFVzZXJPYmoubmFtZSA9IG51bGw7XG4gIFVzZXJPYmouZW1haWwgPSBudWxsO1xuICBVc2VyT2JqLnBhc3N3b3JkID0gbnVsbDtcbiAgVXNlck9iai5waWN0dXJlX3VybCA9IFwidXJsKC4vaW1nL2ljb24tdXNlci1hbm9ueW1vdXMucG5nKVwiO1xuICBVc2VyT2JqLnNob3dfbG9jYXRpb24gPSBudWxsO1xuXG5cbiAgVXNlck9iai5zYXZlX3VzZXJfZGF0YSA9IGZ1bmN0aW9uICh1c2VyX25hbWUsIHVzZXJfcGFzc3dvcmQsIHVzZXJfcGljdHVyZV91cmwsIHNob3dfbG9jYXRpb24sIHVpZCwgc3RhdHVzLCBnZW5kZXIsIGludGVyZXN0ZWQpIHtcbiAgICAgIFVzZXJPYmoudWlkID0gdWlkO1xuICAgICAgVXNlck9iai5uYW1lID0gdXNlcl9uYW1lO1xuICAgICAgVXNlck9iai5wYXNzd29yZCA9IHVzZXJfcGFzc3dvcmQ7XG4gICAgICBVc2VyT2JqLnBpY3R1cmVfdXJsID0gdXNlcl9waWN0dXJlX3VybDtcbiAgICAgIFVzZXJPYmouc2hvd19sb2NhdGlvbiA9IHNob3dfbG9jYXRpb247XG4gICAgICBVc2VyT2JqLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgIFVzZXJPYmouZ2VuZGVyID0gZ2VuZGVyO1xuICAgICAgVXNlck9iai5pbnRlcmVzdGVkID0gaW50ZXJlc3RlZDtcblxuICAgICAgLy9TQVZFIElOIFBPVUNIREJcbiAgfVxuXG4gIFVzZXJPYmouZXJhc2VfdXNlcl9kYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIFVzZXJPYmoubmFtZSA9IG51bGw7XG4gICAgVXNlck9iai5lbWFpbCA9IG51bGw7XG4gICAgVXNlck9iai5wYXNzd29yZCA9IG51bGw7XG4gICAgVXNlck9iai5pZGVudGl0eV9kb2N1bWVudCA9IG51bGw7XG4gICAgVXNlck9iai5waG9uZSA9IG51bGw7XG4gICAgVXNlck9iai5waWN0dXJlX3VybCA9IG51bGw7XG4gICAgLy9ERUxFVEUgSU4gUE9VQ0hEQlxuICB9XG5cbiAgVXNlck9iai5nZXRfdXNlcl9kYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIC8vTEVWQU5UQSBERSBQT1VDSERCIExPUyBEQVRPUyBERUwgVVNVQVJJTy4gU0kgSEFZIExPUyBQT05FIEVOIExBUyBWQVJJQUJMRVMgREVMIFNFUlZJQ0lPLiBTSSBOTyBIQVkgUE9ORSBUT0RPIE5VTExcbiAgfVxuXG4gIFVzZXJPYmouYWRkX3Bob3RvID0gZnVuY3Rpb24gKHVzZXJfcGljdHVyZV91cmwpIHtcbiAgICBVc2VyT2JqLnBpY3R1cmVfdXJsID0gdXNlcl9waWN0dXJlX3VybDtcbiAgfVxuXG4gIFVzZXJPYmouaXNMb2dnZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYoVXNlck9iai5uYW1lIT1udWxsICYmIFVzZXJPYmoubmFtZSE9XCJcIil7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9ZWxzZXtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuXG4gIHJldHVybiBVc2VyT2JqO1xuXG59XSk7XG4iLCJwbWJfaW0uc2VydmljZXMuZmFjdG9yeSgnVmFsaWRhdGlvblNlcnZpY2UnLCBbJyRodHRwJywnJGlvbmljUG9wdXAnLCBmdW5jdGlvbigkaHR0cCwkaW9uaWNQb3B1cCkge1xuXG4gIHJldHVybiB7XG4gICAgaXNNb2JpbGVEZXZpY2U6IGZ1bmN0aW9uKCl7XG4gICAgICBpZih3aW5kb3cuY29yZG92YSl7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgfSxcblxuICAgIHZhbGlkYXRlX25vdF9lbXB0eTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmKHZhbHVlIT1udWxsICYmIHZhbHVlIT1cInVuZGVmaW5lZFwiICYmIHZhbHVlIT1cIlwiKXtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHZhbGlkYXRlX3R3b193b3JkczogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmKHZhbHVlIT1udWxsICYmIHZhbHVlIT1cInVuZGVmaW5lZFwiICYmIHZhbHVlIT1cIlwiKXtcbiAgICAgICAgICB2YXIgdmFsdWVzID0gdmFsdWUuc3BsaXQoJyAnKS5maWx0ZXIoZnVuY3Rpb24odil7cmV0dXJuIHYhPT0nJ30pO1xuICAgICAgICAgIGlmICh2YWx1ZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAvL3R3byBvciBtb3JlIHdvcmRzXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vbm90IGVub3VnaCB3b3Jkc1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdmFsaWRhdGVfZXF1YWxzVG86IGZ1bmN0aW9uICh2YWx1ZSxzZWNvbmRWYWx1ZSkge1xuICAgICAgaWYodmFsdWU9PXNlY29uZFZhbHVlKXtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB2YWxpZGF0ZV9lbWFpbDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmKHZhbHVlIT1udWxsICYmIHZhbHVlIT1cInVuZGVmaW5lZFwiICYmIHZhbHVlIT1cIlwiKXtcbiAgICAgICAgICB2YXIgcmUgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcbiAgICAgICAgICByZXR1cm4gcmUudGVzdCh2YWx1ZSk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB2YWxpZGF0ZV9pZGRvY191eTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZih2YWx1ZSE9bnVsbCAmJiB2YWx1ZSE9XCJ1bmRlZmluZWRcIiAmJiB2YWx1ZSE9XCJcIil7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXEQvZywgJycpO1xuICAgICAgICAgIHZhciBkaWcgPSB2YWx1ZVt2YWx1ZS5sZW5ndGggLSAxXTtcbiAgICAgICAgICB2YXIgYSA9IDA7IHZhciBpID0gMDtcbiAgICAgICAgICBpZih2YWx1ZS5sZW5ndGggPD0gNil7XG4gICAgICAgICAgICBmb3IoaSA9IHZhbHVlLmxlbmd0aDsgaSA8IDc7IGkrKyl7XG4gICAgICAgICAgICAgIHZhbHVlID0gJzAnICsgdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvcihpID0gMDsgaSA8IDc7IGkrKyl7XG4gICAgICAgICAgICBhICs9IChwYXJzZUludChcIjI5ODc2MzRcIltpXSkgKiBwYXJzZUludCh2YWx1ZVtpXSkpICUgMTA7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgaWYoYSUxMCA9PT0gMCl7XG4gICAgICAgICAgICByZXN1bHQgPSAwO1xuICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcmVzdWx0ID0gMTAgLSBhICUgMTA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmKGRpZyA9PSByZXN1bHQpe1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgfWVsc2V7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XSk7XG4iXX0=
